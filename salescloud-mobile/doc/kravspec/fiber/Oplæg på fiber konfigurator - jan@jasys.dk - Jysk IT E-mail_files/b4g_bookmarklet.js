/*
: Gmail.js, Copyright (c) 2014 Kartik Talwar
 @license: Licensed under The MIT License.
 modified from https://github.com/KartikTalwar/gmail.js/tree/master
: date.js, Copyright (c) 2006-2008, Coolite Inc. (http://www.coolite.com/). All rights reserved.
 @license: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/.
 @website: http://www.datejs.com/
: word_count licensed under Apache License.
 word_count function Ported from https://github.com/ipeirotis/ReadabilityMetrics based on StackOverflow recommendations
*/
(function(){function B(a){return 17===a||18===a||19===a||a>=Qa}function E(b){return/^[a-zA-Z0-9\._+\-]+@[a-zA-Z0-9\.\-]+\.[a-z\.A-Z]+$/.test(a.trim(b))}function x(a){a=a||0;var c;document.getElementById("b4g-style-css")||(c=document.createElement("link"),c.id="b4g-style-css",c.type="text/css",c.rel="stylesheet",c.href="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/css/extensionsafestyle.css?v=3",c.media="screen",c.onerror=function(){var c=document.getElementById("b4g-style-css");c.parentElement.removeChild(c);
10>a&&x(a+1)},Db.appendChild(c));document.getElementById("b4g-jqueryui-css")||(c=document.createElement("link"),c.id="b4g-jqueryui-css",c.type="text/css",c.rel="stylesheet",c.href="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/css/extensionsafejqueryui.css",c.media="screen",c.onerror=function(){var c=document.getElementById("b4g-jqueryui-css");c.parentElement.removeChild(c);10>a&&x(a+1)},Db.appendChild(c))}function N(){la={};var a=window.location.toString(),c=a.indexOf("?"),d=a.lastIndexOf("#");
0>c||(0>d&&(d=a.length),a.substring(c+1,d).split("&").forEach(function(c){var a=c.indexOf("=");la[c.substr(0,a)]=c.substr(a+1)}))}function T(a,c){var d=new XMLHttpRequest;d.open("GET",a,!0);d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var a=document.createElement("script");a.text=d.responseText;document.head.appendChild(a).parentNode.removeChild(a);c&&c()}};d.send()}function h(){V=String(document.location);"undefined"===typeof window.jQuery&&0>V.indexOf("ContactManager")?Eb=
setTimeout(h,500):(a=ia=window.jQuery.noConflict(!0),window.b4g.$=a,setTimeout(Lc,0),setTimeout(z,0))}function z(){function a(){var c=document.getElementById("canvas_frame");if(!c)return document;c=c.contentWindow||c.contentDocument;c.document&&(c=c.document);return c}(function(c,a){function b(a,d){var m=a.nodeName.toLowerCase();if("area"===m){var m=a.parentNode,k=m.name;if(!a.href||!k||"map"!==m.nodeName.toLowerCase())return!1;m=c("img[usemap=#"+k+"]")[0];return!!m&&f(m)}return(/input|select|textarea|button|object/.test(m)?
!a.disabled:"a"==m?a.href||d:d)&&f(a)}function f(a){return!c(a).parents().andSelf().filter(function(){return"hidden"===c.curCSS(this,"visibility")||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};c.ui.version||(c.extend(c.ui,{version:"1.8.13",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,
NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),c.fn.extend({_focus:c.fn.focus,focus:function(a,b){return"number"===typeof a?this.each(function(){var d=this;setTimeout(function(){c(d).focus();b&&b.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,
"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(b){if(b!==a)return this.css("zIndex",b);if(this.length){b=c(this[0]);for(var e;b.length&&b[0]!==document;){e=b.css("position");
if("absolute"===e||"relative"===e||"fixed"===e)if(e=parseInt(b.css("zIndex"),10),!isNaN(e)&&0!==e)return e;b=b.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(c){c.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),c.each(["Width","Height"],function(b,e){function m(a,b,d,e){c.each(k,function(){b-=parseFloat(c.curCSS(a,"padding"+this,!0))||0;d&&(b-=parseFloat(c.curCSS(a,
"border"+this+"Width",!0))||0);e&&(b-=parseFloat(c.curCSS(a,"margin"+this,!0))||0)});return b}var k="Width"===e?["Left","Right"]:["Top","Bottom"],C=e.toLowerCase(),p={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+e]=function(b){return b===a?p["inner"+e].call(this):this.each(function(){c(this).css(C,m(this,b)+"px")})};c.fn["outer"+e]=function(a,b){return"number"!==typeof a?p["outer"+e].call(this,a):this.each(function(){c(this).css(C,
m(this,a,!0,b)+"px")})}}),c.extend(c.expr[":"],{data:function(a,b,d){return!!c.data(a,d[3])},focusable:function(a){return b(a,!isNaN(c.attr(a,"tabindex")))},tabbable:function(a){var d=c.attr(a,"tabindex"),m=isNaN(d);return(m||0<=d)&&b(a,!m)}}),c(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));c.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=100===b.offsetHeight;c.support.selectstart="onselectstart"in b;a.removeChild(b).style.display=
"none"}),c.extend(c.ui,{plugin:{add:function(a,b,d){a=c.ui[a].prototype;for(var k in d)a.plugins[k]=a.plugins[k]||[],a.plugins[k].push([b,d[k]])},call:function(c,a,b){if((a=c.plugins[a])&&c.element[0].parentNode)for(var k=0;k<a.length;k++)c.options[a[k][0]]&&a[k][1].apply(c.element,b)}},contains:function(c,a){return document.compareDocumentPosition?c.compareDocumentPosition(a)&16:c!==a&&c.contains(a)},hasScroll:function(a,b){if("hidden"===c(a).css("overflow"))return!1;var d=b&&"left"===b?"scrollLeft":
"scrollTop",k;if(0<a[d])return!0;a[d]=1;k=0<a[d];a[d]=0;return k},isOverAxis:function(c,a,b){return c>a&&c<a+b},isOver:function(a,b,d,k,e,p){return c.ui.isOverAxis(a,d,e)&&c.ui.isOverAxis(b,k,p)}}))})(ia);(function(c,a){if(c.cleanData){var b=c.cleanData;c.cleanData=function(a){for(var d=0,m;null!=(m=a[d]);d++)c(m).triggerHandler("remove");b(a)}}else{var f=c.fn.remove;c.fn.remove=function(a,b){return this.each(function(){b||a&&!c.filter(a,[this]).length||c("*",this).add([this]).each(function(){c(this).triggerHandler("remove")});
return f.call(c(this),a,b)})}}c.widget=function(a,b,d){var k=a.split(".")[0],e;a=a.split(".")[1];e=k+"-"+a;d||(d=b,b=c.Widget);c.expr[":"][e]=function(b){return!!c.data(b,a)};c[k]=c[k]||{};c[k][a]=function(c,a){arguments.length&&this._createWidget(c,a)};b=new b;b.options=c.extend(!0,{},b.options);c[k][a].prototype=c.extend(!0,b,{namespace:k,widgetName:a,widgetEventPrefix:c[k][a].prototype.widgetEventPrefix||a,widgetBaseClass:e},d);c.widget.bridge(a,c[k][a])};c.widget.bridge=function(b,e){c.fn[b]=
function(m){var k="string"===typeof m,C=Array.prototype.slice.call(arguments,1),p=this;m=!k&&C.length?c.extend.apply(null,[!0,m].concat(C)):m;if(k&&"_"===m.charAt(0))return p;k?this.each(function(){var k=c.data(this,b),e=k&&c.isFunction(k[m])?k[m].apply(k,C):k;if(e!==k&&e!==a)return p=e,!1}):this.each(function(){var a=c.data(this,b);a?a.option(m||{})._init():c.data(this,b,new e(m,this))});return p}};c.Widget=function(c,a){arguments.length&&this._createWidget(c,a)};c.Widget.prototype={widgetName:"widget",
widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,b){c.data(b,this.widgetName,this);this.element=c(b);this.options=c.extend(!0,{},this.options,this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return c.metadata&&c.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+
this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(b,e){var m=b;if(0===arguments.length)return c.extend({},this.options);if("string"===typeof b){if(e===a)return this.options[b];m={};m[b]=e}this._setOptions(m);return this},_setOptions:function(a){var b=this;c.each(a,function(c,a){b._setOption(c,a)});return this},_setOption:function(c,
a){this.options[c]=a;"disabled"===c&&this.widget()[a?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",a);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,b,d){var k=this.options[a];b=c.Event(b);b.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d=d||{};if(b.originalEvent){a=c.event.props.length;for(var e;a;)e=c.event.props[--a],
b[e]=b.originalEvent[e]}this.element.trigger(b,d);return!(c.isFunction(k)&&!1===k.call(this.element[0],b,d)||b.isDefaultPrevented())}}})(ia);(function(c,a){c.ui=c.ui||{};var b=/left|center|right/,f=/top|center|bottom/,g=c.fn.position,l=c.fn.offset;c.fn.position=function(a){if(!a||!a.of)return g.apply(this,arguments);a=c.extend({},a);var k=c(a.of),d=k[0],p=(a.collision||"flip").split(" "),l=a.offset?a.offset.split(" "):[0,0],v,D,L;9===d.nodeType?(v=k.width(),D=k.height(),L={top:0,left:0}):d.setTimeout?
(v=k.width(),D=k.height(),L={top:k.scrollTop(),left:k.scrollLeft()}):d.preventDefault?(a.at="left top",v=D=0,L={top:a.of.pageY,left:a.of.pageX}):(v=k.outerWidth(),D=k.outerHeight(),L=k.offset());c.each(["my","at"],function(){var c=(a[this]||"").split(" ");1===c.length&&(c=b.test(c[0])?c.concat(["center"]):f.test(c[0])?["center"].concat(c):["center","center"]);c[0]=b.test(c[0])?c[0]:"center";c[1]=f.test(c[1])?c[1]:"center";a[this]=c});1===p.length&&(p[1]=p[0]);l[0]=parseInt(l[0],10)||0;1===l.length&&
(l[1]=l[0]);l[1]=parseInt(l[1],10)||0;"right"===a.at[0]?L.left+=v:"center"===a.at[0]&&(L.left+=v/2);"bottom"===a.at[1]?L.top+=D:"center"===a.at[1]&&(L.top+=D/2);L.left+=l[0];L.top+=l[1];return this.each(function(){var b=c(this),k=b.outerWidth(),d=b.outerHeight(),e=parseInt(c.curCSS(this,"marginLeft",!0))||0,C=parseInt(c.curCSS(this,"marginTop",!0))||0,f=k+e+(parseInt(c.curCSS(this,"marginRight",!0))||0),g=d+C+(parseInt(c.curCSS(this,"marginBottom",!0))||0),h=c.extend({},L),n;"right"===a.my[0]?h.left-=
k:"center"===a.my[0]&&(h.left-=k/2);"bottom"===a.my[1]?h.top-=d:"center"===a.my[1]&&(h.top-=d/2);h.left=Math.round(h.left);h.top=Math.round(h.top);n={left:h.left-e,top:h.top-C};c.each(["left","top"],function(b,e){if(c.ui.position[p[b]])c.ui.position[p[b]][e](h,{targetWidth:v,targetHeight:D,elemWidth:k,elemHeight:d,collisionPosition:n,collisionWidth:f,collisionHeight:g,offset:l,my:a.my,at:a.at})});c.fn.bgiframe&&b.bgiframe();b.offset(c.extend(h,{using:a.using}))})};c.ui.position={fit:{left:function(a,
b){var d=c(window),d=b.collisionPosition.left+b.collisionWidth-d.width()-d.scrollLeft();a.left=0<d?a.left-d:Math.max(a.left-b.collisionPosition.left,a.left)},top:function(a,b){var d=c(window),d=b.collisionPosition.top+b.collisionHeight-d.height()-d.scrollTop();a.top=0<d?a.top-d:Math.max(a.top-b.collisionPosition.top,a.top)}},flip:{left:function(a,b){if("center"!==b.at[0]){var d=c(window),d=b.collisionPosition.left+b.collisionWidth-d.width()-d.scrollLeft(),e="left"===b.my[0]?-b.elemWidth:"right"===
b.my[0]?b.elemWidth:0,f="left"===b.at[0]?b.targetWidth:-b.targetWidth,l=-2*b.offset[0];a.left+=0>b.collisionPosition.left?e+f+l:0<d?e+f+l:0}},top:function(a,b){if("center"!==b.at[1]){var d=c(window),d=b.collisionPosition.top+b.collisionHeight-d.height()-d.scrollTop(),e="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,f="top"===b.at[1]?b.targetHeight:-b.targetHeight,l=-2*b.offset[1];a.top+=0>b.collisionPosition.top?e+f+l:0<d?e+f+l:0}}}};c.offset.setOffset||(c.offset.setOffset=function(a,
b){/static/.test(c.curCSS(a,"position"))&&(a.style.position="relative");var d=c(a),e=d.offset(),f=parseInt(c.curCSS(a,"top",!0),10)||0,l=parseInt(c.curCSS(a,"left",!0),10)||0,e={top:b.top-e.top+f,left:b.left-e.left+l};"using"in b?b.using.call(a,e):d.css(e)},c.fn.offset=function(a){var b=this[0];return b&&b.ownerDocument?a?this.each(function(){c.offset.setOffset(this,a)}):l.call(this):null})})(ia);(function(c,a){var b={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},
f={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},g=c.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};c.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(a){var b=c(this).css(a).offset().top;0>b&&c(this).css("top",a.top-b)}},resizable:!0,show:null,
stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!==typeof this.originalTitle&&(this.originalTitle="");this.options.title=this.options.title||this.originalTitle;var a=this,b=a.options,k=b.title||"&#160;",d=c.ui.dialog.getTitleId(a.element),e=(a.uiDialog=c("<div></div>")).appendTo(document.body).hide().addClass("b4g-ui-dialog b4g-ui-widget b4g-ui-widget-content b4g-ui-corner-all "+b.dialogClass).css({zIndex:b.zIndex}).attr("tabIndex",
-1).css("outline",0).keydown(function(k){b.closeOnEscape&&k.keyCode&&k.keyCode===c.ui.keyCode.ESCAPE&&(a.close(k),k.preventDefault())}).attr({role:"dialog","aria-labelledby":d}).mousedown(function(c){a.moveToTop(!1,c)});a.element.show().removeAttr("title").addClass("b4g-ui-dialog-content b4g-ui-widget-content").appendTo(e);var f=(a.uiDialogTitlebar=c("<div></div>")).addClass("b4g-ui-dialog-titlebar b4g-ui-widget-header b4g-ui-corner-all b4g-ui-helper-clearfix").prependTo(e),g=c('<a href="#"></a>').addClass("b4g-ui-dialog-titlebar-close b4g-ui-corner-all").attr("role",
"button").focus(function(){g.addClass("ui-state-focus")}).blur(function(){g.removeClass("ui-state-focus")}).click(function(c){a.close(c);return!1}).appendTo(f);(a.uiDialogTitlebarCloseText=c("<span></span>")).addClass("ui-icon ui-icon-closethick").text(b.closeText).appendTo(g);c("<span></span>").addClass("b4g-ui-dialog-title").attr("id",d).html(k).prependTo(f);c.isFunction(b.beforeclose)&&!c.isFunction(b.beforeClose)&&(b.beforeClose=b.beforeclose);f.find("*").add(f).disableSelection();b.draggable&&
c.fn.draggable&&a._makeDraggable();b.resizable&&c.fn.resizable&&a._makeResizable();a._createButtons(b.buttons);a._isOpen=!1;c.fn.bgiframe&&e.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.unbind(".dialog").removeData("dialog").removeClass("b4g-ui-dialog-content b4g-ui-widget-content").hide().appendTo("body");this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);
return this},widget:function(){return this.uiDialog},close:function(a){var b=this,k,d;if(!1!==b._trigger("beforeClose",a))return b.overlay&&b.overlay.destroy(),b.uiDialog.unbind("keypress.b4g-ui-dialog"),b._isOpen=!1,b.options.hide?b.uiDialog.hide(b.options.hide,function(){b._trigger("close",a)}):(b.uiDialog.hide(),b._trigger("close",a)),c.ui.dialog.overlay.resize(),b.options.modal&&(k=0,c(".b4g-ui-dialog").each(function(){this!==b.uiDialog[0]&&(d=c(this).css("z-index"),isNaN(d)||(k=Math.max(k,d)))}),
c.ui.dialog.maxZ=k),b},isOpen:function(){return this._isOpen},moveToTop:function(a,b){var k=this.options;if(k.modal&&!a||!k.stack&&!k.modal)return this._trigger("focus",b);k.zIndex>c.ui.dialog.maxZ&&(c.ui.dialog.maxZ=k.zIndex);this.overlay&&(c.ui.dialog.maxZ+=1,this.overlay.$el.css("z-index",c.ui.dialog.overlay.maxZ=c.ui.dialog.maxZ));k={scrollTop:this.element.attr("scrollTop"),scrollLeft:this.element.attr("scrollLeft")};c.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",c.ui.dialog.maxZ);this.element.attr(k);
this._trigger("focus",b);return this},open:function(){if(!this._isOpen){var a=this.options,b=this.uiDialog;this.overlay=a.modal?new c.ui.dialog.overlay(this):null;this._size();this._position(a.position);b.show(a.show);this.moveToTop(!0);a.modal&&b.bind("keypress.b4g-ui-dialog",function(a){if(a.keyCode===c.ui.keyCode.TAB){var b=c(":tabbable",this),d=b.filter(":first"),b=b.filter(":last");if(a.target===b[0]&&!a.shiftKey)return d.focus(1),!1;if(a.target===d[0]&&a.shiftKey)return b.focus(1),!1}});c(this.element.find(":tabbable").get().concat(b.find(".b4g-ui-dialog-buttonpane :tabbable").get().concat(b.get()))).eq(0).focus();
this._isOpen=!0;this._trigger("open");return this}},_createButtons:function(a){var b=this,k=!1,d=c("<div></div>").addClass("b4g-ui-dialog-buttonpane b4g-ui-widget-content b4g-ui-helper-clearfix"),e=c("<div></div>").addClass("b4g-ui-dialog-buttonset").appendTo(d);b.uiDialog.find(".b4g-ui-dialog-buttonpane").remove();"object"===typeof a&&null!==a&&c.each(a,function(){return!(k=!0)});k&&(c.each(a,function(a,k){k=c.isFunction(k)?{click:k,text:a}:k;var d=c('<button type="button"></button>').click(function(){k.click.apply(b.element[0],
arguments)}).appendTo(e);c.each(k,function(a,c){if("click"!==a)if(a in g)d[a](c);else d.attr(a,c)});c.fn.button&&d.button()}),d.appendTo(b.uiDialog))},_makeDraggable:function(){function a(c){return{position:c.position,offset:c.offset}}var b=this,k=b.options,d=c(document),e;b.uiDialog.draggable({cancel:".b4g-ui-dialog-content, .b4g-ui-dialog-titlebar-close",handle:".b4g-ui-dialog-titlebar",containment:"document",start:function(d,C){e="auto"===k.height?"auto":c(this).height();c(this).height(c(this).height()).addClass("b4g-ui-dialog-dragging");
b._trigger("dragStart",d,a(C))},drag:function(c,k){b._trigger("drag",c,a(k))},stop:function(f,g){k.position=[g.position.left-d.scrollLeft(),g.position.top-d.scrollTop()];c(this).removeClass("b4g-ui-dialog-dragging").height(e);b._trigger("dragStop",f,a(g));c.ui.dialog.overlay.resize()}})},_makeResizable:function(b){function e(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}b=b===a?this.options.resizable:b;var k=this,C=k.options,p=k.uiDialog.css("position");
b="string"===typeof b?b:"n,e,s,w,se,sw,ne,nw";k.uiDialog.resizable({cancel:".b4g-ui-dialog-content",containment:"document",alsoResize:k.element,maxWidth:C.maxWidth,maxHeight:C.maxHeight,minWidth:C.minWidth,minHeight:k._minHeight(),handles:b,start:function(a,b){c(this).addClass("b4g-ui-dialog-resizing");k._trigger("resizeStart",a,e(b))},resize:function(a,c){k._trigger("resize",a,e(c))},stop:function(a,b){c(this).removeClass("b4g-ui-dialog-resizing");C.height=c(this).height();C.width=c(this).width();
k._trigger("resizeStop",a,e(b));c.ui.dialog.overlay.resize()}}).css("position",p).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(a){var b=[],k=[0,0],d;if(a){if("string"===typeof a||"object"===typeof a&&"0"in a)b=a.split?a.split(" "):[a[0],a[1]],1===b.length&&(b[1]=b[0]),c.each(["left","top"],function(a,c){+b[a]===b[a]&&(k[a]=b[a],b[a]=c)}),a={my:b.join(" "),
at:b.join(" "),offset:k.join(" ")};a=c.extend({},c.ui.dialog.prototype.options.position,a)}else a=c.ui.dialog.prototype.options.position;(d=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(c.extend({of:window},a));d||this.uiDialog.hide()},_setOptions:function(a){var d=this,k={},C=!1;c.each(a,function(a,c){d._setOption(a,c);a in b&&(C=!0);a in f&&(k[a]=c)});C&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",k)},_setOption:function(a,
b){var k=this.uiDialog;switch(a){case "beforeclose":a="beforeClose";break;case "buttons":this._createButtons(b);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+b);break;case "dialogClass":k.removeClass(this.options.dialogClass).addClass("b4g-ui-dialog b4g-ui-widget b4g-ui-widget-content b4g-ui-corner-all "+b);break;case "disabled":b?k.addClass("b4g-ui-dialog-disabled"):k.removeClass("b4g-ui-dialog-disabled");break;case "draggable":var d=k.is(":data(draggable)");d&&!b&&k.draggable("destroy");
!d&&b&&this._makeDraggable();break;case "position":this._position(b);break;case "resizable":(d=k.is(":data(resizable)"))&&!b&&k.resizable("destroy");d&&"string"===typeof b&&k.resizable("option","handles",b);d||!1===b||this._makeResizable(b);break;case "title":c(".b4g-ui-dialog-title",this.uiDialogTitlebar).html(""+(b||"&#160;"))}c.Widget.prototype._setOption.apply(this,arguments)},_size:function(){var a=this.options,b,k,d=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,
height:0});a.minWidth>a.width&&(a.width=a.minWidth);b=this.uiDialog.css({height:"auto",width:a.width}).height();k=Math.max(0,a.minHeight-b);"auto"===a.height?c.support.minHeight?this.element.css({minHeight:k,height:"auto"}):(this.uiDialog.show(),a=this.element.css("height","auto").height(),d||this.uiDialog.hide(),this.element.height(Math.max(a,k))):this.element.height(Math.max(a.height-b,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});c.extend(c.ui.dialog,
{version:"1.8.13",uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");a||(a=this.uuid+=1);return"b4g-ui-dialog-title-"+a},overlay:function(a){this.$el=c.ui.dialog.overlay.create(a)}});c.extend(c.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:c.map("focus mousedown mouseup keydown keypress click".split(" "),function(a){return a+".dialog-overlay"}).join(" "),create:function(a){0===this.instances.length&&(setTimeout(function(){c.ui.dialog.overlay.instances.length&&c(document).bind(c.ui.dialog.overlay.events,
function(a){if(c(a.target).zIndex()<c.ui.dialog.overlay.maxZ)return!1})},1),c(document).bind("keydown.dialog-overlay",function(b){a.options.closeOnEscape&&b.keyCode&&b.keyCode===c.ui.keyCode.ESCAPE&&(a.close(b),b.preventDefault())}),c(window).bind("resize.dialog-overlay",c.ui.dialog.overlay.resize));var b=(this.oldInstances.pop()||c("<div></div>").addClass("b4g-ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});c.fn.bgiframe&&b.bgiframe();this.instances.push(b);
return b},destroy:function(a){var b=c.inArray(a,this.instances);-1!=b&&this.oldInstances.push(this.instances.splice(b,1)[0]);0===this.instances.length&&c([document,window]).unbind(".dialog-overlay");a.remove();var k=0;c.each(this.instances,function(){k=Math.max(k,this.css("z-index"))});this.maxZ=k},height:function(){var a,b;return c.browser.msie&&7>c.browser.version?(a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),b=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),
a<b?c(window).height()+"px":a+"px"):c(document).height()+"px"},width:function(){var a,b;return c.browser.msie&&7>c.browser.version?(a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),b=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),a<b?c(window).width()+"px":a+"px"):c(document).width()+"px"},resize:function(){var a=c([]);c.each(c.ui.dialog.overlay.instances,function(){a=a.add(this)});a.css({width:0,height:0}).css({width:c.ui.dialog.overlay.width(),
height:c.ui.dialog.overlay.height()})}});c.extend(c.ui.dialog.overlay.prototype,{destroy:function(){c.ui.dialog.overlay.destroy(this.$el)}})})(ia);(function(c,d){function e(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="b4g-ui-datepicker-div";this._inlineClass="b4g-ui-datepicker-inline";this._appendClass="b4g-ui-datepicker-append";this._triggerClass="b4g-ui-datepicker-trigger";this._dialogClass="b4g-ui-datepicker-dialog";
this._disableClass="b4g-ui-datepicker-disabled";this._unselectableClass="b4g-ui-datepicker-unselectable";this._currentClass="b4g-ui-datepicker-current-day";this._dayOverClass="b4g-ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,
yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1};c.extend(this._defaults,this.regional[""]);this.dpDiv=f(c('<div id="'+this._mainDivId+'" class="b4g-ui-datepicker b4g-ui-widget b4g-ui-widget-content b4g-ui-helper-clearfix b4g-ui-corner-all"></div>'))}
function f(a){return a.delegate("button, .b4g-ui-datepicker-prev, .b4g-ui-datepicker-next, .b4g-ui-datepicker-calendar td a","mouseout",function(){c(this).removeClass("ui-state-hover");-1!=this.className.indexOf("b4g-ui-datepicker-prev")&&c(this).removeClass("b4g-ui-datepicker-prev-hover");-1!=this.className.indexOf("b4g-ui-datepicker-next")&&c(this).removeClass("b4g-ui-datepicker-next-hover")}).delegate("button, .b4g-ui-datepicker-prev, .b4g-ui-datepicker-next, .b4g-ui-datepicker-calendar td a",
"mouseover",function(){c.datepicker._isDisabledDatepicker(m.inline?a.parent()[0]:m.input[0])||(c(this).parents(".b4g-ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),c(this).addClass("ui-state-hover"),-1!=this.className.indexOf("b4g-ui-datepicker-prev")&&c(this).addClass("b4g-ui-datepicker-prev-hover"),-1!=this.className.indexOf("b4g-ui-datepicker-next")&&c(this).addClass("b4g-ui-datepicker-next-hover"))})}function g(a,b){c.extend(a,b);for(var e in b)if(null==b[e]||b[e]==d)a[e]=b[e];
return a}c.extend(c.ui,{datepicker:{version:"1.8.13"}});var l=(new Date).getTime(),m;c.extend(e.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){g(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var d=null,e;for(e in this._defaults){var f=a.getAttribute("date:"+e);if(f){d=d||{};try{d[e]=eval(f)}catch(g){d[e]=f}}}e=a.nodeName.toLowerCase();f="div"==e||"span"==
e;a.id||(this.uuid+=1,a.id="dp"+this.uuid);var m=this._newInst(c(a),f);m.settings=c.extend({},b||{},d||{});"input"==e?this._connectDatepicker(a,m):f&&this._inlineDatepicker(a,m)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?f(c('<div class="'+this._inlineClass+' b4g-ui-datepicker b4g-ui-widget b4g-ui-widget-content b4g-ui-helper-clearfix b4g-ui-corner-all"></div>')):this.dpDiv}},
_connectDatepicker:function(a,b){var d=c(a);b.append=c([]);b.trigger=c([]);d.hasClass(this.markerClassName)||(this._attachments(d,b),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,k){b.settings[c]=k}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),c.data(a,"datepicker",b))},_attachments:function(a,b){var d=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove();
d&&(b.append=c('<span class="'+this._appendClass+'">'+d+"</span>"),a[e?"before":"after"](b.append));a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();d=this._get(b,"showOn");"focus"!=d&&"both"!=d||a.focus(this._showDatepicker);if("button"==d||"both"==d){var d=this._get(b,"buttonText"),f=this._get(b,"buttonImage");b.trigger=c(this._get(b,"buttonImageOnly")?c("<img/>").addClass(this._triggerClass).attr({src:f,alt:d,title:d}):c('<button type="button"></button>').addClass(this._triggerClass).html(""==
f?d:c("<img/>").attr({src:f,alt:d,title:d})));a[e?"before":"after"](b.trigger);b.trigger.click(function(){c.datepicker._datepickerShowing&&c.datepicker._lastInput==a[0]?c.datepicker._hideDatepicker():c.datepicker._showDatepicker(a[0]);return!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var c=new Date(2009,11,20),b=this._get(a,"dateFormat");if(b.match(/[DM]/)){var d=function(a){for(var c=0,b=0,k=0;k<a.length;k++)a[k].length>c&&(c=a[k].length,b=k);return b};c.setMonth(d(this._get(a,
b.match(/MM/)?"monthNames":"monthNamesShort")));c.setDate(d(this._get(a,b.match(/DD/)?"dayNames":"dayNamesShort"))+20-c.getDay())}a.input.attr("size",this._formatDate(a,c).length)}},_inlineDatepicker:function(a,b){var d=c(a);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,k){b.settings[c]=k}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),c.data(a,"datepicker",b),this._setDate(b,this._getDefaultDate(b),!0),
this._updateDatepicker(b),this._updateAlternate(b),b.dpDiv.show())},_dialogDatepicker:function(a,b,d,e,f){a=this._dialogInst;a||(this.uuid+=1,this._dialogInput=c('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),c("body").append(this._dialogInput),a=this._dialogInst=this._newInst(this._dialogInput,!1),a.settings={},c.data(this._dialogInput[0],"datepicker",a));g(a.settings,e||{});b=b&&b.constructor==
Date?this._formatDate(a,b):b;this._dialogInput.val(b);this._pos=f?f.length?f:[f.pageX,f.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=d;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);
c.blockUI&&c.blockUI(this.dpDiv);c.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=c(a),d=c.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();c.removeData(a,"datepicker");"input"==e?(d.append.remove(),d.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=e&&"span"!=e||b.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(a){var b=c(a),d=c.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if("input"==e)a.disabled=!1,d.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==e||"span"==e)b=b.children("."+this._inlineClass),b.children().removeClass("ui-state-disabled"),b.find("select.b4g-ui-datepicker-month, select.b4g-ui-datepicker-year").removeAttr("disabled");this._disabledInputs=
c.map(this._disabledInputs,function(c){return c==a?null:c})}},_disableDatepicker:function(a){var b=c(a),d=c.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if("input"==e)a.disabled=!0,d.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==e||"span"==e)b=b.children("."+this._inlineClass),b.children().addClass("ui-state-disabled"),b.find("select.b4g-ui-datepicker-month, select.b4g-ui-datepicker-year").attr("disabled",
"disabled");this._disabledInputs=c.map(this._disabledInputs,function(c){return c==a?null:c});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var c=0;c<this._disabledInputs.length;c++)if(this._disabledInputs[c]==a)return!0;return!1},_getInst:function(a){try{return c.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(a,b,e){var f=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==
b?c.extend({},c.datepicker._defaults):f?"all"==b?c.extend({},f.settings):this._get(f,b):null;var m=b||{};"string"==typeof b&&(m={},m[b]=e);if(f){this._curInst==f&&this._hideDatepicker();var l=this._getDateDatepicker(a,!0),L=this._getMinMaxDate(f,"min"),h=this._getMinMaxDate(f,"max");g(f.settings,m);null!==L&&m.dateFormat!==d&&m.minDate===d&&(f.settings.minDate=this._formatDate(f,L));null!==h&&m.dateFormat!==d&&m.maxDate===d&&(f.settings.maxDate=this._formatDate(f,h));this._attachments(c(a),f);this._autoSize(f);
this._setDate(f,l);this._updateAlternate(f);this._updateDatepicker(f)}},_changeDatepicker:function(a,c,b){this._optionDatepicker(a,c,b)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,c){var b=this._getInst(a);b&&(this._setDate(b,c),this._updateDatepicker(b),this._updateAlternate(b))},_getDateDatepicker:function(a,c){var b=this._getInst(a);b&&!b.inline&&this._setDateFromField(b,c);return b?this._getDate(b):null},_doKeyDown:function(a){var b=
c.datepicker._getInst(a.target),d=!0,e=b.dpDiv.is(".b4g-ui-datepicker-rtl");b._keyEvent=!0;if(c.datepicker._datepickerShowing)switch(a.keyCode){case 9:c.datepicker._hideDatepicker();d=!1;break;case 13:return d=c("td."+c.datepicker._dayOverClass+":not(."+c.datepicker._currentClass+")",b.dpDiv),d[0]?c.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,d[0]):c.datepicker._hideDatepicker(),!1;case 27:c.datepicker._hideDatepicker();break;case 33:c.datepicker._adjustDate(a.target,a.ctrlKey?-c.datepicker._get(b,
"stepBigMonths"):-c.datepicker._get(b,"stepMonths"),"M");break;case 34:c.datepicker._adjustDate(a.target,a.ctrlKey?+c.datepicker._get(b,"stepBigMonths"):+c.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&c.datepicker._clearDate(a.target);d=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&c.datepicker._gotoToday(a.target);d=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&c.datepicker._adjustDate(a.target,e?1:-1,"D");d=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&
c.datepicker._adjustDate(a.target,a.ctrlKey?-c.datepicker._get(b,"stepBigMonths"):-c.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&c.datepicker._adjustDate(a.target,-7,"D");d=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&c.datepicker._adjustDate(a.target,e?-1:1,"D");d=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&c.datepicker._adjustDate(a.target,a.ctrlKey?+c.datepicker._get(b,"stepBigMonths"):+c.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||
a.metaKey)&&c.datepicker._adjustDate(a.target,7,"D");d=a.ctrlKey||a.metaKey;break;default:d=!1}else 36==a.keyCode&&a.ctrlKey?c.datepicker._showDatepicker(this):d=!1;d&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=c.datepicker._getInst(a.target);if(c.datepicker._get(b,"constrainInput")){var b=c.datepicker._possibleChars(c.datepicker._get(b,"dateFormat")),e=String.fromCharCode(a.charCode==d?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">e||!b||-1<b.indexOf(e)}},_doKeyUp:function(a){a=
c.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal)try{c.datepicker.parseDate(c.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,c.datepicker._getFormatConfig(a))&&(c.datepicker._setDateFromField(a),c.datepicker._updateAlternate(a),c.datepicker._updateDatepicker(a))}catch(b){c.datepicker.log(b)}return!0},_showDatepicker:function(a){a=a.target||a;"input"!=a.nodeName.toLowerCase()&&(a=c("input",a.parentNode)[0]);if(!c.datepicker._isDisabledDatepicker(a)&&c.datepicker._lastInput!=
a){var b=c.datepicker._getInst(a);c.datepicker._curInst&&c.datepicker._curInst!=b&&c.datepicker._curInst.dpDiv.stop(!0,!0);var d=c.datepicker._get(b,"beforeShow");g(b.settings,d?d.apply(a,[a,b]):{});b.lastVal=null;c.datepicker._lastInput=a;c.datepicker._setDateFromField(b);c.datepicker._inDialog&&(a.value="");c.datepicker._pos||(c.datepicker._pos=c.datepicker._findPos(a),c.datepicker._pos[1]+=a.offsetHeight);var e=!1;c(a).parents().each(function(){e|="fixed"==c(this).css("position");return!e});e&&
c.browser.opera&&(c.datepicker._pos[0]-=document.documentElement.scrollLeft,c.datepicker._pos[1]-=document.documentElement.scrollTop);d={left:c.datepicker._pos[0],top:c.datepicker._pos[1]};c.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});c.datepicker._updateDatepicker(b);d=c.datepicker._checkOffset(b,d,e);b.dpDiv.css({position:c.datepicker._inDialog&&c.blockUI?"static":e?"fixed":"absolute",display:"none",left:d.left+"px",top:d.top+"px"});if(!b.inline){var d=
c.datepicker._get(b,"showAnim"),f=c.datepicker._get(b,"duration"),m=function(){var a=b.dpDiv.find("iframe.b4g-ui-datepicker-cover");if(a.length){var d=c.datepicker._getBorders(b.dpDiv);a.css({left:-d[0],top:-d[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(c(a).zIndex()+1);c.datepicker._datepickerShowing=!0;if(c.effects&&c.effects[d])b.dpDiv.show(d,c.datepicker._get(b,"showOptions"),f,m);else b.dpDiv[d||"show"](d?f:null,m);d&&f||m();b.input.is(":visible")&&!b.input.is(":disabled")&&
b.input.focus();c.datepicker._curInst=b}}},_updateDatepicker:function(a){var b=c.datepicker._getBorders(a.dpDiv);m=a;a.dpDiv.empty().append(this._generateHTML(a));var d=a.dpDiv.find("iframe.b4g-ui-datepicker-cover");d.length&&d.css({left:-b[0],top:-b[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()});a.dpDiv.find("."+this._dayOverClass+" a").mouseover();b=this._getNumberOfMonths(a);d=b[1];a.dpDiv.removeClass("b4g-ui-datepicker-multi-2 b4g-ui-datepicker-multi-3 b4g-ui-datepicker-multi-4").width("");
1<d&&a.dpDiv.addClass("b4g-ui-datepicker-multi-"+d).css("width",17*d+"em");a.dpDiv[(1!=b[0]||1!=b[1]?"add":"remove")+"Class"]("b4g-ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("b4g-ui-datepicker-rtl");a==c.datepicker._curInst&&c.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var e=a.yearshtml;setTimeout(function(){e===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.b4g-ui-datepicker-year:first").replaceWith(a.yearshtml);
e=a.yearshtml=null},0)}c(".ui-icon").css("background-image","url(https://b4g.baydin.com/site_media/bookmarklet/ui-icons.png)")},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,d){var e=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),g=a.input?a.input.outerWidth():0,m=a.input?a.input.outerHeight():0,l=document.documentElement.clientWidth+c(document).scrollLeft(),
h=document.documentElement.clientHeight+c(document).scrollTop();b.left-=this._get(a,"isRTL")?e-g:0;b.left-=d&&b.left==a.input.offset().left?c(document).scrollLeft():0;b.top-=d&&b.top==a.input.offset().top+m?c(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>l&&l>e?Math.abs(b.left+e-l):0);b.top-=Math.min(b.top,b.top+f>h&&h>f?Math.abs(f+m):0);return b},_findPos:function(a){for(var b=this._getInst(a),b=this._get(b,"isRTL");a&&("hidden"==a.type||1!=a.nodeType||c.expr.filters.hidden(a));)a=a[b?
"previousSibling":"nextSibling"];a=c(a).offset();return[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&(!a||b==c.data(a,"datepicker"))&&this._datepickerShowing){a=this._get(b,"showAnim");var d=this._get(b,"duration"),e=function(){c.datepicker._tidyDialog(b);this._curInst=null};if(c.effects&&c.effects[a])b.dpDiv.hide(a,c.datepicker._get(b,"showOptions"),d,e);else b.dpDiv["slideDown"==a?"slideUp":"fadeIn"==a?"fadeOut":"hide"](a?d:null,e);a||e();(a=this._get(b,"onClose"))&&a.apply(b.input?
b.input[0]:null,[b.input?b.input.val():"",b]);this._datepickerShowing=!1;this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),c.blockUI&&(c.unblockUI(),c("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".b4g-ui-datepicker-calendar")},_checkExternalClick:function(a){c.datepicker._curInst&&(a=c(a.target),a[0].id==c.datepicker._mainDivId||0!=a.parents("#"+c.datepicker._mainDivId).length||
a.hasClass(c.datepicker.markerClassName)||a.hasClass(c.datepicker._triggerClass)||!c.datepicker._datepickerShowing||c.datepicker._inDialog&&c.blockUI||c.datepicker._hideDatepicker())},_adjustDate:function(d,e,f){var g=a(),g=c(d,g),m;try{m=this._getInst(g[0])}catch(l){g=c(d),m=this._getInst(g[0])}this._isDisabledDatepicker(g[0])||(this._adjustInstDate(m,e+("M"==f?this._get(m,"showCurrentAtPos"):0),f),this._updateDatepicker(m))},_gotoToday:function(d){var e=a(),e=c(d,e),f;try{f=this._getInst(e[0])}catch(g){e=
c(d),f=this._getInst(e[0])}this._get(f,"gotoCurrent")&&f.currentDay?(f.selectedDay=f.currentDay,f.drawMonth=f.selectedMonth=f.currentMonth,f.drawYear=f.selectedYear=f.currentYear):(d=new Date,f.selectedDay=d.getDate(),f.drawMonth=f.selectedMonth=d.getMonth(),f.drawYear=f.selectedYear=d.getFullYear());this._notifyChange(f);this._adjustDate(e)},_selectMonthYear:function(d,e,f){var g=a(),g=c(d,g),m;try{m=this._getInst(g[0])}catch(l){g=c(d),m=this._getInst(g[0])}m._selectingMonthYear=!1;m["selected"+
("M"==f?"Month":"Year")]=m["draw"+("M"==f?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10);this._notifyChange(m);this._adjustDate(g)},_clickMonthYear:function(d){var e=a(),e=c(d,e),f;try{f=this._getInst(e[0])}catch(g){e=c(d),f=this._getInst(e[0])}f.input&&f._selectingMonthYear&&setTimeout(function(){f.input.focus()},0);f._selectingMonthYear=!f._selectingMonthYear},_selectDay:function(d,e,f,g){var m=a(),m=c(d,m);if(!c(g).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(m[0])){var l;
try{l=this._getInst(m[0])}catch(L){m=c(d),l=this._getInst(m[0])}l.selectedDay=l.currentDay=c("a",g).html();l.selectedMonth=l.currentMonth=e;l.selectedYear=l.currentYear=f;this._selectDate(d,this._formatDate(l,l.currentDay,l.currentMonth,l.currentYear))}},_clearDate:function(d){var e=a(),e=c(d,e);try{this._getInst(e[0])}catch(f){e=c(d),this._getInst(e[0])}this._selectDate(e,"")},_selectDate:function(d,e){var f=a(),f=c(d,f),g;try{g=this._getInst(f[0])}catch(m){f=c(d),g=this._getInst(f[0])}e=null!=e?
e:this._formatDate(g);g.input&&g.input.val(e);this._updateAlternate(g);(f=this._get(g,"onSelect"))?f.apply(g.input?g.input[0]:null,[e,g]):g.input&&g.input.trigger("change");g.inline?this._updateDatepicker(g):(this._hideDatepicker(),this._lastInput=g.input[0],"object"!=typeof g.input[0]&&g.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var d=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(d,e,this._getFormatConfig(a));
c(b).each(function(){c(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(a,b,d){if(null==a||null==b)throw"Invalid arguments";b="object"==typeof b?b.toString():b+"";if(""==b)return null;for(var e=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,e="string"!=typeof e?e:
(new Date).getFullYear()%100+parseInt(e,10),f=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,g=(d?d.dayNames:null)||this._defaults.dayNames,m=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,l=(d?d.monthNames:null)||this._defaults.monthNames,h=d=-1,n=-1,F=-1,r=!1,q=function(b){(b=x+1<a.length&&a.charAt(x+1)==b)&&x++;return b},w=function(a){var c=q(a);a=new RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2)+"}");a=b.substring(u).match(a);if(!a)throw"Missing number at position "+
u;u+=a[0].length;return parseInt(a[0],10)},t=function(a,d,e){a=c.map(q(a)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});var k=-1;c.each(a,function(a,c){var d=c[1];if(b.substr(u,d.length).toLowerCase()==d.toLowerCase())return k=c[0],u+=d.length,!1});if(-1!=k)return k+1;throw"Unknown name at position "+u;},z=function(){if(b.charAt(u)!=a.charAt(x))throw"Unexpected literal at position "+u;u++},u=0,x=0;x<a.length;x++)if(r)"'"!=a.charAt(x)||q("'")?z():r=!1;else switch(a.charAt(x)){case "d":n=
w("d");break;case "D":t("D",f,g);break;case "o":F=w("o");break;case "m":h=w("m");break;case "M":h=t("M",m,l);break;case "y":d=w("y");break;case "@":var B=new Date(w("@"));d=B.getFullYear();h=B.getMonth()+1;n=B.getDate();break;case "!":B=new Date((w("!")-this._ticksTo1970)/1E4);d=B.getFullYear();h=B.getMonth()+1;n=B.getDate();break;case "'":q("'")?z():r=!0;break;default:z()}-1==d?d=(new Date).getFullYear():100>d&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=e?0:-100));if(-1<F){h=1;
n=F;do{e=this._getDaysInMonth(d,h-1);if(n<=e)break;h++;n-=e}while(1)}B=this._daylightSavingAdjust(new Date(d,h-1,n));if(B.getFullYear()!=d||B.getMonth()+1!=h||B.getDate()!=n)throw"Invalid date";return B},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,
b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var g=function(b){(b=r+1<a.length&&a.charAt(r+1)==b)&&r++;return b},m=function(a,b,c){b=""+b;if(g(a))for(;b.length<c;)b="0"+b;return b},l=function(a,b,c,d){return g(a)?d[b]:c[b]},h="",n=!1;if(b)for(var r=0;r<a.length;r++)if(n)"'"!=a.charAt(r)||g("'")?h+=a.charAt(r):
n=!1;else switch(a.charAt(r)){case "d":h+=m("d",b.getDate(),2);break;case "D":h+=l("D",b.getDay(),d,e);break;case "o":h+=m("o",(b.getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864E5,3);break;case "m":h+=m("m",b.getMonth()+1,2);break;case "M":h+=l("M",b.getMonth(),f,c);break;case "y":h+=g("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":h+=b.getTime();break;case "!":h+=1E4*b.getTime()+this._ticksTo1970;break;case "'":g("'")?h+="'":n=!0;break;default:h+=a.charAt(r)}return h},
_possibleChars:function(a){for(var b="",c=!1,d=function(b){(b=e+1<a.length&&a.charAt(e+1)==b)&&e++;return b},e=0;e<a.length;e++)if(c)"'"!=a.charAt(e)||d("'")?b+=a.charAt(e):c=!1;else switch(a.charAt(e)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==d?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=
this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(m){this.log(m),d=b?"":d}a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();a.currentDay=d?e.getDate():0;a.currentMonth=d?e.getMonth():0;a.currentYear=d?e.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,
"defaultDate"),new Date))},_determineDate:function(a,b,d){var e=function(a){var b=new Date;b.setDate(b.getDate()+a);return b},f=function(b){try{return c.datepicker.parseDate(c.datepicker._get(a,"dateFormat"),b,c.datepicker._getFormatConfig(a))}catch(d){}for(var e=(b.toLowerCase().match(/^c/)?c.datepicker._getDate(a):null)||new Date,f=e.getFullYear(),g=e.getMonth(),e=e.getDate(),m=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=m.exec(b);l;){switch(l[2]||"d"){case "d":case "D":e+=parseInt(l[1],10);break;case "w":case "W":e+=
7*parseInt(l[1],10);break;case "m":case "M":g+=parseInt(l[1],10);e=Math.min(e,c.datepicker._getDaysInMonth(f,g));break;case "y":case "Y":f+=parseInt(l[1],10),e=Math.min(e,c.datepicker._getDaysInMonth(f,g))}l=m.exec(b)}return new Date(f,g,e)};if(b=(b=null==b||""===b?d:"string"==typeof b?f(b):"number"==typeof b?isNaN(b)?d:e(b):new Date(b.getTime()))&&"Invalid Date"==b.toString()?d:b)b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0);return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;
a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();e==a.selectedMonth&&f==a.selectedYear||c||this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||
a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_generateHTML:function(a){var b=new Date,b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate())),d=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),f=this._get(a,"hideIfNoPrevNext"),g=this._get(a,"navigationAsDateFormat"),m=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),n=this._get(a,"stepMonths"),r=1!=m[0]||1!=m[1],F=this._daylightSavingAdjust(a.currentDay?
new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),q=this._getMinMaxDate(a,"min"),w=this._getMinMaxDate(a,"max"),h=a.drawMonth-h,t=a.drawYear;0>h&&(h+=12,t--);if(w)for(var u=this._daylightSavingAdjust(new Date(w.getFullYear(),w.getMonth()-m[0]*m[1]+1,w.getDate())),u=q&&u<q?q:u;this._daylightSavingAdjust(new Date(t,h,1))>u;)h--,0>h&&(h=11,t--);a.drawMonth=h;a.drawYear=t;var u=this._get(a,"prevText"),u=g?this.formatDate(u,this._daylightSavingAdjust(new Date(t,h-n,1)),this._getFormatConfig(a)):
u,u=this._canAdjustMonth(a,-1,t,h)?'<a class="b4g-ui-datepicker-prev b4g-ui-corner-all" onclick="DP_jQuery_'+l+".datepicker._adjustDate('#"+a.id+"', -"+n+", 'M');\" title=\""+u+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"e":"w")+'">'+u+"</span></a>":f?"":'<a class="b4g-ui-datepicker-prev b4g-ui-corner-all ui-state-disabled" title="'+u+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"e":"w")+'">'+u+"</span></a>",z=this._get(a,"nextText"),z=g?this.formatDate(z,this._daylightSavingAdjust(new Date(t,
h+n,1)),this._getFormatConfig(a)):z,f=this._canAdjustMonth(a,1,t,h)?'<a class="b4g-ui-datepicker-next b4g-ui-corner-all" onclick="DP_jQuery_'+l+".datepicker._adjustDate('#"+a.id+"', +"+n+", 'M');\" title=\""+z+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"w":"e")+'">'+z+"</span></a>":f?"":'<a class="b4g-ui-datepicker-next b4g-ui-corner-all ui-state-disabled" title="'+z+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"w":"e")+'">'+z+"</span></a>",n=this._get(a,"currentText"),z=this._get(a,
"gotoCurrent")&&a.currentDay?F:b,n=g?this.formatDate(n,z,this._getFormatConfig(a)):n,g=a.inline?"":'<button type="button" class="b4g-ui-datepicker-close ui-state-default ui-priority-primary b4g-ui-corner-all" onclick="DP_jQuery_'+l+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",e=e?'<div class="b4g-ui-datepicker-buttonpane b4g-ui-widget-content">'+(d?g:"")+(this._isInRange(a,z)?'<button type="button" class="b4g-ui-datepicker-current ui-state-default ui-priority-secondary b4g-ui-corner-all" onclick="DP_jQuery_'+
l+".datepicker._gotoToday('#"+a.id+"');\">"+n+"</button>":"")+(d?"":g)+"</div>":"",g=parseInt(this._get(a,"firstDay"),10),g=isNaN(g)?0:g,n=this._get(a,"showWeek"),z=this._get(a,"dayNames");this._get(a,"dayNamesShort");var x=this._get(a,"dayNamesMin"),B=this._get(a,"monthNames"),G=this._get(a,"monthNamesShort"),A=this._get(a,"beforeShowDay"),R=this._get(a,"showOtherMonths"),M=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var aa=this._getDefaultDate(a),I="",E=0;E<m[0];E++){for(var ha=
"",J=0;J<m[1];J++){var y=this._daylightSavingAdjust(new Date(t,h,a.selectedDay)),H=" b4g-ui-corner-all",O="";if(r){O+='<div class="b4g-ui-datepicker-group';if(1<m[1])switch(J){case 0:O+=" b4g-ui-datepicker-group-first";H=" b4g-ui-corner-"+(d?"right":"left");break;case m[1]-1:O+=" b4g-ui-datepicker-group-last";H=" b4g-ui-corner-"+(d?"left":"right");break;default:O+=" b4g-ui-datepicker-group-middle",H=""}O+='">'}for(var O=O+('<div class="b4g-ui-datepicker-header b4g-ui-widget-header b4g-ui-helper-clearfix'+
H+'">'+(/all|left/.test(H)&&0==E?d?f:u:"")+(/all|right/.test(H)&&0==E?d?u:f:"")+this._generateMonthYearHeader(a,h,t,q,w,0<E||0<J,B,G)+'</div><table class="b4g-ui-datepicker-calendar"><thead><tr>'),sa=n?'<th class="b4g-ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"",H=0;7>H;H++)var K=(H+g)%7,sa=sa+("<th"+(5<=(H+g+6)%7?' class="b4g-ui-datepicker-week-end"':"")+'><span title="'+z[K]+'">'+x[K]+"</span></th>");O+=sa+"</tr></thead><tbody>";sa=this._getDaysInMonth(t,h);t==a.selectedYear&&
h==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,sa));for(var H=(this._getFirstDayOfMonth(t,h)-g+7)%7,sa=r?6:Math.ceil((H+sa)/7),K=this._daylightSavingAdjust(new Date(t,h,1-H)),Fb=0;Fb<sa;Fb++){for(var O=O+"<tr>",fb=n?'<td class="b4g-ui-datepicker-week-col">'+this._get(a,"calculateWeek")(K)+"</td>":"",H=0;7>H;H++){var ua=A?A.apply(a.input?a.input[0]:null,[K]):[!0,""],W=K.getMonth()!=h,gb=W&&!M||!ua[0]||q&&K<q||w&&K>w,fb=fb+('<td class="'+(5<=(H+g+6)%7?" b4g-ui-datepicker-week-end":"")+(W?
" b4g-ui-datepicker-other-month":"")+(K.getTime()==y.getTime()&&h==a.selectedMonth&&a._keyEvent||aa.getTime()==K.getTime()&&aa.getTime()==y.getTime()?" "+this._dayOverClass:"")+(gb?" "+this._unselectableClass+" ui-state-disabled":"")+(W&&!R?"":" "+ua[1]+(K.getTime()==F.getTime()?" "+this._currentClass:"")+(K.getTime()==b.getTime()?" b4g-ui-datepicker-today":""))+'"'+(W&&!R||!ua[2]?"":' title="'+ua[2]+'"')+(gb?"":' onclick="DP_jQuery_'+l+".datepicker._selectDay('#"+a.id+"',"+K.getMonth()+","+K.getFullYear()+
', this);return false;"')+">"+(W&&!R?"&#xa0;":gb?'<span class="ui-state-default">'+K.getDate()+"</span>":'<a class="ui-state-default'+(K.getTime()==b.getTime()?" ui-state-highlight":"")+(K.getTime()==F.getTime()?" ui-state-active":"")+(W?" ui-priority-secondary":"")+'" href="#">'+K.getDate()+"</a>")+"</td>");K.setDate(K.getDate()+1);K=this._daylightSavingAdjust(K)}O+=fb+"</tr>"}h++;11<h&&(h=0,t++);O+="</tbody></table>"+(r?"</div>"+(0<m[0]&&J==m[1]-1?'<div class="b4g-ui-datepicker-row-break"></div>':
""):"");ha+=O}I+=ha}I+=e+(c.browser.msie&&7>parseInt(c.browser.version,10)&&!a.inline?'<iframe src="javascript:false;" class="b4g-ui-datepicker-cover" frameborder="0"></iframe>':"");a._keyEvent=!1;return I},_generateMonthYearHeader:function(a,b,c,d,e,f,g,m){var h=this._get(a,"changeMonth"),n=this._get(a,"changeYear"),r=this._get(a,"showMonthAfterYear"),q='<div class="b4g-ui-datepicker-title">',t="";if(f||!h)t+='<span class="b4g-ui-datepicker-month">'+g[b]+"</span>";else{g=d&&d.getFullYear()==c;for(var w=
e&&e.getFullYear()==c,t=t+('<select class="b4g-ui-datepicker-month" onchange="DP_jQuery_'+l+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" onclick=\"DP_jQuery_"+l+".datepicker._clickMonthYear('#"+a.id+"');\">"),u=0;12>u;u++)(!g||u>=d.getMonth())&&(!w||u<=e.getMonth())&&(t+='<option value="'+u+'"'+(u==b?' selected="selected"':"")+">"+m[u]+"</option>");t+="</select>"}r||(q+=t+(!f&&h&&n?"":"&#xa0;"));if(!a.yearshtml)if(a.yearshtml="",f||!n)q+='<span class="b4g-ui-datepicker-year">'+c+"</span>";
else{m=this._get(a,"yearRange").split(":");var z=(new Date).getFullYear();g=function(a){a=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?z+parseInt(a,10):parseInt(a,10);return isNaN(a)?z:a};b=g(m[0]);m=Math.max(b,g(m[1]||""));b=d?Math.max(b,d.getFullYear()):b;m=e?Math.min(m,e.getFullYear()):m;for(a.yearshtml+='<select class="b4g-ui-datepicker-year" onchange="DP_jQuery_'+l+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+l+".datepicker._clickMonthYear('#"+
a.id+"');\">";b<=m;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";q+=a.yearshtml;a.yearshtml=null}q+=this._get(a,"yearSuffix");r&&(q+=(!f&&h&&n?"":"&#xa0;")+t);return q+"</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),e=a.drawMonth+("M"==c?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"==c?b:0);d=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,b)));a.selectedDay=d.getDate();a.drawMonth=
a.selectedMonth=d.getMonth();a.drawYear=a.selectedYear=d.getFullYear();"M"!=c&&"Y"!=c||this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),c=c&&b<c?c:b;return d&&c>d?d:c},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,
b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,
"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff"),b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=
a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});c.fn.datepicker=function(a){if(!this.length)return this;c.datepicker.initialized||(c(document).mousedown(c.datepicker._checkExternalClick).find("body").append(c.datepicker.dpDiv),c.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,
1);return"string"==typeof a&&("isDisabled"==a||"getDate"==a||"widget"==a)||"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?c.datepicker["_"+a+"Datepicker"].apply(c.datepicker,[this[0]].concat(b)):this.each(function(){"string"==typeof a?c.datepicker["_"+a+"Datepicker"].apply(c.datepicker,[this].concat(b)):c.datepicker._attachDatepicker(this,a)})};c.datepicker=new e;c.datepicker.initialized=!1;c.datepicker.uuid=(new Date).getTime();c.datepicker.version="1.8.13";window["DP_jQuery_"+l]=
c})(ia);(function(a){function b(d){for(var e=f(d),k=[],C=0,p,h=e.length;C<h;C++)for(p=0;p<h;p++)C!==p&&g(e[C],e[p])&&k.push(d[p]);return a.unique(k)}function e(a,b){for(var c=f(a),d=f(b),e=0,h,v=c.length,D=d.length;e<v;e++)for(h=0;h<D;h++)if(a[e]!==b[h]&&g(c[e],d[h]))return!0;return!1}function f(b){for(var d=[],e=0,f,g;g=b[e++];)f=a(g).offset(),d.push([f.top,f.left,g.offsetWidth,g.offsetHeight]);return d}function g(a,b){var c=a[1],d=a[0],e=a[2],f=a[3],g=b[1],h=b[0],n=b[2];return!(h+b[3]<d||d+f<h||
g+n<c||c+e<g)}a.fn.overlaps=function(f){return 0===arguments.length?this.pushStack(b(this)):e(this,a(f))};a.expr[":"].overlaps=function(a,b,c,d){return e([a],d)};a.expr[":"].overlapping=a.expr[":"].overlaps})(ia);(function(a){a.fn.replaceText=function(b,e,f){return this.each(function(){var g=this.firstChild,l,m,k=[];if(g){do 3===g.nodeType&&(l=g.nodeValue,m=l.replace(b,e),m!==l&&(!f&&/</.test(m)?(a(g).before(m),k.push(g)):g.nodeValue=m));while(g=g.nextSibling)}k.length&&a(k).remove()})}})(ia);Gb.watch_for_new_compose_containers();
ja.init();oa.init();la.b4g_troubleshoot&&aa(la.b4g_troubleshoot)}function aa(a){var c=I("b4g_extensions"),d="The Boomerang extension has been loaded successfully. ";if(c){for(var e="ocpljaamllnldhepankaeljmeeeghnid gbohoafagnlmidmhhpfdnmfpodhohaad fcinnggknmdfkilogcndkgpojpfojeem gakklmehjhhdfjjgnmpkjoemjmeomnli gkjnkapjmjfpipfcccnjbjcbgdnahpjp hpoidnelefpoofhdioielagfklahfcjg npjkmbechijncoapeeifgfhcjkcandgk cbmmejeeogjpfmdlcdkolobdlohjkmjn".split(" "),f="annoaihhfdegphdkkkbahheignkgigpd jpbnpbfpgjkblmejlgkfkekajajhjcid dlppikdhbkdinhpfbneekdbjhgphknad ijhapcklhkanndjbdnhichfmolhiaekg mflnemhkomgploogccdmcloekbloobgb nfddgbpdnaeliohhkbdbcmenpnkepkgn pnnfemgpilpdaojpnkjdgfgbnnjojfik gllmkcahdekdbapmdfnffclacbpnicaj kemincbhdgppphceahdgebffjcfgbigp".split(" "),
g=["mlomiejdfkolichcflejclcbmpeaniij","odjhifogjcknibkahlpidmdajjpkkcfn","dheionainndbbpoacpnopgmnihkcmnkl"],l=JSON.parse(c),c=[],m=0;m<l.length;m++){var k=l[m],C=k.id;(-1<e.indexOf(C)||-1<f.indexOf(C)||-1<g.indexOf(C))&&c.push(k)}if(0<c.length){d+="However, you should check the following extensions for possible conflicts:<h4>Extension Conflicts:</h4><ul>";for(e=0;e<c.length;e++)d+="<li>"+c[e].name+"</li>";d+="</ul>"}}var p=w(d+"<div id='b4g-inline-troubleshoot-holder'/>","Boomerang For Gmail",{Close:{text:"Close",
"class":"b4g-button green",click:function(){window.location="https://mail.google.com"}}});"inline-manage"===a&&setTimeout(function(){Mc(p)},0);localStorage.removeItem("b4g_extensions")}function q(){var a=document.getElementById("canvas_frame");if(!a)return document;a=a.contentWindow||a.contentDocument;a.document&&(a=a.document);return a}function R(){var a,c,d=window.location.hash.toString();if(!d){var e=window.location.toString();c=e.lastIndexOf("#");-1<c&&(d=e.substr(e.lastIndexOf("#")))}c=d.lastIndexOf("/");
-1<c&&(a=d.substr(c+1),a=/[0-9a-f]+(?=$|\?)/.exec(a));return a=a?a[0]:la.th||""}function ha(a){a=a||window.event;return a.target||a.srcElement}function da(b,c){c||(c=q());return a("*[name='"+b+"']",c).filter(":first")}function u(){if(Ra)return Ra;var b=Sa,c=a(".msg").html();if(c=b.exec(c))c=c[0];else for(var c="",d=document.title.split(" "),e=0;e<d.length;e++){var f=b.exec(d[e]);f&&(c=f[0])}return Ra=c}function P(b,c){c||(c=q());var d="";a("[name='"+b+"']",c).each(function(){d+=a(this).val()+" "});
return d?Ta(d):""}function Hb(){var a=/mail\.google\.com\/mail\/u\/(\d+)/.exec(String(document.location));return null==a?0:a[1]}function Ja(){return"true"===la.b4gEdit}function Nc(){for(var b=q(),c=b.getElementsByClassName("hP")[0].childNodes,d="",e=0;e<c.length;e++){var f=c[e].nodeValue;null!=f&&(d+=f)}b=a(Ib,b);return 1>b.length?"":d+" "+b.get(0).firstChild.textContent}function J(){var b;if(b=0<V.indexOf("ui=2")||0<V.indexOf("view=cm"))b=q(),b=0===a("[role='banner']:visible",b).length;return b}
function Da(a){return 0<a.closest(".nH.Hd[role='dialog']").length}function Jb(b,c){c||(c=q());return a("[role='button']",c).filter(function(){return a(this).text().trim()===b})}function Kb(b){b||(b=q());var c;(c=b)||(c=q());var d=a(".T-I.J-J5-Ji.Bq.nS.T-I-ax7.L3",c).first().text();d||(d=a(".T-I.J-J5-Ji.Bq.nS.T-I-KE.L3",c).first().text());d||(d=a(".T-I.J-J5-Ji.Bq.nS.T-I-ax7.L3",c).first().text());d||(d=a(".T-I.J-J5-Ji.aoO.L3.T-I-ax7",c).first().text());d||(d=a(".T-I.J-J5-Ji.aoO.T-I-atl.L3",c).first().text());
d||(d="Send");c=d;var d=b,e=a(".T-I.J-J5-Ji.Uo.T-I-atl.L3",d).first().text();e||(e=a(".T-I.J-J5-Ji.Bq.undefined.T-I-ax7.L3",d).first().text());d=e=e?e.replace("&amp;","&"):"Send & Archive";return Jb(c,b).add(Jb(d,b))}function Oc(){return a(Pc,r).map(function(){return a(this).attr("email")}).toArray()}function Qc(){return a(Rc,r).map(function(){var b=a(this).attr("alt").replace(" at","");return null==Date.parse(b)?null:Date.parse(b).valueOf()}).toArray()}function Ua(){var b=a(".aic").find("[role='button']");
return 0==b.length?!0:0<=b.text().toLowerCase().indexOf("compose")?!0:!1}function Lb(){var b=q();return 0<a(".aph",b).filter(":visible").length}function Mb(){var b=q();return 0<a(".apj",b).filter(":visible").length}function Ea(b,c){var d,e=a(b);d=e.closest(".nH.Hd[role='dialog']");if(0<d.length)return d;d=e.closest(".aoI");if(0<d.length)return d;d=e.closest(".ip.adB");if(0<d.length)return d;d=e.find(".aoI");if(0<d.length)return d;if(void 0!==c)return c;n(["dev","get_compose_container failed"]);return document}
function ma(b){b=a(".Am.Al:not(:has(iframe)), .LW-avf, .Am.Al > iframe",b);if(!b[0])return null;b[0].contentDocument&&(b=a(b[0].contentDocument.body));return b}function Sc(b){function c(){var c=e.text().trim().toLowerCase();if("plain text"===c||"rich text"===c){var c="plain text"===c,g=!c&&c!==d.data("is-plain-text");d.data("is-plain-text",c);var l=a(".b4g-tracking-toggle",b);g&&l.trigger("b4g-toggle-state",!!d.data("had-tracking-enabled"));c&&l.data("is-selected")&&(w("Click tracking and read receipts do not work with plain text emails."),
d.data("had-tracking-enabled",l.data("is-selected")),l.trigger("b4g-toggle-state",!1))}}var d=ma(b),e=a(".aWQ",b);0<e.length&&((new ka(c)).observe(e[0],{childList:!0,characterData:!0,subtree:!0}),c([]))}function Nb(b){var c=a(".aDj",b);c||(c=a(".aDh",b));return c}function w(b,c,d,e,f){var g={Ok:{text:"OK","class":"b4g-button dialog-gray",click:function(){a(this).dialog("destroy")}}};d="undefined"===typeof d?g:d;c="undefined"===typeof c?"&nbsp &nbsp Boomerang for Gmail":c;f="undefined"===typeof f?
"dialogdiv":f;var l;"Old Safari"===t?alert(b):(g=q(),a("."+f).remove(),l=a("<div class='"+f+"' style='display:none;'>"+b+"</div>"),a("body",g).append(l),a("."+f,g).dialog(a.extend({title:c,modal:!0,closeOnEscape:!0,buttons:d},e||{})),va());n(["Show dialog",b]);return l}function Tc(b,c){if("Old Safari"===t)alert(b);else{var d=q();a(".dialogdiv").remove();var e="<div class='dialogdiv' style='display:none;'>"+b+"</div>";a("body",d).append(a(e));a(".dialogdiv",d).dialog({title:" &nbsp &nbsp   "+c,modal:!0,
closeOnEscape:!0,width:450,buttons:{Ok:{text:"Ok","class":"b4g-button dialog-gray",click:function(){a(this).dialog("destroy")}}}});va()}}function Uc(){var b=q();a(".nH .hh",b).filter(function(){if("Boomerang for Gmail"===a(".cZ",this).text())return!0}).hide()}function va(b){b=b||".dialogdiv a";var c=q();"Chrome"!==t&&"Opera"!==t||a(b,c).click(function(){var b=a(this).attr("href");-1===b.indexOf("javascript")&&window.open(b,"_blank")})}function Ob(){a(".UD",r).first().css("visibility","");a(".UB",
r).first().css("visibility","");a(".vh",r).first().html("").css("visibility","").closest(".b8.UC").css("top",-1E4)}function Va(b,c){a(".vh",r).first().html(b);a(".UD",r).first().css("visibility","visible");a(".UB",r).first().css("visibility","visible");a(".vh",r).first().css("visibility","visible").closest(".b8.UC").css("top",0);setTimeout(Ob,c)}function hb(){try{var b=a(".dialog-content");b.css("text-align","left");"Chrome"===t?b.html("If you did not see an authentication window, please allow pop-ups for mail.google.com. <ol><li>Click this icon in the upper right corner of your browser window: <img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/popupblockericon.jpg' style='padding-top:5px;padding-bottom:5px;'/> </li><li>Select <strong>\"Always allow popups from mail.google.com\"</strong>.</li><li><a href='javascript: window.location.reload()'>Refresh</a> the page, and try again.</li></ol>"):
"Opera"===t&&b.html("If you did not see an authentication window, please allow pop-ups for mail.google.com. <ol><li>Click this icon in the upper right corner of your browser window: <img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/operapopupblockericon.png' style='padding-top:5px;padding-bottom:5px;'/> </li><li>Select <strong>\"Always allow popups from mail.google.com\"</strong>.</li><li><a href='javascript: window.location.reload()'>Refresh</a> the page, and try again.</li></ol>");
a("#blue-arrow").css("visibility","visible")}catch(c){}}function Ka(){var b=q();a("[role='button']",b).filter(function(){return"20"===a(this).attr("act")}).each(pa)}function pa(a){a=r.createEvent("MouseEvents");a.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);this.dispatchEvent(a);a=r.createEvent("MouseEvents");a.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);this.dispatchEvent(a)}function ib(){r=q();var b=a(".iH .J-Zh-I-KE",r);0===b.length&&(b=a("[role='button']:visible",
r));b.filter(function(){return"7"===a(this).attr("act")}).each(pa)}function Pb(){r=q();var b=a("[role='button']",r),b=b.filter(function(){return"19"===a(this).attr("act")}).first(),c=a('div[act="19"]',r).attr("aria-label");1>b.length&&(b=a(".iH .VP5otc-tOAp0c",r),b=b.filter(function(){return-1!==a(this).text().indexOf(c)}).first());1>b.length&&(b=a(".iH .QkhFhe",r),b=b.filter(function(){return-1!==a(this).parent().attr("title").indexOf(c)}).first());var d=0<b.length;b.each(pa);return d}function Vc(b,
c){var d=window.location.hash;Ja()&&(Wa=!1,window.close());if("return"===c){if(J()){ib();Wa=!1;window.onbeforeunload=!1;alert(b);window.close();return}ib();Pb()}else if("send"===c||"send_new_compose"===c){V=String(document.location);if(J()){alert(b);window.close();return}if(!Pb()){window.location.hash=jb?"#mbox":"#inbox";if(Lb()||Mb())a(".gB.acO",r).hide().after("<div>"+b+"</div>"),ca();setTimeout(Ka,5E3)}}Ob();Ka();var e=setInterval(function(){if(window.location.hash!==d||"#inbox"===d||"#mbox"===
d)Va(b,5E3),clearInterval(e)},2E3)}function Xa(a,c,d){setTimeout(function(){Vc(a,d)},c)}function kb(a){var c=[580,530],d=Nb(a).width();a.toggleClass("b4g-narrow",d<c[0]);a.toggleClass("b4g-narrow-sm",d<c[1]);d=a.parent().find(".email-meter");if(c=d.data("$expandedView"))a=Ya(d)?d.closest(".nH[role=list]"):a,d=0>a.height()-50-c.find(".email-meter-display-inner").get(0).scrollHeight||Ja(),a.toggleClass("em-short",d),c.toggleClass("em-short",d)}function Qb(b,c){var d=P("bcc",b);if(0<a.trim(c).length&&
0>d.indexOf(c)){var d=b.find("[name=bcc]").first(),e=d.val();0<a.trim(e).length?d.val(e+", "+c):d.val(c)}}function Rb(){w("It looks like Gmail hasn't saved this draft yet. Please allow Gmail to autosave (such as by adding an extra space after the email content and waiting until 'Saved' appears), and then click Send Later again.")}function lb(b,c){window.getSelection().removeAllRanges();a(ma(b)).append("<span/>").each(pa);a("[role='toolbar'] > [command='+bold']",b).each(pa);setTimeout(function(){a("[role='toolbar'] > [command='+bold']",
b).each(pa);e()},300);a(".oG",b).text("");a(".aOy",b).removeClass("aOy");var d=0,e=function g(){d++;if(40<d)c(!0);else{var e=a(".oG",b);e.hasClass("aOy")||38<d&&0<a.trim(e.text()).length?setTimeout(function(){c(null)},2E3):setTimeout(function(){g(b,c)},250)}}}function Lc(){var a=u();null!=a&&""!==a&&Wc();setInterval(Xc,500);Sb(function(){La({type:"is-inbox-zero"})});Yc();Zc()}function Zc(){for(var a="........................................;.......................=II=.............;...................~+++777777:..........;...............,7+===+?777777ZZ:........;............+ZZZI+====III777$ZZZI.......;.........~ZZZZZZ?=++........7ZZZZZ......;.......I$$$ZZZZZ,.............,ZZZ7.....;.....$$$$$ZZ:...........................;...,$$$7~...............................;........................................;                                        ; Like Boomerang for Gmail?              ; Join us at: http://boomerangapp.com/jobs.html;                                        ".split(";"),
c=0;c<a.length;c++)console.log("%c"+a[c],"color: blue; font-family: monospace; font-size: small")}function Xc(){V=String(document.location);0<V.indexOf("mbox")&&(jb=!0);0<V.indexOf("inbox")&&(jb=!1);J()||$c();r=q();if(Ja())ad();else{a(bd,r);var b=a(Tb,r);0<a(".aDh").length&&(J()?Ub():cd());0<b.length&&(dd(),Lb()||Mb()||ed(),Ub(),Uc());fd();gd()}}function $c(){var b=q();if(!(0<a("#b4g_manage",b).length||""===u())){var c=a("#gbwa");0===c.length&&(c=a("gb_kb"));c.first().before('<div class="manage_menu" style="display: inline-block; -webkit-flex: 0 0 auto; flex: 0 0 auto;" id="b4g_manage"><div><img id="b4g_app_loader_icon" src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/b4g_launcher_light.png" title="Boomerang" style="position: relative; top: 7px; left:3px;"/></div></div>');
a(".gb_ca").click(function(){a(b).click()});a("#b4g_app_loader_icon").hover(function(){a(this).attr("src","https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/b4g_launcher_color.png")},function(){a(this).attr("src","https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/b4g_launcher_light.png")});a("#b4g_manage",b).click(function(){Vb(a(this))});var c=a(".gb_5.gb_tb.gb_f.gb_sb"),d=c.css("min-width"),d=(parseInt(d,10)+40).toString()+"px";c.css("min-width",d)}}function Vb(b){var c,d;b=a(".b4g_manage_dropdown",
r);if(0<b.length)a(b).remove();else{b=Hb();d="https://b4g.baydin.com/managelogin?guser="+encodeURIComponent(u())+"&userNum="+b;b="https://b4g.baydin.com/submitinvitelogin?email="+encodeURIComponent(u());var e=S();b=Wb(e)?"<ul style='list-style-type: none; line-height: 1.8em; padding: 0px 10px; margin-top: 10px; margin-bottom: 10px;'> <li id='tmmanage' > <a href='"+d+"' class='top_menu_option' target='_blank' >Manage scheduled messages</a></li><li id='tmsettings' ><a class='top_menu_option' target='_blank' style='cursor:pointer;'>Settings</a></li><li id='tmtoolbox' > <a href='https://b4g.baydin.com/toolbox' class='top_menu_option' target='_blank' >Toolbox</a></li></ul><div style='padding:0px 8px'><div style=\"border-top-style: solid;border-width: 1px;border-color: #ccc;\"></div></div><ul style='list-style-type: none; line-height: 1.8em; padding: 0px 10px; margin-top: 10px; margin-bottom: 10px;'> <li id='tmpremiumsupport' > <a href='https://b4g.baydin.com/premiumsupport' class='top_menu_option' target='_blank' >Premium Support</a></li><li id='tmfaq' > <a href='http://boomeranggmail.com/faq.html' class='top_menu_option' target='_blank' >Help</a></li><li id='tmhowto' > <a href='javascript:void(0)' class='top_menu_option' target='_blank'>How To</span></li></ul><div style='padding:0px 8px'><div style=\"border-top-style: solid;border-width: 1px;border-color: #ccc;\"></div></div><ul style='list-style-type: none; line-height: 1.8em; padding: 0px 10px; margin-top: 10px; margin-bottom: 10px'> <li id='tmfriend' ><a href='"+
b+"' class='top_menu_option' target='_blank'>Refer a friend</a></li><li id='tmbuy' > <a href='http://b4g.baydin.com/subscriptions?guser="+encodeURIComponent(u())+"' class='top_menu_option' target='_blank'>Buy a subscription</a></li></ul><div style='padding:0px 8px'><div style=\"border-top-style: solid;border-width: 1px;border-color: #ccc;\"></div></div>":"<ul style='list-style-type: none; line-height: 1.8em; padding: 0px 10px; margin-top: 10px; margin-bottom: 10px;'> <li id='tmmanage' > <a href='"+
d+"' class='top_menu_option' target='_blank' >Manage scheduled messages</a></li><li id='tmsettings' ><a class='top_menu_option' target='_blank' style='cursor:pointer;'>Settings</a></li><li id='tmfaq' > <a href='http://boomeranggmail.com/faq.html' class='top_menu_option' target='_blank' >Help</a></li><li id='tmhowto' > <a href='javascript:void(0)' class='top_menu_option' target='_blank'>How To</span></li></ul><div style='padding:0px 8px'><div style=\"border-top-style: solid;border-width: 1px;border-color: #ccc;\"></div></div><ul style='list-style-type: none; line-height: 1.8em; padding: 0px 10px; margin-top: 10px; margin-bottom: 10px'> <li id='tmfriend' ><a href='"+
b+"' class='top_menu_option' target='_blank'>Refer a friend</a></li><li id='tmbuy' > <a href='http://b4g.baydin.com/subscriptions?guser="+encodeURIComponent(u())+"' class='top_menu_option' target='_blank'>Buy a subscription</a></li></ul><div style='padding:0px 8px'><div style=\"border-top-style: solid;border-width: 1px;border-color: #ccc;\"></div></div>";c=a('<div class="b4g_manage_dropdown manage_menu" style="display: block; width:200px; margin-left:-5px; left:-15px; background: #fff; border: 1px solid #ccc; border-color: rgba(0,0,0,.2); box-shadow: 0 2px 10px rgba(0,0,0,.2); overflow: hidden; position: absolute; right: 0; top: 44px; -webkit-animation: gb__a .2s; animation: gb__a .2s; -webkit-border-radius: 2px; border-radius: 2px; -webkit-user-select: text; ">'+
b+'</div><div class="b4g_manage_dropdown" style="display:block; margin-left:5px; left:auto; border-color: transparent;border-style: dashed dashed solid;border-width: 0 8px 8px;position: absolute;z-index: 1;height: 0;width: 0;-webkit-animation: gb__a .2s;animation: gb__a .2s;border-bottom-color: #ccc;border-bottom-color: rgba(0,0,0,.2);top: 36px;"></div><div class="b4g_manage_dropdown" style="display:block; margin-left:5px; left:auto; border-color: transparent;border-bottom-color: #fff;border-style: dashed dashed solid;border-width: 0 8px 8px;position: absolute;top: 37px;z-index: 1;height: 0;width: 0;-webkit-animation: gb__a .2s;animation: gb__a .2s;"></div>');
b=c.find("a");b.css("color","#36c");b.css("text-decoration","none");b.hover(function(){a(this).css("text-decoration","underline")},function(){a(this).css("text-decoration","none")});c.appendTo("#b4g_manage");n(["Top Menu","Open menu"]);b=I("b4g-inline-manage-last-update-"+u());null==b&&(b=new Date,b=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear()+" 12:00 AM");a(".tmdataupdate",r).text(b);a(r).click(function(b){b=ha(b);0===a(b).parents().andSelf().filter("#b4g_manage").length&&(a(c).remove(),a(r).unbind("click"))});
a("#tmdata",r).click(function(){fa(function(){ja.expire_cache();Va("Updating...",2E3)})});a("#tmmanage",r).click(function(){n(["Top Menu","Click manage scheduled messages"])});a("#tmbuy",r).click(function(){n(["Top Menu","Click buy a subscription"])});a("#tmfaq",r).click(function(){n(["Top Menu","Click help"])});a("#tmhowto",r).click(function(){Ma(1);n(["Top Menu","Click How To"])});a("#tmfriend",r).click(function(){n(["Top Menu","Click tell a friend"])});a("#tmtoolbox",r).click(function(){n(["Top Menu",
"Click toolbox"])});a("#tmpremiumsupport",r).click(function(){n(["Top Menu","Click premium support"])});a("#tmsettings",r).click(function(){fa(hd);n(["Top Menu","Click settings"])})}}function dd(){var b=q();if(!(0<a(".boomerang-button",b).length||1>a(Ib,b).length)){var c=document.createElement("div");c.innerHTML="<div aria-haspopup='true' style='-webkit-user-select: none; -moz-user-select:none;margin-bottom:0px;margin-top:-2px; outline: none;' role='button' class='T-I J-J5-Ji ar7 nf T-I-ax7 L3' tabindex='0'><img class='f tk3N6e-I-J3' src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/tinyboomlogo.png' style='vertical-align: middle;'/> Boomerang <div class='VP5otc-d2fWKd tk3N6e-I-J3 J-J5-Ji'> </div></div>";
a(c).attr("class","G-Ni J-J5-Ji boomerang-button b4g_button");for(var d=null,b=a(id,b),e=0;e<b.length;e++)d=c.cloneNode(!0),a(d).click(function(a){Xb(a,this,Yb);n(["thread menu","click"])}),b.get(e).appendChild(d)}}function cd(){function b(b){if(0===a(".sendLaterTable",b).length){var d=a(".aDj",b);if(0===d.length)return;d.append(Zb);a(".send-later-button",b).click(function(a){$b(a,this,!1)});a(".sendboomerang-button",b).click(function(a){ac(a,this,!1)});try{bc(b)}catch(k){}var e=function(){var d=
a(".boomerangSendCheck",b).is(":checked"),e=qa(b);d?(d=cc(b),Y(d,function(a){B(a)||20===a?Z(a):1!==a?w("Your most recent Boomerang-on-Send failed. To Boomerang your sent email, please open your message in 'Sent Mail' and Boomerang the message manually. <br/><br/> Error Details:<br/> "+ea[a]):1===a&&(La({type:"return-later"}),ja.expire_cache())},"success")):e&&dc(b)};Kb(b).click(e).keydown(function(a){32!==a.which&&13!==a.which||e()});a(".boomerangSendCheck",b).click(function(){Fa(b)});a(".boomerangSendCheck",
b).change(function(){n(["boomerang this",a(this).is(":checked")?"checked":"un-checked"])});a(".boomerangSendCondition",b).change(function(){a(".boomerangSendCheck",b).attr("checked",!0);Fa(b);var d=a(this).val();n(["Send and Boomerang","Change 'if i don't hear back' field",d]);if("no click"===d||"no open"===d)qa(b)||a(".b4g-tracking-toggle",b).trigger("b4g-toggle-state")});var f=a(".GW",b);if(0<f.length){var g=parseInt(f.css("bottom"),10),l=a(".aoD.hl")[0],m=function(){a(l).is(":visible")?f.css("bottom",
g.toString()+"px"):f.css("bottom",(g+42-8).toString()+"px")};(new ka(function(a){a.forEach(m)})).observe(l,{attributes:!0})}0===b.find(".HQ").length&&(a(".Am.Al",b).focus(),setTimeout(function(){a(".aoD.hl",b).focus()},100));ec(b);oa.add_compose_listen(b)}kb(b)}a(".nH.Hd[role='dialog']").each(function(){var c=a(this);ma(c)&&b(c)})}function Ub(){function b(b){if(0===a(".sendLaterTable",b).length){var d=b.find(".aDh");d.after(Zb);b.append("<div>&nbsp</div><div>&nbsp</div><div>&nbsp</div>");var e=0<
a(".aDd").length;if(J()&&!e){var f=d.height();d.css("height",(f+42).toString()+"px");var g=a(".aoD.hl")[0],l=d.css("margin-top"),m=(parseInt(l,10)-f).toString()+"px",k=function(){a(g).is(":visible")?d.css("margin-top",m):d.css("margin-top",l)};(new ka(function(a){a.forEach(k)})).observe(g,{attributes:!0});k();var C=a(".GP")[0],p=function(){jd(function(){var b=a(".qz.aXjCH"),c=b.css("max-height"),c=(parseInt(c,10)-f).toString()+"px";b.css("max-height",c);b=a(".Am.Al");c=b.css("min-height");c=(parseInt(c,
10)-f).toString()+"px";b.css("min-height",c)},250)};(new ka(function(a){a.forEach(p)})).observe(C,{attributes:!0});p();C=a(".sendLaterTable",b);C.css("margin-top","-"+(42).toString()+"px");C.css("border-top-width","1px");var h=function(){var d=a(".GW",b);if(0<d.length){var e=parseInt(d.css("bottom"),10);e?d.css("bottom",(e+42).toString()+"px"):d.css("bottom",(42).toString()+"px")}else setTimeout(h,2E3)};h()}a(".send-later-button",b).click(function(a){$b(a,this,!0)});a(".sendboomerang-button",b).click(function(a){ac(a,
this,!0)});a(".boomerangSendCondition",b).change(function(){a(".boomerangSendCheck",b).attr("checked",!0);Fa(b);var d=a(this).val();n(["Send and Boomerang","Change 'if i don't hear back' field",d]);if("no click"===d||"no open"===d)qa(b)||a(".b4g-tracking-toggle",b).trigger("b4g-toggle-state")});try{bc(b)}catch(D){}var v=function(){var d=a(".boomerangSendCheck",b).is(":checked"),e=qa(b);d?(d=cc(b),Y(d,function(a,b,c){B(a)||20===a?Z(a):1!==a?w("Your most recent Boomerang-on-Send failed. To Boomerang your sent email, please open your message in 'Sent Mail' and Boomerang the message manually. <br/><br/> Error Details:<br/> "+
ea[a]):1===a&&(La({type:"return-later"}),ja.expire_cache())},"success")):e&&dc(b)};Kb(b).click(v).keydown(function(a){32!==a.which&&13!==a.which||v()});!e&&J()&&(a(".Am.Al",b).focus(),setTimeout(function(){a(".aoD.hl",b).focus()},100),la.boomerangtheweb&&(e=b.find("[name=to]").first(),C=u(),e.val(C)));a(".boomerangSendCheck",b).click(function(){Fa(b)});ec(b);oa.add_compose_listen(b)}kb(b)}a(".HE").each(function(){var a=Ea(this);ma(a)&&b(a)})}function ed(){var b=q(),c=a(".b4g-magic",b),d=a(".cf.hX:contains('Boomerang')",
b);if(!(0<c.length||0<d.length)){var d=Nc(),d=kd(d),c=ld(d,new Date,6),e=a(md,b);if(0<c.length&&c[0]>new Date&&c[0]<(new Date).addMonths(18)){var d=null!=extractTime(d),f=new Date(c[0]),f=d?f.addHours(-2):f.addDays(-1);if(f>new Date){var g=c[0],c=" <img class='f' src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/tinyboomlogo.png' style='margin: 1px 0px -1px 0px; vertical-align: middle;'/> Boomerang this? <select style='padding: 1px  0;line-height: 12px;' name='magicChoice' id='magicChoice' ><option value='the week before'>the week before</option><option value='the day before'>the day before</option><option value='the morning of'>the morning of</option><option value='2 hours before'>2 hours before</option><option value='the afternoon of'>the afternoon of</option><option value='the day after'>the day after</option><option value='the week after'>the week after</option></select>"+
("<strong> "+g.toString("MMM d, yyyy")+" "+g.toString("h:mmtt")+"</strong>. "),c=c+"<input type='submit' id='confirmMagic' value='Confirm'/>";e.attr("style","height: 25px; padding-top: 5px; margin-bottom: 5px; text-align:center;");e.html("<span class='vh boomerang b4g-magic' style='font-weight: normal !important; background-color: #FFC; padding: 5px 5px 5px 5px; font-size: 80%; color: rgb(42, 93, 176);'>"+c+"</span> ");d?a("#magicChoice option[value='2 hours before']",b).attr("selected","selected"):
a("#magicChoice option[value='the day before']",b).attr("selected","selected");a("#confirmMagic",b).click(function(){var c=a("#magicChoice",b).val(),d;switch(c){case "the week before":d=(new Date(g)).clearTime().addDays(-7).addHours(6);break;case "the day before":d=(new Date(g)).clearTime().addDays(-1).addHours(6);break;case "the morning of":d=(new Date(g)).clearTime().addHours(6);break;case "2 hours before":d=(new Date(g)).addHours(-2);break;case "the afternoon of":d=(new Date(g)).clearTime().addHours(12);
break;case "the day after":d=(new Date(g)).clearTime().addDays(1).addHours(6);break;case "the week after":d=(new Date(g)).clearTime().addDays(7).addHours(6);break;default:d=(new Date(g)).addHours(-2)}e.attr("style","height: 32px; list-style-type:none;padding: 0px 5px 5px 5px;text-align:center;");e.html("<img class='b4g-magic' src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/b4gloading.gif' alt='Loading...'>");Yb(d,{isByMagic:!0});n(["magic link","click",c])})}}else e.html("<span class='vh boomerang b4g-magic' style='display:none'></span>")}}
function Za(b){var c=q(),d=ha(b);0!==d.className.indexOf("ui")&&0!==d.className.indexOf("f")&&-1===d.className.indexOf("VP5otc-d2fWKd")&&-1===d.className.indexOf("menu-anchor")&&-1===d.className.indexOf("b4g_menu")&&-1===d.className.indexOf("menu-caption")&&-1===d.className.indexOf("send-later-button")&&-1===d.className.indexOf("boomerang-button")&&-1===d.className.indexOf("sendboomerang-button")&&-1===d.className.indexOf("conditional-caption")&&-1===d.className.indexOf("conditional-caption-text")&&
-1===d.className.indexOf("overlay")&&-1===d.className.indexOf("ge-btn")&&0===a(d).closest(".b4g-ui-datepicker,.b4g_menu,.b4g-ui-corner-all,.boomerang-button").length&&(ca(b,b.data.owner),a(c).unbind("click",Za))}function ca(b,c){a("#b4g_menu").remove();c&&a("div",c).removeClass("T-I-Kq")}function $a(b){b.datepicker({showOn:"button",buttonImage:"https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/calendarpicker_17x15.png",buttonImageOnly:!0,constrainInput:!1,dateFormat:"m/dd/yy",minDate:0,onSelect:function(a,
d){var e=(new Date).toString("hh:mm tt");b.val(b.val()+" "+e);n(["boomerang menu","select custom time",b.val()])},onClose:function(a,d){b.focus()}});a(".b4g-ui-datepicker-trigger",r).css("margin-left","5px");a(".b4g-ui-datepicker-trigger",r).css("vertical-align","middle")}function ta(b){var c=q();b&&(X=wa(b),b=Ga(X,!0),null==X?a("#date-preview",c).html("<span class='b4g_menu' style='color:#ff0000;'>"+b+"</span>"):X<new Date?a("#date-preview",c).html("<span class='b4g_menu' style='color:#ff0000;'>"+
b+"</span>"):a("#date-preview",c).html("<span class='b4g_menu'>"+b+"</span>"),ba())}function mb(a,c){return'<div class="b4g-menu-option">'+('<a href="javascript:void(0)" style="border-width:0px;text-decoration:none;color:#333;line-height:1.1em;padding: 3px 11px;display:block;cursor:pointer;" class="b4g-custom-menu-item menu-anchor J-N">'+a+"</a>")+"</div>"}function nb(b){a(".b4g_menu_item:contains('hour'):last",b).parent().after('<div class="b4g-menu-divider" style="height:1px;margin:6px 11px;background:#ddd;"></div>');
a(".b4g_menu_item:contains('Tomorrow'):last",b).parent().after('<div class="b4g-menu-divider" style="height:1px;margin:6px 11px;background:#ddd;"></div>');var c=a(".b4g_menu_item:contains('days'),.b4g_menu_item:contains('week'),.b4g_menu_item:contains('month')").last(),c=a(c,b);c.parent().after('<div class="b4g-menu-divider" style="height:1px;margin:6px 11px;background:#ddd;"></div>')}function fc(b){a(".b4g-custom-menu-item:last",b).parent().after('<div class="b4g-menu-divider" style="height:1px;margin:6px 11px;background:#ddd;"></div>')}
function nd(){var b=q(),b=a("#b4g_inner_menu",b);0<b.length&&(b.empty(),a(".b4g-ui-datepicker").css("display","none"),b.append('<li style="list-style-type:none;text-align:center;padding:15px 2px;margin:0px 0px;">Processing message...</li>'),b.append('<li style="list-style-type:none;padding:0px 10px 15px 10px;text-align:center;"><img src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/b4gloading.gif" alt="Loading..."></li>'),ba())}function xa(b,c){b.hover(function(){var b,e=ya(a(this).text(),
c,!1);switch(a(this).text().toLowerCase()){case "tomorrow morning":case "tomorrow afternoon":b=gc(e,!0);e=""+e.toString("h:mm tt");b=b+", around "+e;break;case "- by 5pm today":b="At a random time before 5pm today";break;case "- within 1 week":b="At a random time within 1 week";break;case "- within 1 month":b="At a random time within 1 month";break;default:b=Ga(e,!0)}null==b&&(b="");a(this).attr("title",b)},function(){a(this).attr("title","")})}function ba(){try{var b=q(),c=a("#b4g_inner_menu",b),
d=a("#b4g_menu",b);c.height();d.css("min-height",c.height()+"px")}catch(e){}}function ob(){var b=a("#b4g_user_menu_option_list li").length,c=a('#b4g-menu-default-times input[type="checkbox"]:checked').length;return b+c}function ab(){var b=ob(),c=a("#b4g-used-slot-indicator");a("#b4g_current_menu_item_count").text(b);13<=b?c.css("visibility","visible"):c.css("visibility","hidden")}function pb(){function b(){setTimeout(function(){k=!0},500)}ca();var c={Ok:{"class":"b4g-button blue b4g-custom-menu-update-button",
text:"Update Menu",click:function(){od();a(this).dialog("destroy")}},Cancel:{"class":"b4g-button dialog-gray",text:"Cancel",click:function(){a(this).dialog("destroy")}}};if("Old Safari"===t)alert(message);else{var d=q();a(".dialogdiv").remove();a("body",d).append(a("<div class='dialogdiv' id='b4g-customize-menu-dialog' style='display:none;'><div id='custom-b4g-container'><div id='customize_b4g_custom_menu_options'><h3 class='b4g-time-list-title'>Add your own menu item:</h3><div class='customize_menu_samples'>Examples: Tomorrow 8am, Monday 7am, +15 days, +3 weeks, +6 months, Dec 31</div><div id='custom_time_input'></div><ul id='b4g_user_menu_option_list'></ul></div><div id='customize_b4g_default_menu_options'><h3 class='b4g-time-list-title' style='margin-bottom:4px;'>Default items:</h3><table id='b4g-menu-default-times'><tr><td><input class='b4g-default-menu-item-checkbox' type='checkbox' checked /></td><td><span class='b4g-time-option'>In 1 hour</span></td></tr><tr><td><input class='b4g-default-menu-item-checkbox' type='checkbox' checked /></td><td><span class='b4g-time-option'>In 2 hours</span></td></tr><tr><td><input class='b4g-default-menu-item-checkbox' type='checkbox' checked /></td><td><span class='b4g-time-option'>In 4 hours</span></td></tr><tr><td><input class='b4g-default-menu-item-checkbox' type='checkbox' checked /></td><td><span class='b4g-time-option'>Tomorrow morning</span></td></tr><tr><td><input class='b4g-default-menu-item-checkbox' type='checkbox' checked /></td><td><span class='b4g-time-option'>Tomorrow afternoon</span></td></tr><tr><td><input class='b4g-default-menu-item-checkbox' type='checkbox' checked /></td><td><span class='b4g-time-option'>In 2 days</span></td></tr><tr><td><input class='b4g-default-menu-item-checkbox' type='checkbox' checked /></td><td><span class='b4g-time-option'>In 4 days</span></td></tr><tr><td><input class='b4g-default-menu-item-checkbox' type='checkbox' checked /></td><td><span class='b4g-time-option'>In 1 week</span></td></tr><tr><td><input class='b4g-default-menu-item-checkbox' type='checkbox' checked /></td><td><span class='b4g-time-option'>In 2 weeks</span></td></tr><tr><td><input class='b4g-default-menu-item-checkbox' type='checkbox' checked /></td><td><span class='b4g-time-option'>In 1 month</span></td></tr></table></div></div></div>"));
a(".dialogdiv",d).dialog(a.extend({title:"Customize Boomerang Menu",modal:!0,height:"auto",closeOnEscape:!0,buttons:c,width:415}));va();a(".b4g-ui-dialog-buttonset .b4g-button.blue").before("<span id='b4g-used-slot-indicator'>Using <span id='b4g_current_menu_item_count'>x</span> of 15 available slots</span>");var e={},d=JSON.parse(I("b4g-menu-customizations"));null!=d&&(e=d.defaultEntries);a("#customize_b4g_default_menu_options .b4g-time-option").parent().parent().each(function(){a(this).text()in
e&&!e[a(this).text()]&&a(this).find("input:first").removeAttr("checked")});c=a("<form onsubmit='return false;' autocomplete='off' id='b4g-custom-time-input-form'><input type='text' name='time'/><input type='button' class='by-button by-button-secondary' id='b4g-add-button' style='margin: 3px 0 5px 3px;padding:3px 13px;' value='Add'/><div id='b4g-custom-time-entry-date-preview-div' style='color:#969696; margin-left:3px;'><span id='date-preview' style='color:green'></span></div></form>");a("#custom_time_input").replaceWith(c);
var f=c.find("input[type=text]"),g=a("#b4g-custom-time-input-form").outerWidth(!0),l=a("#b4g-add-button").outerWidth(!0),m=parseInt(f.css("border-left-width"),10),m=m+parseInt(f.css("border-right-width"),10);f.outerWidth(g-l-m);f.focus().select();f.keyup(function(){ta(a(this).val())});var k=!0;f.keydown(function(b){13===b.keyCode&&k&&(k=!1,a("#b4g-add-button").trigger("click"))});f.focus(function(){ta(a(this).val())});l=a(window).height();g=a("#b4g_user_menu_option_list").offset().top;m=a(".b4g-ui-dialog-buttonset").first().outerHeight();
l=l-m-20;a("#b4g_user_menu_option_list").css("max-height",l-g);g=[];null!=d&&(g=d.customEntries);for(d=0;d<g.length;d++)hc(g[d],a("#b4g_user_menu_option_list"));ab();c.find("input[type=button]").click(function(){X=wa(f.val());var c=f.val().toLowerCase(),d=[];a(".b4g-custom-time-entry-text").each(function(){d.push(a(this).text().toLowerCase())});null==X?(alert("Boomerang doesn't understand your date format. Please try again."),b()):X<new Date?(alert("This date is in the past. Please try again."),b()):
-1!==d.indexOf(c)?(alert("You have already added this custom menu item."),b()):ob()<ic?(hc(f.val(),a("#b4g_user_menu_option_list")),f.val(""),a("#date-preview").html(""),k=!0,a("#b4g_user_menu_option_list").animate({scrollTop:a("#b4g_user_menu_option_list").children("li").last().position().top},500)):(alert(jc),b());ab()});c=a(".dialogdiv").parent().height();d=a(window).height();c>d&&(g=a("#custom-b4g-container").height(),a("#custom-b4g-container").height(g-(c-d)),a("#custom-b4g-container").css({"overflow-y":"scroll"}));
a(".dialogdiv").dialog({position:"center"});n(["Show dialog","Customize Boomerang Menu"]);a(".b4g-default-menu-item-checkbox").change(function(){a(this).attr("checked")&&ob()>ic&&(a(this).attr("checked",!1),alert(jc));ab()})}}function pd(a){var c=I("b4gMenuEntries"),d={};if(null==c)d[a]=1;else if(d=JSON.parse(c),c=d[a],null==c)qd(d),d[a]=1;else{var e=[],f;for(f in d)d.hasOwnProperty(f)&&e.push([f,d[f]]);e.sort(function(a,b){return b[1]-a[1]});f=1;2<e.length&&(f=e[2][1]/2);d[a]=c+f}G("b4gMenuEntries",
JSON.stringify(d))}function qd(a){var c=[],d;for(d in a)a.hasOwnProperty(d)&&c.push([d,a[d]]);c.sort(function(a,b){return b[1]-a[1]});if(25<c.length)for(d=10;d<c.length;d++)delete a[c[d][0]];if(1E3<c[0][1])for(var e in a)a.hasOwnProperty(e)&&(a[e]=Math.ceil(a[e]/25));return a}function qb(){var a=I("b4g-menu-customizations"),c=[];null!=a&&(c=JSON.parse(a).customEntries);return c}function hc(b,c){var d=a("<span class='b4g-custom-time-entry' style='margin-left:20px;'><img style='cursor:pointer;' src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/delete.png'></img></span>");
d.click(function(){a(this).closest("li").remove();ab()});d.hover(function(){a(this).css("opacity","1")},function(){a(this).css("opacity",".8")});var e=a("<span class='b4g-custom-time-entry-text b4g-custom-time-entry'>"+b.charAt(0).toUpperCase()+b.slice(1)+"</span>");c.append(e);e.wrap("<li class='b4g-custom-time-entry-wrapper'></li>");e.after(d)}function od(){var b={};a("#customize_b4g_default_menu_options .b4g-time-option").each(function(){var c=a(this).text(),d=a(this).closest("tr").find("input:first").attr("checked");
b[c]=d});var c=[];a("#b4g_user_menu_option_list .b4g-custom-time-entry-text").each(function(){c.push(a(this).text())});var d={};d.customEntries=c;d.defaultEntries=b;G("b4g-menu-customizations",JSON.stringify(d))}function rb(a){var c="In 1 hour;In 2 hours;In 4 hours;Tomorrow morning;Tomorrow afternoon;In 2 days;In 4 days;In 1 week;In 2 weeks;In 1 month".split(";"),d=JSON.parse(I("b4g-menu-customizations")),e=[];if(null!=d)for(var d=d.defaultEntries,f=Object.keys(d),g=0;g<f.length;g++)e[f[g].toLowerCase()]=
d[f[g]];for(d=0;d<c.length;d++)f=c[d],g=f.toLowerCase(),g in e&&!e[g]||a.append('<div class="b4g-menu-option">'+('<a href="javascript:void(0)" style="border-width:0px;text-decoration:none;color:#333;line-height:1.1em;padding: 3px 11px;display:block;cursor:pointer;" class="b4g_menu_item menu-anchor J-N">'+f+"</a>")+"</div>")}function Xb(b,c,d){var e=q();if(!(0<a(b.target).closest("#b4g_menu").length)){var f=e.getElementById("b4g_menu");if(f)ca(b,c);else{a("div",c).addClass("T-I-Kq");b='<ul id="b4g_menu" tabindex="0" class="b4g_menu" style="padding:0px;position:absolute;left:'+
a(b.currentTarget).position().left+'px;  background-color: rgb(255, 255, 255); -webkit-user-select: none; min-width: 17em;min-height:auto;" role="menu" aria-haspopup="true" aria-activedescendant=""><div id="b4g_inner_menu" class="b4g_menu SK AX" style="-webkit-user-select: none; font-size:12px;color:#333;padding:0;"><li class="menu-caption" style="list-style-type:none;padding: 7px 11px 0 11px;margin: 0 0 1px 0;"><span style="padding:0px;">Return Conversation to Inbox:</span><img class="b4g_menu" id="notes_toggle" data-tooltip="Add Note to Self" data-tooltip-delay="400" src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/notes_off.png"  height="16px" style="opacity:.9;position:absolute;right:31px;top:6px;cursor:pointer;"/><img id="b4g-menu-customization-button" data-tooltip="Customize Menu" data-tooltip-delay="400" src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/gear.png" height="16px" style="opacity:.9;position:absolute;right:11px;top:7px;cursor:pointer;"></li><div id="notes_menu" class="b4g_menu SK AX" style="display:none;min-width:17em;min-height:auto;left:2px;margin:5px;border:none;box-shadow:none;-moz-box-shadow:none;">'+
sb+'</div><li class="b4g_menu b4g-menu-option" style="padding:6px 11px 6px 11px;"><input type="checkbox" id="conditionalBoomerang" class="b4g_menu" name="condBoomerang"/> Only if nobody responds</li><li class="b4g-menu-divider" style="height:1px;margin:6px 11px 6px 11px;background:#ddd;"></li><li class="b4g-standard-times"></li><li class="b4g-custom-times"></li><li class="menu-caption" style="padding:7px 11px 4px 11px;">At a specific time:</li><li class="b4g-menu-option" style="padding: 0 0 7px 11px;"><div style="color: #666; font-style: italic; font-size: 10px; margin-top: 3px;" class="b4g_menu">Examples: "Monday 9am", "Dec 23"</div><form onsubmit="return false;" autocomplete="off"><div style="padding-top:3px; vertical-align: middle;" class="b4g_menu"><input style="margin-left:1px;padding:3px 22px 2px 2px;" class="b4g_menu" type="text" name="time" id="datepicker"><input id="specific-time-submit" type="submit" value="Confirm" style="margin: 0px 7px 5px 9px;font-size:11px;vertical-align:top;" class="b4g_menu by-button by-button-secondary"></div><div style="color:#969696;margin-left:1px;"><span id="date-preview" class="b4g_menu" style="color:green;"></span></div></form></li><li class="b4g-menu-divider" style="height:1px;margin:0px 11px;background:#ddd;"></li><li class="b4g-menu-option"><a id="random-time" class="menu-anchor" style="margin:4px 0px;border-width:0px;color:#333;padding: 6px 11px;cursor:pointer;" href="javascript:void(0)"><span style="vertical-align:bottom;margin-left:0px;">Random time</span><img src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/down.png" width="10px" style="opacity:.7;vertical-align:middle;margin:-2px 0px 0px 5px;"/></a></li><li class="random b4g-menu-option" style="display:none;"><a class="random_link menu-anchor" href="javascript:void(0)" style="border-width:0px;text-decoration:none;color:#333;line-height:1.1em;padding:3px 13px;display:block;cursor:pointer;">- By 5pm today</a></li><li class="random b4g-menu-option" style="display:none;"><a class="random_link menu-anchor" href="javascript:void(0)" style="border-width:0px;text-decoration:none;color:#333;line-height:1.1em;padding:3px 13px;display:block;cursor:pointer;">- Within 1 week</a></li><li class="random b4g-menu-option" style="display:none;margin-bottom:6px;"><a class="random_link menu-anchor" href="javascript:void(0)" style="border-width:0px;text-decoration:none;color:#333;line-height:1.1em;padding:3px 13px;display:block;cursor:pointer;">- Within 1 month</a></li></div></ul>';
a(c).parent().append(b);b=a("#b4g_menu",e);oa.enable_menu_arrow_keys(b);Wb(S())&&"true"===I("b4g_standard_boomerang_sticky_conditional-"+u())&&a("#conditionalBoomerang",e).attr("checked",!0);a("#conditionalBoomerang",e).change(function(){var b=a(this).is(":checked");n(["thread menu","conditional boomerang",b?"checked":"un-checked"]);G("b4g_standard_boomerang_sticky_conditional-"+u(),b)});rb(a(".b4g-standard-times",e));nb(e);a(".b4g_menu_item",e).click(function(){var b=a(this).text();d(b);n(["boomerang menu",
"send later time",b])});xa(a(".b4g_menu_item",e),6);X=null==Q||Q<new Date?Date.today().addDays(2).addHours(8):Q;var g=X.toString("M/d/yyyy h:mm tt");b=a("#datepicker",e);b.val(g);b.keyup(function(){var b=a(this).val();ta(b)});b.focus(function(){var b=a(this).val();ta(b)});a("input#specific-time-submit",e).click(function(a){kc(a,d)});g=qb();if(0<g.length){for(var l=0;l<g.length;l++){var m=mb(g[l],null);a(".b4g-custom-times",e).append(m)}a(".b4g-custom-menu-item",e).hover(function(){a(this).addClass("J-N-JT")},
function(){a(this).removeClass("J-N-JT")});a(".b4g-custom-menu-item",e).click(function(){var b=a(this).text();lc(b,d);n(["b4g menu","picked",b])});xa(a(".b4g-custom-menu-item",e),6)}a("#random-time",e).parent().toggle(function(){var b=a("#random-time:first-child",e);a(".random",f).show();b.html('<span style="vertical-align:bottom;margin-left:0px;">Random time</span><img src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/up.png" width="10px" style="opacity:.7;vertical-align:middle;margin:-2px 0px 0px 5px;"/>');
ba();n(["thread menu","random time","opened"])},function(){var b=a("#random-time:first-child",e);a(".random",f).hide();b.html('<span style="vertical-align:bottom;margin-left:0px;">Random time</span><img src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/down.png" width="10px" style="opacity:.7;vertical-align:middle;margin:-2px 0px 0px 5px;"/>');ba();n(["thread menu","random time","closed"])});a(".random_link",e).click(function(){var b=a(this).text();d(b);n(["b4g menu","random time","picked - "+
b])});xa(a(".random_link",e),6);fc(e);g=a("#b4g-menu-customization-button",e);g.click(function(){pb()});g.hover(function(){a(this).css("opacity","1")},function(){a(this).css("opacity",".9")});a(e).bind("click",{owner:c},Za);$a(b);a(".b4g-ui-datepicker-trigger",e).css("cursor","pointer");a(".b4g-ui-datepicker-trigger",e).css("margin-left","-21px");a(".b4g-ui-datepicker-trigger",e).css("margin-top","-2px");a(".b4g-ui-datepicker-trigger",e).hover(function(){a(this).css("box-shadow","0px 0px 3px #aaa")},
function(){a(this).css("box-shadow","none")});b.mousedown(function(a){a.stopImmediatePropagation()});b.css("-moz-user-select","text");b.parents().each(function(){a(this).css("-moz-user-select","text")});b.focus();b.select();a("span#date-preview.b4g_menu",e).text("");a("#note_entry",e).val("");a("#notes_toggle",e).click(function(){tb(mc,nc,oc);n(["notes","click"])}).hover(function(){a(this).css("opacity","1")},function(){a(this).css("opacity",".9")});a("#notes_save_button",e).click(function(){Na();
a("#note_entry",e).val()&&(a("#notes_toggle",e).attr("src","https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/notes_on.png"),a("#notes_toggle",e).attr("data-tooltip","Edit Note to Self"),a("#notes_toggle",e).css("top","6px"));ba()});a("#notes_cancel_button",e).click(function(){Na();a("#note_entry",e).val("");a("#notes_toggle",e).attr("src","https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/notes_off.png");a("#notes_toggle",e).attr("data-tooltip","Add Note to Self");a("#notes_toggle",e).css("top",
"6px");ba()});ba()}}}function Yb(b,c){c=c||{};var d=q(),e=u(),f=a(Tb,r).filter(":visible").text(),g=Oc(),l=Qc(),m=ya(b,6);Q=m;var k=Ga(m,!1),C=a("#note_entry",d).val();null==C&&(C="");var p="https://b4g.baydin.com/mailcruncher/schedulereturn",p=p+"?subject="+encodeURIComponent(f),p=p+"&senders="+encodeURIComponent(JSON.stringify(g)),p=p+"&guser="+encodeURIComponent(e),p=p+"&sentDates="+encodeURIComponent(JSON.stringify(l)),p=p+"&offset="+encodeURIComponent(m.valueOf()),p=p+"&threadId="+encodeURIComponent(R()),
p=Ua()?p+"&language=English":p+"&language=notEnglish",p=a("#conditionalBoomerang",d).attr("checked")?p+"&conditional="+encodeURIComponent("True"):p+"&conditional="+encodeURIComponent("False"),p=0<da("^i").length&&0<V.indexOf("label")?p+"&inbox=True":p+"&inbox=False",p=p+"&notes="+encodeURIComponent(C),h=String(document.location),v="Message will return "+k+". ";nd();za(function(){Y(p,function(a,b,d){B(a)?Z(a):20===a?(Z(a),window.location=h):1!==a?(w("Attempt failed: "+ea[a]),window.location=h):1===
a&&(La({type:"return-later",isByMagic:c.isByMagic}),ja.expire_cache())},v);Xa(v,300,"return")},ca)}function kc(b,c){var d=q(),e=Date.parse(X);if(null!=e){var d=a("#datepicker",d).val(),f=new Date;0<wa(d)-(f.getTime()-3E5)?(pd(d),c(e)):(w("The time you entered is in the past. We can only schedule messages for the future."),n(["boomerang menu","confirm specific time","error time in the past entered"]))}else w("Unable to read specified time. Please try again."),n(["boomerang menu","confirm specific time",
"error invalid time"]);n(["boomerang menu","confirm specific time","clicked"])}function lc(a,c){var d=wa(a);null!=d?c(d):w("Something went wrong processing the customized date. Please let the Boomerang team know.")}function pc(b,c){c||(c=q());var d=a(".conditional-caption",c);G("b4g_sticky_send_and_boomerang-"+u(),b);var e=ya(b,6);Q=e;d.data("returnDate",e);a(".conditional-caption-text").text(String(b));a(".b4g-ui-datepicker").css("display","none");a(".boomerangSendCheck",c).attr("checked",!0);Fa(c);
a(".b4g_menu",c).remove();n(["boomerang menu","send boomrang menu","clicked"])}function ec(b){var c=S(),d=I("b4g_sticky_send_and_boomerang-"+u());if(d){var e=ya(d,6);a(".conditional-caption",b).data("returnDate",e);a(".conditional-caption-text",b).text(d)}if("premium"===c){var c=JSON.parse(I("b4g_preferences-"+u())),f=c.onSendSetting?"checked":"",g=null==c.onSendOffset?"1_weeks":c.onSendOffset,l=null==c.onSendCond?"reply":c.onSendCond,m=c.readReceipts?"on":"off";"checked"!==f&&"on"!==m||za(function(){if("checked"===
f&&("no click"===l||"no open"===l)||"on"===m)qa(b)||a(".b4g-tracking-toggle",b).trigger("b4g-toggle-state");var c=g.split("_"),d=" in "+c[0]+" "+c[1];"1"===c[0]&&"s"===d.charAt(d.length-1)&&(d=d.substring(0,d.length-1));var e=c[0],h=new Date,v=Math.floor(30*Math.random())-15;switch(c[1]){case "hours":h=h.addHours(parseInt(e));break;case "days":h=h.addDays(parseInt(e)).addMinutes(v);break;case "weeks":h=h.addWeeks(parseInt(e)).addMinutes(v);break;case "months":h=h.addMonths(parseInt(e)).addMinutes(v);
break;default:h=0}c=h;"checked"===f&&(a(".boomerangSendCheck",b).get(0).checked="checked"===f?1:0,a("[name=ifResponse]",b).val(l),a(".conditional-caption",b).data("returnDate",c),a(".conditional-caption-text",b).text(d))});c.crm.active&&("every"===c.crm.bccIncludeWith||"boomerang"===c.crm.bccIncludeWith&&"checked"===f)&&Qb(b,c.crm.bccAddress);n(["Compose Window","boomerang on-send setting applied successfully"])}}function ac(b,c,d){var e=ha(b);if(-1!==e.className.indexOf("J-Zh-I")||0===e.className.indexOf("f")||
-1!==e.className.indexOf("VP5otc-d2fWKd")||-1!==e.className.indexOf("conditional-caption")||-1!==e.className.indexOf("conditional-caption-text")||-1!==e.className.indexOf("conditional-caption-arrow")){var f=q(),g=Ea(c);if(f.getElementById("b4g_menu"))ca(b,c);else{n(["Send and Boomerang","Open menu"]);b='<ul id="b4g_menu" tabindex="0" class="b4g_menu" style="padding:0px;background:#fff;position:absolute; bottom: '+(d?-21:22)+'px; left: 195px;" role="menu" aria-haspopup="true" aria-activedescendant=""><div id="b4g_inner_menu" class="b4g_menu SK AX" style="-webkit-user-select: none; font-size:12px;padding:0;"><li id="b4g_menu_title" class="menu-caption b4g-menu-option" style="list-style-type:none;padding:6px 11px 6px 11px;">Boomerang this: <img class="b4g_menu" id="notes_toggle" data-tooltip="Add Note to Self" data-tooltip-delay="400" src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/notes_off.png"  height="16px" style="opacity:.9;position:absolute;right:33px;top:6px;cursor:pointer;"/><img id="b4g-menu-customization-button" data-tooltip="Customize Menu" data-tooltip-delay="400" src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/gear.png" height="16px" style="opacity:.9;height:16px;width:16px;position:absolute;right:13px;top:6px;cursor:pointer;"></li><div id="notes_menu" class="b4g_menu SK AX" style="display:none;min-width:17em;min-height:auto;left:2px;margin:5px;border:none;box-shadow:none;-moz-box-shadow:none;">'+
sb+'</div><li class="b4g-menu-divider" style="height:1px;margin:0 11px 6px 11px;background:#ddd;"></li><li class="b4g-standard-times"></li><li class="b4g-custom-times"></li><li class="menu-caption" style="padding:7px 11px 4px 11px;">At a specific time:</li><li class="b4g-menu-option" style="padding: 0 0 7px 11px;"><div style="color: #666; font-style: italic; font-size: 10px; margin-top: 3px;" class="b4g_menu">Examples: "Monday 9am", "Dec 23"</div><form onsubmit="return false;" autocomplete="off"><div style="padding-top:3px; vertical-align: middle;" class="b4g_menu"><input style="margin-left:1px;padding:3px 22px 2px 2px;" class="b4g_menu" type="text" name="time" id="datepicker"><input id="specific-time-submit" type="submit" value="Confirm" style="margin: 0px 7px 5px 9px;font-size:11px;vertical-align:top;" class="b4g_menu by-button by-button-secondary"></div><div style="color:#969696; margin-left: 1px;"><span id="date-preview" class="b4g_menu" style="color:green;"></span></div></form></li></div></ul>';
a(c).parent().append(b);b=a("#b4g_menu",f);oa.enable_menu_arrow_keys(b);rb(a(".b4g-standard-times",f));nb(f);a(".b4g_menu_item",f).click(function(){var b=a(this).text();pc(b,g);n(["boomerang menu","send later time",b])});xa(a(".b4g_menu_item",f),6);X=null==Q||Q<new Date?Date.today().addDays(2).addHours(8):Q;d=X.toString("M/d/yyyy h:mm tt");b=a("#datepicker",f);b.val(d);b.keyup(function(){var b=a(this).val();ta(b)});b.focus(function(){var b=a(this).val();ta(b)});a("input#specific-time-submit",f).click(function(b){n(["Send and Boomerang",
"At a specific time"]);b=Date.parse(X);if(null!=b){var c=g;c||(c=q());var d=a(".conditional-caption",c),e=ya(b,6);Q=e;d.data("returnDate",e);a(".conditional-caption-text").html("<span class='by-text'>by </span>"+b.toString("ddd MMM d h:mm tt"));a(".b4g-ui-datepicker").css("display","none");a(".boomerangSendCheck",c).attr("checked",!0);Fa(c);a(".b4g_menu",c).remove();n(["boomerang menu","send specific time","clicked"])}else w("Unable to read specified time. Please try again.")});e=qb();if(0<e.length){for(var l=
0;l<e.length;l++)d=mb(e[l],null),a(".b4g-custom-times",f).append(d);a(".b4g-custom-menu-item",f).click(function(){var b=a(this).text();pc(b,g);n(["b4g menu","picked",b])});xa(a(".b4g-custom-menu-item",f),6)}d=a("#b4g-menu-customization-button",f);d.click(function(){pb()});d.hover(function(){a(this).css("opacity","1")},function(){a(this).css("opacity",".9")});a(f).bind("click",{owner:c},Za);$a(b);a(".b4g-ui-datepicker-trigger",f).css("cursor","pointer");a(".b4g-ui-datepicker-trigger",f).css("margin-left",
"-21px");a(".b4g-ui-datepicker-trigger",f).css("margin-top","-2px");a(".b4g-ui-datepicker-trigger",f).hover(function(){a(this).css("box-shadow","0px 0px 3px #aaa")},function(){a(this).css("box-shadow","none")});b.mousedown(function(a){a.stopImmediatePropagation()});b.css("-moz-user-select","text");b.parents().each(function(){a(this).css("-moz-user-select","text")});b.focus();b.select();a("span#date-preview.b4g_menu",f).text("");c=g.data("notes");g.data("notes")?(a("#note_entry",f).val(c),a("#notes_toggle",
f).attr("src","https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/notes_on.png"),a("#notes_toggle",f).attr("data-tooltip","Edit Note to Self"),a("#notes_toggle",f).css("top","6px")):a("#note_entry",f).val("");a("#notes_toggle",f).click(function(){tb(mc,nc,oc);n(["notes","click"])}).hover(function(){a(this).css("opacity","1")},function(){a(this).css("opacity",".9")});a("#notes_save_button",f).click(function(){Na();a("#note_entry",f).val()&&(a("#notes_toggle",f).attr("src","https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/notes_on.png"),
a("#notes_toggle",f).attr("data-tooltip","Edit Note to Self"),a("#notes_toggle",f).css("top","6px"),g.data("notes",a("#note_entry",f).val()));ba()});a("#notes_cancel_button",f).click(function(){Na();a("#note_entry",f).val("");a("#notes_toggle",f).attr("src","https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/notes_off.png");a("#notes_toggle",f).attr("data-tooltip","Add Note to Self");a("#notes_toggle",f).css("top","6px");g.data("notes","");ba()});ba()}}}function cc(b){var c=u(),d=da("subjectbox",
b).val(),e=a(".J-JN-M-I.J-J5-Ji.az2.az4.L3",b);0<e.length&&Ta(e.text());var e=P("to",b),f=P("cc",b),g=P("bcc",b),l=da("draft",b).val();if(null==l||"undefined"===l)l=R();d="https://b4g.baydin.com/mailcruncher/schedulereturndelay?subject="+encodeURIComponent(d);d=d+"&senders="+encodeURIComponent(JSON.stringify([]));d=d+"&guser="+encodeURIComponent(c);d=d+"&sentDates="+encodeURIComponent(JSON.stringify([]));d=d+"&threadId="+encodeURIComponent(l);d=Ua()?d+"&language=English":d+"&language=notEnglish";
l=a(".boomerangSendCondition",b).val();c=qc(b);switch(l){case "no reply":l="reply";break;case "no click":l="click";break;case "no open":l="open";break;case "always":l="none";break;default:l="none"}d=d+"&offset="+encodeURIComponent(c.valueOf());d=d+"&conditional="+encodeURIComponent(l);d=0<da("^i").length?d+"&inbox=True":d+"&inbox=False";d+="&to="+encodeURIComponent(e);d+="&cc="+encodeURIComponent(f);d+="&bcc="+encodeURIComponent(g);qa(b)&&(e=Ha(b),d+="&trackingCode="+encodeURIComponent(e));b=b.data("notes");
null==b&&(b="");return d+="&notes="+encodeURIComponent(b)}function qc(b){b=a(".conditional-caption",b).data("returnDate");null==b&&(b=Date.today().addDays(2).addHours(7).addMinutes(Math.floor(30*Math.random())-15));return b}function Na(){var b=q();a("#notes_menu",b).toggle();b=a("#b4g_inner_menu",b);b.children().not("#notes_menu").toggle();a(".random",b).hide();ba()}function nc(){Na();a("#note_entry",r).focus()}function oc(){w("A Personal or Pro subscription is required to use this feature. To add notes, please upgrade your subscription.",
"Boomerang for Gmail",{Upgrade:{text:"Upgrade to add notes","class":"b4g-button green",click:function(){window.open("https://b4g.baydin.com/subscriptions","_blank")}},"Never mind":{text:"Never mind","class":"b4g-button dialog-gray",click:function(){a(this).dialog("destroy")}}},{width:350,dialogClass:"b4g-upgradenag-dialog"});n(["notes","blocked non-subscriber"])}function fd(){a(".Cq.aqL>div>div",r).each(function(){var b=a(".bulkboomerang",this),c=0<a("[act='10']",this).filter(":visible").length;if(0===
b.length){var d=a("<div aria-haspopup='true' style='-webkit-user-select: none; -moz-user-select:none;margin-bottom:0px;outline: none;' role='button' class='J-J5-Ji W6eDmd L3 J-Zh-I J-J5-Ji Bq L3' tabindex='0'><img class='f tk3N6e-I-J3' src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/tinyboomlogo.png' style='vertical-align: middle;'/> Boomerang <div class='VP5otc-d2fWKd tk3N6e-I-J3 J-J5-Ji'> </div></div>"),e=a("[role='button']",r).filter(function(){return"20"===a(this).attr("act")}).attr("class");
d.attr("class","f "+e+" bulkboomerang b4g_button");d.css("display","inline-block");d.hide();1<a("[gh=tl]:visible").length||0<a(".qh:visible").length?(d.css("opacity",".4"),d.attr("data-tooltip","Priority Inbox and Multiple Inboxes are not yet\r\nsupported when using Boomerang from this view.\r\nPlease open each message individually to Boomerang it."),d.click(function(){w("Priority Inbox and Multiple Inboxes are not yet supported when using Boomerang from this view. <b>Please open each message individually</b> to Boomerang it.")})):
d.click(function(a){Xb(a,this,rd);n(["bulk boomerang","click"])});a(this).append(d)}c?b.css("display","inline-block"):b.hide()})}function rd(b){var c=a("#note_entry",r).val();null==c&&(c="");if(25<a('[gh="tl"] div[role="checkbox"][aria-checked="true"]').length)w("You can Boomerang at most 25 messages at a time. Please choose up to 25 messages to Boomerang.");else{Q=b=ya(b,6);var d=Ga(b,!1),e=b.valueOf(),f=a("#conditionalBoomerang",r).attr("checked"),g=a("<div class='overlay' style='background: #FFF; opacity: 0.1; filter:alpha(opacity=1);'></div>");
a("body").append(g);sd();za(function(){try{for(var b=(new td).get.selected_emails_data(),m=[],k=0;k<b.length;k++)m.push(b[k].last_email)}catch(h){g.remove();ca();w("Something went wrong while using bulk boomerang. Please try again.");return}b={conditional:f,notes:c,date:e,gmailIds:m.join()};a.ajax({type:"get",url:"https://b4g.baydin.com/mailcruncher/schedulereturnbulk2",data:b,xhr:M,success:function(b){var c=b.status;if("success"===c){ib();Ka();var e="Messages will return "+d+". ";setTimeout(function(){Va(e,
5E3)},2E3)}else"error"===c?w(b.message):"upgrade"===c?w(b.message,"Boomerang for Gmail",{Upgrade:{text:"Upgrade to schedule","class":"b4g-button green",click:function(){window.open("https://b4g.baydin.com/subscriptions","_blank")}},"Never mind":{text:"Never mind","class":"b4g-button dialog-gray",click:function(){a(this).dialog("destroy")}}},{width:350,dialogClass:"b4g-upgradenag-dialog"}):w("Something went wrong while using bulk boomerang. Please try again.")},error:function(a){w("Something went wrong while using bulk boomerang. Please try again.")},
complete:function(){ca();Ka();g.remove()},dataType:"json"})})}}function sd(){var b=q(),b=a("#b4g_inner_menu",b);0<b.length&&(b.empty(),a(".b4g-ui-datepicker").css("display","none"),b.append('<li style="list-style-type:none;text-align:center;padding:0px 2px;margin:6px 0px;">Processing...</li>'),b.append('<li style="list-style-type:none;padding:5px 10px;text-align:center;"><img src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/b4gloading.gif" alt="Loading..."></li>'),ba())}function $b(b,c,
d){var e=q(),f=function(a){ud(a,c)},g=function(){vd(c)},l=function(){w("A Pro subscription is required to use this feature. To schedule recurring messages, please upgrade your subscription.","Boomerang for Gmail",{Upgrade:{text:"Upgrade to schedule","class":"b4g-button green",click:function(){window.open("https://b4g.baydin.com/subscriptions","_blank")}},"Never mind":{text:"Never mind","class":"b4g-button dialog-gray",click:function(){a(this).dialog("destroy")}}},{width:350,dialogClass:"b4g-upgradenag-dialog"});
n(["compose dialog schedule recurring message","blocked non-subscriber"])},m=ha(b);if(-1!==m.className.indexOf("J-Zh-I")||0===m.className.indexOf("f")||-1!==m.className.indexOf("VP5otc-d2fWKd"))if(m=e.getElementById("b4g_menu"))ca(b,c);else{n(["send later compose menu","click"]);var m=d?a(b.currentTarget).position().top+73:a(b.currentTarget).position().top,k=d?a(b.currentTarget).position().left+40:a(b.currentTarget).position().left,m='<ul id="b4g_menu" tabindex="0" class="b4g_menu" style="position: absolute; padding: 0px; top:'+
m+"px; left:"+k+'px;  background-color: rgb(255, 255, 255); -webkit-user-select: none; min-width: 17em;height: auto;min-height: 398px;" role="menu" aria-haspopup="true" aria-activedescendant=""><div id="b4g_inner_menu" class="b4g_menu SK AX" style="-webkit-user-select: none; font-size:12px;padding:0;"><li id="b4g_menu_title" class="menu-caption" style="list-style-type:none;padding: 6px 11px 0 11px;">Send Message:<img id="b4g-menu-customization-button" class="Ha"  data-tooltip="Customize Menu" data-tooltip-delay="400" src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/gear.png" height="16px" style="opacity:.9;background:none;height:16px;width:16px;position:absolute;right:13px;top:6px;cursor:pointer;"></li><li class="b4g-menu-divider" style="height:1px;margin:6px 11px 6px 11px;background:#ddd;"></li><li class="b4g-standard-times"></li><li class="b4g-custom-times"></li><li class="menu-caption" style="padding:7px 11px 4px 11px;">At a specific time:</li><li class="b4g-menu-option" style="padding: 0 0 7px 11px;"><div style="color: #666; font-style: italic; font-size: 10px; margin-top: 3px;" class="b4g_menu">Examples: "Monday 9am", "Dec 23"</div><form onsubmit="return false;" autocomplete="off"><div style="padding-top:3px; vertical-align: middle;" class="b4g_menu"><input style="margin-left:1px;padding:3px 22px 2px 2px;" class="b4g_menu" type="text" name="time" id="datepicker"><input id="specific-time-submit" type="submit" value="Confirm" style="margin: 0px 7px 5px 9px;font-size:11px;vertical-align:top;" class="b4g_menu by-button by-button-secondary"></div><div style="color:#969696; margin-left: 1px;"><span id="date-preview" class="b4g_menu" style="color:green;"></span></div></form></li><li class="b4g-menu-divider" style="height:1px;margin:0px 11px;background:#ddd;"></li><li class="b4g-menu-option"><a id="recurring" style="margin:4px 0px;border-width:0px;color:black;cursor:pointer;display:block;padding: 6px 12px;" class="menu-anchor" href="javascript:void(0)"><img id="recurring-image"  class="menu-anchor" src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/recurring.png" height="16px" style="vertical-align:middle;"/><span style="vertical-align:middle;margin-left:6px;">Schedule recurring message</span></a></li></div></ul>',
k=a(".if > .aHU");1==k.length?k.append(m):a("body").append(m);m=a("#b4g_menu",e);oa.enable_menu_arrow_keys(m);d&&a("#b4g_menu_title",e).after('<li class="b4g_menu b4g-menu-option" style="padding:6px;"><input type="checkbox" id="conditionalSendLater" class="b4g_menu" name="condBoomerang"/> Only if nobody replies</li>');rb(a(".b4g-standard-times",e));nb(e);a(".b4g_menu_item",e).click(function(){var b=a(this).text();f(b);n(["boomerang menu","send later time",b])});xa(a(".b4g_menu_item",e),9.5);X=null==
Q||Q<new Date?Date.today().addDays(2).addHours(8):Q;var h=X.toString("M/d/yyyy h:mm tt"),k=a("#datepicker",e);k.val(h);k.keyup(function(){var b=a(this).val();ta(b)});k.focus(function(){var b=a(this).val();ta(b)});a("input#specific-time-submit",e).click(function(a){kc(a,f)});h=qb();if(0<h.length){for(var p=0;p<h.length;p++){var U=mb(h[p],null);a(".b4g-custom-times",e).append(U)}a(".b4g-custom-menu-item",e).click(function(){var b=a(this).text();lc(b,f);n(["b4g menu","picked",b])});xa(a(".b4g-custom-menu-item",
e),9.5)}fc(e);if(!d||J())J()?a(c).closest(".HE").after(m):a(c).parent().append(m);h=a("#b4g-menu-customization-button",e);h.click(function(){pb()});h.hover(function(){a(this).css("opacity","1")},function(){a(this).css("opacity",".9")});h=a("a#recurring",e);h.click(function(){n(["compose dialog schedule recurring message","clicked"]);tb(wd,g,l)});h.hover(function(){a(this).addClass("J-N-JT")},function(){a(this).removeClass("J-N-JT")});a(e).bind("click",{owner:c},Za);$a(k);a(".b4g-ui-datepicker-trigger",
e).css("cursor","pointer");a(".b4g-ui-datepicker-trigger",e).css("margin-left","-21px");a(".b4g-ui-datepicker-trigger",e).css("margin-top","-2px");a(".b4g-ui-datepicker-trigger",e).hover(function(){a(this).css("box-shadow","0px 0px 3px #aaa")},function(){a(this).css("box-shadow","none")});k.mousedown(function(a){a.stopImmediatePropagation()});k.css("-moz-user-select","text");k.parents().each(function(){a(this).css("-moz-user-select","text")});a("#conditionalSendLater",e).click(function(){0<a("[name='subject']:visible",
e).length&&(Tc("<p>If you change the message subject, the new message becomes part of a separate conversation, so Boomerang's response tracking will not work properly.</p><p>To ensure that responses are detected accurately, please copy your message text, discard this email, and paste the text into a new reply.</p>","Did you change the subject?"),a(this).attr("checked",!0))});k.select();a("span#date-preview.b4g_menu",e).text("");ba();d?(d=0<a(".aDd").length,J()&&d?(b=a(m).height()-198,a(m).css("top",
"-"+b+"px"),a(m).css("left","39px")):(m=a("#b4g_menu"),m.position({of:a(b.currentTarget),my:"left bottom",at:"left top"}),d=m.css("top"),-35>parseInt(d)&&(m.position({of:a(b.currentTarget),my:"left top",at:"left bottom",collision:"none"}),b=m.offset().top,a("#b4g_menu").closest(".Tm.aeJ").scrollTop(b)))):(b=a(m).height()-47,a(m).css("top","-"+b+"px"))}}function ud(b,c){var d=Ea(c),e=u(),f=da("subjectbox",d).val();if(200<f.length)w("You've exceeded the maximum subject length. Please shorten your subject and try again.");
else{var g=a(".J-JN-M-I.J-J5-Ji.az2.az4.L3",d),g=0<g.length?Ta(g.text()):e,l=P("to",d),m=P("cc",d),k=P("bcc",d);if(l||m||k)if(0<a(".vQ .vT",d).length)w("One of the addresses you entered is not recognized. Please make sure that all addresses are properly formed.");else{var h=Sa,h=(l+" "+m+" "+k).toLowerCase().match(h),h=rc(h);if(100<h.length)w("Boomerang limits you to 100 recipients at a time. Please enter a shorter list.");else{var p=ya(b,9.5);Q=p;var U=Ga(p,!1),v=new Date,D="None";if(a(".boomerangSendCheck",
d).is(":checked")){h=qc(d);if(h<=p){w("Your Send Later message must be scheduled earlier than your Boomerang reminder.");return}D=h.valueOf()}var n="";switch(a(".boomerangSendCondition",d).val()){case "no reply":n="reply";break;case "no click":n="click";break;case "no open":n="open";break;case "always":n="none";break;default:n="none"}var r="False",h=q();a("#conditionalSendLater",h).attr("checked")&&(r="True");da("draft",d).val();ca();a(d).append('<div class="b4g-ui-widget-overlay b4g-overlay"></div>').append('<div class="b4g-overlay" style="position: absolute; top: 50%; left: 50%; margin: -38px 0 0 -120px; background: white; width: 220px; text-align: center; padding: 15px;"><div style="font-size: 14px; padding-bottom: 15px;">Scheduling message...</div><img height="32" width="32" src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/b4gloading.gif"></div>');
0<a(".dQ",d).length?w("Please wait for your attachments to upload before sending."):lb(d,function(a){if(a)Rb();else{var b=da("draft",d).val();if(null==b||"undefined"===b)b=R();a="https://b4g.baydin.com/mailcruncher/schedulesend?guser="+encodeURIComponent(e);a+="&from="+encodeURIComponent(g);a+="&subject="+encodeURIComponent(f);a+="&rank="+encodeURIComponent("0/0");a+="&esttimesaved="+encodeURIComponent(v.valueOf());a+="&offset="+encodeURIComponent(p.valueOf());a+="&to="+encodeURIComponent(l);a+="&cc="+
encodeURIComponent(m);a+="&bcc="+encodeURIComponent(k);a+="&boomerangoffset="+encodeURIComponent(D);a+="&boomerangconditional="+encodeURIComponent(n);a+="&sendlaterconditional="+encodeURIComponent(r);a=a+"&threadId="+encodeURIComponent(b);a=Ua()?a+"&language=English":a+"&language=notEnglish";qa(d)&&(b=Ha(d),a+="&trackingCode="+encodeURIComponent(b));b=d.data("notes");null==b&&(b="");a+="&notes="+encodeURIComponent(b);xd(a,U,d,{condition:r})}})}}else w("Please enter a recipient.")}}function xd(b,c,
d,e){e=e||{};var f=String(document.location),g="Message will be sent "+c+". ";qa(d)&&Ha(d);za(function(){setTimeout(function(){a(".Ha",d).each(pa)},0);Y(b,function(a,b,c){1===a?(La({type:"send-later",isIfNoReply:"True"===e.condition}),ja.expire_cache(),J()?Xa(g,0,"send_new_compose"):Da(d)?Va(g,5E3):Ka()):B(a)?Z(a):20===a?(Z(a),window.location=f):1!==a&&(w("Attempt failed: "+ea[a]),window.location=f)},g);J()||Da(d)||Xa(g,0,"send_new_compose")},function(){a(".b4g-overlay",d).remove()})}function yd(){var b=
a(".gU.Up > .J-J5-Ji");if(!(0<b.find(".by-button").length)){var c=la.b4goldgid,d=la.b4gnewtid,e=a('<button class="by-button by-button-secondary" style="height: 30px; margin: 6px 0;"><span class="by-button-text">Save message</span></button>'),f=a('<button class="by-button" style="height: 30px; margin: 6px 0 6px 5px;"><span class="by-button-text">Cancel</span></button>'),g=!1,l=function(b,c){var d=b.responseText||b.error;"string"!==a.type(d)&&(d="Sorry, there was an error. We can't edit your message at the moment. Try again later.");
alert(d);e.find(".by-button-text").text("Save message");f.find(".by-button-text").text("Cancel")};e.click(function(){var b="https://b4g.baydin.com/inline-manage/update-",b=b+(0<a(".b4g-inline-send").length?"send-later":"recurring");e.find(".by-button-text").text("Saving...");var f=Ea(e);lb(f,function(e){a.ajax({type:"post",url:b,data:{oldGmailId:c,newThreadId:d},xhr:M,success:function(a){a.success?window.close():l(a)},error:l,dataType:"json"});g=!0})});f.click(function(){f.find(".by-button-text").text("Cancelling...");
a.ajax({type:"post",url:"https://b4g.baydin.com/inline-manage/delete-draft",data:{gmailId:la.b4gdraftgid},xhr:M,success:function(a){a.success?window.close():l(a)},error:l,dataType:"json"});g=!0});b.append(e).append(f).children(".T-I-atl").remove();a(".T-I.J-J5-Ji.aoO.L3.T-I-ax7").hide();a(".T-I.J-J5-Ji.Uo.T-I-atl.L3").hide();var b=a(".gU.er"),m=b.position();m&&a(".eq").css("left",m.left+b.outerWidth()-4);window.onbeforeunload=window.onunload=function(){g||f.click();window.opener.postMessage("b4g-edit-window-close",
"https://mail.google.com")}}}function ad(){yd();a(".adf.ads:visible").length&&a(".T-I-JN.L3 .gx").each(pa).click();0<a(".h7.Jux0I").length&&a(".h7:not(.Jux0I)").hide();a(".nH.oy8Mbf.qp",r).hide();a(".Bu.y3",r).hide();a(".nH.Gn",r).hide();a(".cf.gz",r).hide();a(".Cp",r).hide();a("[role='button']",r).not(".conditional-caption, .wG.J-Z-I").filter(function(){return 0>=a(this).closest(".aDh, [role='toolbar']").length}).hide();a(".oh, .az5 .Uz").hide();a(".boomerang-button",r).hide();a(".d2",r).hide();
a(".hP",r).hide();a(".nH > .ha").hide();a(".aeH").hide();a(".ar5.J-J5-Ji").hide();a(".mq, .ae4").hide();a(".PS").hide();a(".adz").hide();a(".w-asV.aiw").hide();a(".AT").hide();a("body").addClass("b4g-state-edit-message").attr("style","overflow: auto!important");a(".nH.oy8Mbf.nn.aeN",r).css({visibility:"hidden",width:100});a(".gB.acO").css({"padding-top":0,border:"none"});a(".adn").css("padding-bottom",0);a(".G3.G2").css("border","none");a(".aeJ").css({height:"auto","padding-right":0,overflow:"hidden"});
a(".aeJ")[0].scrollTop=0;var b=a(".aoY").width()-(a(".b4g-inline-manage:visible").outerWidth()-a(".I5").outerWidth());a(".aoY").css({visibility:"hidden"}).width(b);a("#b4g_clicktoclose",r).click(function(){Wa=!1;window.close();setTimeout(function(){window.location="mail.google.com"},250)})}function vd(b){var c=q(),d=Ea(b);ca();if("Old Safari"===t)alert("This feature is available in Safari versions 5.1 and higher. Please update Safari to use this feature.");else{b=P("to",d);var e=P("cc",d),f=P("bcc",
d);b||e||f?0<a(".vQ .vT",d).length?w("One of the addresses you entered is not recognized. Please make sure that all addresses are properly formed."):(a(".dialogdiv").remove(),a("body",c).append(a("<div class='dialogdiv' style='display:none;'><div id='recurring_dialog'><div id='start_date_time' class='recurring_field'><span class='recurring-row-title'>Starts</span><span id='start_date' class='recurring_right_col'><input id='start_date_input' type='text' name='starts' size='15'/><span id='start_time'>Send Time: <input id='start_time_input' name='time' size='10'/></span></span></div><div  class='recurring_field'><span class='recurring-row-title'>Repeats</span><select id='frequency'  class='recurring_right_col'><option value='day'> Daily</option><option value='week' selected='selected'>Weekly</option><option value='weekday' >Every Weekday</option><option value='month' >Monthly on the same date</option><option value='monthweek' >Monthly on the same week</option><option value='year'>Yearly</option></select></div><div id='num_time_interval'  class='recurring_field'> Every <span class='recurring_right_col'> <input type='number' value='1' min='1' max='12' name='num_interval' id='num_interval'/><span id='interval'> week</span><div id='date_position_div' style='display: inline-block;'><span class='recurring_field'>Date: <input type='number' value='1' min='1' max='31' id='date_position' name='date_position'/></span></div><div id='set_position_div' style='display: inline-block;'><span class='recurring_field'><select id='set_position'><option value='1'>First</option><option value='2'>Second</option><option value='3'>Third</option><option value='4'>Fourth</option><option value='-1'>Last</option></select></span><span class='recurring_field'><select id='set_position_day'><option value='6'>Sunday</option><option value='0'>Monday</option><option value='1'>Tuesday</option><option value='2'>Wednesday</option><option value='3'>Thursday</option><option value='4'>Friday</option><option value='5'>Saturday</option></select></span></div></div><div id='days_of_week'  class='recurring_field'><span class='recurring-row-title'>On</span><span class='recurring_right_col' style='vertical-align: top;'><input class='day_cb' type='checkbox' value='6' name='Sun' style='margin-left:0px'/> Sun<input class='day_cb' type='checkbox' value='0' name='Mon'/> Mon<input class='day_cb' type='checkbox' value='1' name='Tue'/> Tue<input class='day_cb' type='checkbox' value='2' name='Wed'/> Wed<input class='day_cb' type='checkbox' value='3' name='Thur'/> Thur<input class='day_cb' type='checkbox' value='4' name='Fri'/> Fri<input class='day_cb' type='checkbox' value='5' name='Sat'/> Sat</span></div><div  class='recurring_field'><span class='recurring-row-title'> Ends </span><div class='recurring_right_col' style='display:inline-block;vertical-align: middle; line-height: 24px;'><div style='margin-bottom:3px;'><input type='radio' id='radio_num_occurences' name='end_group' checked/> After <input type='number' value='10' min='1' max='100' id='num_occurences' name='num_occurences'/> messages</div><div style='margin-bottom:3px;'><input type='radio' id='radio_end_date' name='end_group'/> On <input id='end_date' value='' name='end_date' size='15'/></div><div style='margin-bottom:3px;'><input type='radio' id='radio_no_end' name='end_group'/> No end date <br/></div></div></div><br/><br/><br/><br/><div id='summary' class='recurring_field'><span class='recurring-row-title'>Summary:</span><div id='recurring_feedback' class='recurring_right_col' style='display:inline-block;padding-right:20px;'> </div></div><div class='b4g-button-container' align='center'><button id='schedule_recurring' class='b4g-button red' style='margin:4px 10px;'> Schedule </button><button id='cancel_recurring' class='b4g-button dialog-gray' style='margin:4px 10px;'>Cancel</button></div><br/></div></div>")),
a(".dialogdiv",c).dialog({modal:!0,title:"Schedule Recurring Message",closeOnEscape:!0,width:530,dialogClass:"recurringDialog"}),a(".dialogdiv",c).css({padding:"0px"}),a("#start_date_input",c).datepicker({showOn:"button",buttonImage:"https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/calendarpicker_17x15.png",buttonImageOnly:!0,constrainInput:!1,defaultDate:0,minDate:0}),a("#end_date",c).datepicker({showOn:"button",buttonImage:"https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/calendarpicker_17x15.png",
buttonImageOnly:!0,constrainInput:!1,defaultDate:0,minDate:0,onClose:function(b,c){a("#radio_end_date").attr("checked",!0)}}),a(".b4g-ui-datepicker-trigger",c).css({cursor:"pointer",margin:"-2px 0px 0px -25px"}).hover(function(){a(this).css("box-shadow","0px 0px 3px #aaa");a(this).css("-moz-box-shadow","0px 0px 3px #aaa")},function(){a(this).css("box-shadow","none");a(this).css("-moz-box-shadow","none")}),a("#schedule_recurring",c).click(function(){zd(d);n("compose dialog recurring dialog","click",
"schedule recurring")}),a("#cancel_recurring",c).click(function(){a(".dialogdiv").dialog("close")}),b=(new Date).addMinutes(10),a("#start_date_input",c).val(b.toString("MM/dd/yyyy")),a("#start_time_input",c).val(b.toString("h:mm tt")),sc(),a("#frequency").change(),J()&&a("#recurring_dialog",c).css("font-size","1.3em"),n("compose dialog recurring dialog","show")):w("Please enter a recipient.")}}function zd(b){a(".dialogdiv").dialog("close");a(b).append('<div class="b4g-ui-widget-overlay b4g-overlay"></div>').append('<div class="b4g-overlay" style="position: absolute; top: 50%; left: 50%; margin: -38px 0 0 -120px; background: white; width: 220px; text-align: center; padding: 10px;"><img height="32" width="32" src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/b4gloading.gif"><br><span style="font-size: 14px;">Setting up recurring messages</span></div>');
lb(b,function(c){c?Rb():Ad(b,function(){a(".b4g-overlay",b).remove()})})}function Ad(b,c){function d(){Y(F,function(d,e,f){1===d||B(d)?(setTimeout(function(){c(null);a(".Ha",b).each(pa)},0),B(d)&&Z(d),ja.expire_cache()):20===d?(Z(d),c({"pay-wall":!0})):(w("Attempt failed: "+ea[d]),c({failure:ea[d]}))},x);Xa(x,0,"send_new_compose")}c=c||a.noop;if(0<a(".dU",r).length)w("Please wait for your attachments to upload before sending."),setTimeout(function(){c({"active-attachments":!0})});else{var e=new Date,
f=u(),g=da("subjectbox",b).val();if(200<g.length)w("You've exceeded the maximum subject length. Please shorten your subject and try again."),setTimeout(function(){c({"long-subject":!0})});else{var l=a(".J-JN-M-I.J-J5-Ji.az2.az4.L3",b),l=0<l.length?Ta(l.text()):f,m=P("to",b),k=P("cc",b),h=P("bcc",b);if(m||k||h)if(0<a(".vQ .vT",b).length)w("One of the addresses you entered is not recognized. Please make sure that all addresses are properly formed."),setTimeout(function(){c({"invalid-recipient":!0})});
else{var p=Sa,p=(m+" "+k+" "+h).toLowerCase().match(p),p=rc(p);if(100<p.length)w("<p>Boomerang limits you to 100 recipients at a time. Please enter a shorter list.</p>"),setTimeout(function(){c({"too-many-recipients":!0})});else if(p=a("#start_date_input").val()+" "+a("#start_time_input").val(),p=Date.parse(p),null==p||p<new Date)alert("Invalid start date"),setTimeout(function(){c({"invalid-start-date":!0})});else{var n=ub(),v=null;"monthweek"==a("#frequency").val()&&(v=a("#set_position").val());
var D=a("#num_interval").val(),L=vb(p);if(""===L)alert("You must select a day of the week."),setTimeout(function(){c({"no-day-selected":!0})});else{var t="None",q="None";if(a("#radio_num_occurences").attr("checked"))t=a("#num_occurences").val();else if(a("#radio_end_date").attr("checked")){q=a("#end_date").val()+" "+a("#start_time_input").val();q=Date.parse(q);if(null==q){alert("Invalid end date");setTimeout(function(){c({"invalid-end-date":!0})});return}q=q.valueOf()}var z=da("draft",b).val();if(null==
z||"undefined"===z)z=R();var F="https://b4g.baydin.com/mailcruncher/schedulerecurring",F=F+("?guser="+encodeURIComponent(f)),F=F+("&from="+encodeURIComponent(l)),F=F+("&subject="+encodeURIComponent(g)),F=F+("&to="+encodeURIComponent(m)),F=F+("&cc="+encodeURIComponent(k)),F=F+("&bcc="+encodeURIComponent(h)),F=F+("&esttimesaved="+encodeURIComponent(e.valueOf())),F=F+("&frequency="+encodeURIComponent(n)),F=F+("&interval="+encodeURIComponent(D));v&&(F+="&setPosition="+encodeURIComponent(v));F+="&utc_weekday="+
encodeURIComponent(L);F+="&start="+encodeURIComponent(p.valueOf());F+="&end="+encodeURIComponent(q);F+="&num_occurences="+encodeURIComponent(t);F+="&threadId="+encodeURIComponent(z);F=Ua()?F+"&language=English":F+"&language=notEnglish";qa(b)&&(e=Ha(b),F+="&trackingCode="+encodeURIComponent(e));var x="Recurring message scheduled: "+a("#recurring_feedback").text();za(d)}}}else w("Please enter a recipient."),setTimeout(function(){c({"no-recipient":!0})})}}}function Bd(b){var c=q();if("Old Safari"===
t)alert("This feature is available in Safari versions 5.1 and higher. Please update Safari to use this feature.");else{a(".dialogdiv").remove();var d=a("<div class='dialogdiv' style='display:none;'><div id='recurring_dialog'><div id='start_date_time' class='recurring_field'><span class='recurring-row-title'>Starts</span><span id='start_date' class='recurring_right_col'><input id='start_date_input' type='text' name='starts' size='15'/><span id='start_time'>Send Time: <input id='start_time_input' name='time' size='10'/></span></span></div><div  class='recurring_field'><span class='recurring-row-title'>Repeats</span><select id='frequency'  class='recurring_right_col'><option value='day'> Daily</option><option value='week' selected='selected'>Weekly</option><option value='weekday' >Every Weekday</option><option value='month' >Monthly on the same date</option><option value='monthweek' >Monthly on the same week</option><option value='year'>Yearly</option></select></div><div id='num_time_interval'  class='recurring_field'> Every <span class='recurring_right_col'> <input type='number' value='1' min='1' max='12' name='num_interval' id='num_interval'/><span id='interval'> week</span><div id='date_position_div' style='display: inline-block;'><span class='recurring_field'>Date: <input type='number' value='1' min='1' max='31' id='date_position' name='date_position'/></span></div><div id='set_position_div' style='display: inline-block;'><span class='recurring_field'><select id='set_position'><option value='1'>First</option><option value='2'>Second</option><option value='3'>Third</option><option value='4'>Fourth</option><option value='-1'>Last</option></select></span><span class='recurring_field'><select id='set_position_day'><option value='6'>Sunday</option><option value='0'>Monday</option><option value='1'>Tuesday</option><option value='2'>Wednesday</option><option value='3'>Thursday</option><option value='4'>Friday</option><option value='5'>Saturday</option></select></span></div></div><div id='days_of_week'  class='recurring_field'><span class='recurring-row-title'>On</span><span class='recurring_right_col' style='vertical-align: top;'><input class='day_cb' type='checkbox' value='6' name='Sun' style='margin-left:0px'/> Sun<input class='day_cb' type='checkbox' value='0' name='Mon'/> Mon<input class='day_cb' type='checkbox' value='1' name='Tue'/> Tue<input class='day_cb' type='checkbox' value='2' name='Wed'/> Wed<input class='day_cb' type='checkbox' value='3' name='Thur'/> Thur<input class='day_cb' type='checkbox' value='4' name='Fri'/> Fri<input class='day_cb' type='checkbox' value='5' name='Sat'/> Sat</span></div><div  class='recurring_field'><span class='recurring-row-title'> Ends </span><div class='recurring_right_col' style='display:inline-block;vertical-align: middle; line-height: 24px;'><div style='margin-bottom:3px;'><input type='radio' id='radio_num_occurences' name='end_group' checked/> After <input type='number' value='10' min='1' max='100' id='num_occurences' name='num_occurences'/> messages</div><div style='margin-bottom:3px;'><input type='radio' id='radio_end_date' name='end_group'/> On <input id='end_date' value='' name='end_date' size='15'/></div><div style='margin-bottom:3px;'><input type='radio' id='radio_no_end' name='end_group'/> No end date <br/></div></div></div><br/><br/><br/><br/><div id='summary' class='recurring_field'><span class='recurring-row-title'>Summary:</span><div id='recurring_feedback' class='recurring_right_col' style='display:inline-block;padding-right:20px;'> </div></div><div class='b4g-button-container' align='center'><button id='schedule_recurring' class='b4g-button red' style='margin:4px 10px;'> Schedule </button><button id='cancel_recurring' class='b4g-button dialog-gray' style='margin:4px 10px;'>Cancel</button></div><br/></div></div>");
a("body",c).append(d);a(".dialogdiv",c).dialog({modal:!0,title:"Schedule Recurring Message",closeOnEscape:!0,width:530,dialogClass:"recurringDialog"});a(".dialogdiv",c).css({padding:"0px"});a("#start_date_input",c).datepicker({showOn:"button",buttonImage:"https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/calendarpicker_17x15.png",buttonImageOnly:!0,constrainInput:!1,defaultDate:0,minDate:0});a("#end_date",c).datepicker({showOn:"button",buttonImage:"https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/calendarpicker_17x15.png",
buttonImageOnly:!0,constrainInput:!1,defaultDate:0,minDate:0,onClose:function(b,c){a("#radio_end_date").attr("checked",!0)}});a(".b4g-ui-datepicker-trigger",c).css({cursor:"pointer",margin:"-2px 0px 0px -25px"}).hover(function(){a(this).css("box-shadow","0px 0px 3px #aaa");a(this).css("-moz-box-shadow","0px 0px 3px #aaa")},function(){a(this).css("box-shadow","none");a(this).css("-moz-box-shadow","none")});sc();a("#schedule_recurring").click(function(){(b||schedule_recurring)()});a("#cancel_recurring").click(function(){a(".dialogdiv").dialog("close")});
c=(new Date).addMinutes(10);a("#start_date_input").val(c.toString("MM/dd/yy"));a("#start_time_input").val(c.toString("h:mm tt"));return d}}function tc(a){return a.replace("6","x").replace("5","6").replace("4","5").replace("3","4").replace("2","3").replace("1","2").replace("0","1").replace("x","0")}function uc(a){return a.replace("0","x").replace("1","0").replace("2","1").replace("3","2").replace("4","3").replace("5","4").replace("6","5").replace("x","6")}function ub(){var b=a("#frequency").val();
switch(b){case "day":b="DAILY";break;case "week":b="WEEKLY";break;case "weekday":b="WEEKLY";break;case "month":b="MONTHLY";break;case "monthweek":b="MONTHLY";break;case "YEARLY":b="YEARLY";break;default:b="YEARLY"}return b}function vb(b){for(var c=a(".day_cb:checked").map(function(b,c){return a(c).val()}).get(),d="",e=0;e<c.length;e++)d=""===d?d+("("+c[e]):d+(","+c[e]);""!==d&&(d+=")");if(b.getUTCDay()>b.getDay()||0===b.getUTCDay()&&6===b.getDay())d=tc(d);else if(b.getUTCDay()<b.getDay()||6===b.getUTCDay()&&
0===b.getDay())d=uc(d);return d}function Aa(){a("#recurring_feedback").text("");var b="";try{var c=ub(),d=a("#num_interval").val(),e=null;"monthweek"==a("#frequency").val()&&(e=a("#set_position").val());var f=a("#start_date_input").val()+" "+a("#start_time_input").val(),g=Date.parse(f),l=g.getUTCMinutes(),m=g.getUTCHours(),k=g.getUTCDate(),h=g.getUTCMonth()+1,p=vb(g);var n=Date.UTC((new Date).getFullYear(),h-1,k,m,l),v=new Date(n),l=p;if(v.getUTCDay()>v.getDay()||0===v.getUTCDay()&&6===v.getDay())l=
uc(p);else if(v.getUTCDay()<v.getDay()||6===v.getUTCDay()&&0===v.getDay())l=tc(p);for(var p="",D=l.replace("(","").replace(")",""),l=0;l<ra.length;l++)D=D.replace(l.toString(),ra[l]);p+=D;if(""===p)b="";else{D="Every ";1<d&&(D+=d+" ");switch(c){case "DAILY":D+="day";break;case "WEEKLY":D+="week";break;case "MONTHLY":D+="month";break;case "YEARLY":D+="year"}1<d&&(D+="s");D+=", ";"WEEKLY"===c&&(D+="on "+p.split(",").join(", ")+" ");if("MONTHLY"===c)if(null==e)D+="on day "+v.getDate(),28<v.getDate()&&
(D+="(or the last day of the month)"),D+=" ";else{switch(e){case "-1":D+="on last ";break;case "1":D+="on first ";break;case "2":D+="on second ";break;case "3":D+="on third ";break;case "4":D+="on fourth "}D+=p+" "}"YEARLY"===c&&(D+="on "+v.toString("MMM d")+" ");b=D+="at "+v.toString("h:mm tt")}}catch(L){}a("#recurring_feedback").text(b)}function vc(){a("input.day_cb").attr("checked",!0);a("#days_of_week").css("display","none")}function wc(){a("#days_of_week").css("display","block")}function sc(){function b(){var b=
a("#set_position_day").val();a("input.day_cb").attr("checked",!1);a("input.day_cb").filter("[value="+b+"]").attr("checked",!0)}a("#frequency").change(function(){a("#num_interval").val(1);"week"===a("#frequency").val()?(wc(),a("input.day_cb").attr("checked",!1),a("#set_position_div").hide(),a("#date_position_div").hide(),a("#interval").text(" week")):"weekday"===a("#frequency").val()?(wc(),a("input.day_cb").filter("[value='0'], [value='1'], [value='2'], [value='3'], [value='4']").attr("checked",!0),
a("input.day_cb").filter("[value='5'], [value='6']").attr("checked",!1),a("#set_position_div").hide(),a("#date_position_div").hide(),a("#interval").text(" week")):"monthweek"==a("#frequency").val()?(vc(),b(),a("#set_position_div").show(),a("#date_position_div").hide(),a("#interval").text(" month")):("month"==a("#frequency").val()?a("#date_position_div").show():a("#date_position_div").hide(),vc(),a("#set_position_div").hide(),a("#interval").text(" "+a("#frequency").val()));a("#start_date_input").change()});
a("#num_interval").change(function(){Aa()});a("#num_interval").click(function(){Aa()});a(".day_cb, #start_time_input").change(function(){Aa()});a("#start_time_input").keyup(function(){Aa()});a("#start_date_input").change(function(){var c=a("#start_date_input").val(),c=Date.parse(c),d;d=c;null==d&&(d=new Date);var e=d.getDate(),e=Math.floor((e-1)/7);d=d.getDay();e+=1;5==e&&(e=-1);--d;-1==d&&(d=6);d={n:e,weekday:d};a("#set_position").val(d.n);a("#set_position_day").val(d.weekday);a("#date_position").attr("max",
Date.getDaysInMonth(c.getYear(),c.getMonth()));a("#date_position").val(c.getDate());"week"!=a("#frequency").val()&&"monthweek"!=a("#frequency").val()||b();Aa()});a("#set_position, #set_position_day").change(function(){b();var c=parseInt(a("#set_position").val()),d=parseInt(a("#set_position_day").val()),c=xc(c,d);a("#start_date_input").val(c.toString("M/d/yyyy"));Aa()});a("#date_position").change(function(){var b=a("#start_date_input").val(),b=Date.parse(b),d=parseInt(a(this).val());try{b.set({day:d});
var e=new Date;if(b<e){var f=(e.getMonth()+1)%12;b.set({month:f})}}catch(g){g instanceof RangeError&&b.moveToLastDayOfMonth()}a("#start_date_input").val(b.toString("M/d/yyyy"));Aa()})}function yc(){return Math.random().toString(36).substr(5)+Date.now().toString(36)}function zc(b){a("a[href^='http://mailstat.us/tr/opt-out?guid'],img[src^='http://mailstat.us/tr/'],.b4g-open-track",b).remove()}function Cd(b,c){a("a[href^='http://mailstat.us/tr/opt-out']",b).not(":has(img[src^='http://mailstat.us/tr/'])").remove().end().not("[href='http://mailstat.us/tr/opt-out?guid="+
c+"']").remove();a("img[src^='http://mailstat.us/tr/']",b).filter(function(){return"a"!==this.parentNode.tagName.toLowerCase()}).remove()}function Ac(b){return b.tagName?"img"===b.tagName.toLowerCase()?[b]:a(b).find("a, img").andSelf().filter("a, img").toArray():[]}function Oa(b){var c=a(".b4g-tracking-toggle",b).data("is-selected"),d=ma(b);if(c){d.data("has-tracking-opt-out-observer")||((new ka(function(c){for(var d=0;d<c.length;d++)for(var e=c[d],m=a.map(e.addedNodes||[],Ac),e=a.map(e.removedNodes||
[],Ac),m=[].concat(m,e),e=0;e<m.length;e++){var k=m[e],h=k.tagName.toLowerCase();if("a"===h&&0===k.href.indexOf("http://mailstat.us/tr/opt-out?guid=")){Oa(b);return}if("img"===h&&0===k.src.indexOf("http://mailstat.us/tr/")){Oa(b);return}}})).observe(d[0],{childList:!0,subtree:!0}),d.data("has-tracking-opt-out-observer",!0));c=d.data("thread-guid")||yc();d.data("thread-guid",c);var e=a("a[href='http://mailstat.us/tr/opt-out?guid="+c+"']:has(img[src^='http://mailstat.us/tr/'])",d);0<e.length?(Cd(d,
c),e.slice(1).remove().end().addClass("b4g-open-track")):(zc(d),e=a('<a href="http://mailstat.us/tr/opt-out?guid='+c+'"><img src="http://mailstat.us/tr/optout-blk-nologo.png?guid='+c+'" /></a>').addClass("b4g-open-track"),d.append(e),e.prev().is("br")||e.before("<br/>"))}else zc(d)}function Dd(a){ma(a).find("*:not(a)").andSelf().replaceText(Ed,function(a,b){var e=b;0!==e.indexOf("http://")&&0!==e.indexOf("https://")&&(e="http://"+e);return'<a href="'+e+'" target="_blank">'+b+"</a>"})}function wb(a){var c=
Fd.exec(a);return c?c[1]:a}function Gd(b){a("a[href^='http://mailstat.us/tr/t/']",b).each(function(){var b=a(this);if(b.is(".b4g-track-dummy"))b.remove();else{var d=wb(this.href);b.attr("href",d).removeClass("b4g-track-link")}})}function Bc(b){return b.tagName?"a"===b.tagName.toLowerCase()?[b]:a(b).find("a").toArray():[]}function bb(b){var c=a(".b4g-tracking-toggle",b).data("is-selected"),d=ma(b);if(c)if(d.data("has-click-tracking-observer")||((new ka(function(c){for(var d=0;d<c.length;d++){var e=
c[d],m=a.map(e.addedNodes||[],Bc),k=a.map(e.removedNodes||[],Bc),k=[].concat(m,k);"attributes"===e.type&&k.push(e.target);for(e=0;e<k.length;e++){var h=k[e],p=a(h).removeClass("b4g-track-link").attr("href");if("/"!==p.charAt(0)){-1<a.inArray(h,m)&&(h.href=wb(p));bb(b);return}}}})).observe(d[0],{childList:!0,attributes:!0,subtree:!0,attributeFilter:["href"]}),d.data("has-click-tracking-observer",!0)),c=a("a:not(.b4g-track-wont)",d),c=c.each(function(){var b=this.href;0===b.indexOf("mailto:")&&a(this).addClass("b4g-track-wont");
0===b.indexOf("http://mailstat.us/tr/opt-out?guid=")&&a(this).addClass("b4g-track-wont")}).not(".b4g-track-wont"),0>=c.length)c=a('<a href="http://mailstat.us/tr/t/dummy"></a>').addClass("b4g-track-link b4g-track-dummy").css({border:"0","text-decoration":"none",width:"1px"}).hide(),d.append(c);else{if(c.filter("[href^='http://mailstat.us/tr/t/dummy']:not(.b4g-track-dummy)").addClass("b4g-track-dummy"),c=c.not(".b4g-track-dummy"),0<c.length&&a(".b4g-track-dummy",d).remove(),c=c.not(".b4g-track-link, .b4g-track-wont"),
!(0>=c.length)){var e=d.data("thread-guid")||yc();d.data("thread-guid",e);d=c.not("[href^='http://mailstat.us/tr/t/"+e+"']");0>=d.length?c.addClass("b4g-track-link"):d.each(function(){var b;b=this.href;b=wb(b);b="http://mailstat.us/tr/t/"+e+"/"+Hd()+"/"+b;a(this).attr("href",b).addClass("b4g-track-link")})}}else Gd(d)}function bc(b){var c=ma(b),d=a(".J-Z-aEu-I.J-Z-I.J-J5-Ji",b).first().clone().addClass("b4g-tracking-toggle").removeClass("gU").hover(function(){a(this).addClass("J-Z-I-JW")},function(){a(this).removeClass("J-Z-I-JW")}).bind("b4g-toggle-state",
function(b,c){var d=a(this);null==c&&(c="true"!==d.attr("aria-selected"));d.toggleClass("J-Z-I-KO",c).attr("aria-selected",c+"");a(this).data("is-selected",c);c&&ja.enable()}).click(function(){var c=a(this);za(function(){c.trigger("b4g-toggle-state");cb(function(a){!a&&c.data("is-selected")&&Id(b)})})}).attr("data-tooltip","Request read receipt and track clicks").attr("command","").attr("aria-label","Request read receipt and track clicks").attr("id",null).css({width:"24px",display:"inline-block",
margin:"-1px 5px 0 5px",padding:"3px 2px 0 2px","text-align":"center"}).find(".aaB").attr("style","background-image: url(https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/tracking-toggle.png) !important;background-size: 21px !important;background-position: center 0 !important;margin: 0;opacity: 1;").end();a(".sendLaterTable .b4g-tracking-toggle-holder",b).replaceWith(d);var e=0<a("a[href^='http://mailstat.us/tr/t/']",c).length,e=e||0<a("a[href^='http://mailstat.us/tr/opt-out?guid=']:has(img[src^='http://mailstat.us/tr/'])",
c).length;d.trigger("b4g-toggle-state",e).bind("b4g-toggle-state",function(){if(c.data("is-plain-text"))return a(this).data("is-selected")&&(w("Read receipts and click tracking do not work with plain text emails."),a(this).trigger("b4g-toggle-state",!1)),!1;Oa(b);bb(b)});a(".aoO, .send-later-button",b).bind("mousedown focus",function(){var b=a(this).closest(".I5,.fN");Oa(b);d.data("is-selected")&&Dd(b);bb(b)});Oa(b);bb(b);Sc(b)}function qa(b){return a(".b4g-tracking-toggle",b).data("is-selected")}
function Ha(a){return ma(a).data("thread-guid")}function Jd(a){var c=u(),d=da("subject",a).val(),e=P("to",a),f=P("cc",a),g=P("bcc",a),l=da("draft",a).val();a=Ha(a);d="https://b4g.baydin.com/mailcruncher/trackemail?subject="+encodeURIComponent(d);d=d+"&guser="+encodeURIComponent(c);d=d+"&threadId="+encodeURIComponent(l);d=d+"&trackingCode="+encodeURIComponent(a);d+="&to="+encodeURIComponent(e);d+="&cc="+encodeURIComponent(f);return d+="&bcc="+encodeURIComponent(g)}function dc(a){var c=Jd(a);Ha(a);
Y(c,function(a,b,c){B(a)||20===a?Z(a):1!==a?w("Your most recent Boomerang-on-Send failed. To Boomerang your sent email, please open your message in 'Sent Mail' and Boomerang the message manually. <br/><br/> Error Details:<br/> "+ea[a]):ja.expire_cache()},"success")}function hd(){var b=q();a(".dialogdiv").remove();a("body",b).append(a("<div class='dialogdiv' style='display:none; margin: 3px; color: #333'><div class='b4g_settings_loading' style='margin: 20px 0; font-size: 24px; width: %100; text-align: center;'>Loading...</div><div class='b4g_settings_dialog' style='font-size: 13px;'><div class='b4g_send_condition_settings_box'><div style='margin: 2px 0 0 0;'><h3 style='margin: 0 0 10px 0;'>When messages are returned, they should be:</h3><div class='bullet_text' style='margin:10px 0 0 0;'><input type='checkbox' class='pref' id='unread' style='margin: 4px 0;vertical-align: middle;'> <label for='unread' style='vertical-align: middle;'>Marked as unread</label><br/><input type='checkbox' class='pref' id='starred' style='margin: 4px 0;vertical-align: middle;'> <label for='starred' style='vertical-align: middle;'>Starred</label> <br/><input type='checkbox' class='pref' id='topinbox' style='margin: 4px 0;vertical-align: middle;'> <label for='topinbox' style='vertical-align: middle;'>At the top of your inbox</label><br/><input type='checkbox' class='pref' id='labelled' style='margin: 4px 0;vertical-align: middle;'> <label for='labelled' style='vertical-align: middle;'>Labeled as 'Boomerang-Returned'</label> <br/></div></div><div style='margin: 15px 0'><div><input type='checkbox' class='pref' id='b4g_enable_respondable' style='margin: 4px 0;vertical-align: middle;'> <label style='vertical-align: middle;' for='b4g_enable_respondable'>Enable Respondable</label> <div style='margin: 2px 16px;'><div class='b4g_settings_respondable_upgrade_link' style='margin-bottom:5px;'><a href='https://b4g.baydin.com/subscriptions?utm_source=b4g&utm_medium=settings&utm_campaign=settingslink'>Upgrade to the Pro or Premium plan to enable this feature.</a></div><div class='b4g_respondable_text_disabled' style='color: #999;'><input type='checkbox' class='pref' id='b4g_enable_premium_respondable' style='margin: 4px 0;vertical-align: middle;'> <label style='vertical-align: middle;' for='b4g_enable_premium_respondable'>Enable Respondable with advanced machine learning</label> <img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/questionmark.png' class='b4g_settings_respondable_question' style='cursor:pointer; width:14px; height:14px; vertical-align:middle;'><div style='margin-left: 17px; font-style: italic; display:none;'>Enables politeness, sentiment, and subjectivity analysis. Your message information will be sent to Boomerang servers for analysis, but message data will not be retained.</div></div></div></div><input type='checkbox' class='pref' id='keyboard-shortcuts' style='margin: 4px 0;vertical-align: middle;'> <label style='vertical-align: middle;' for='keyboard-shortcuts'>Enable keyboard shortcuts</label> <img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/questionmark.png' class='b4g_settings_shortcuts_question' style='cursor:pointer; width:14px; height:14px; vertical-align:middle;'><ul style='display:none; padding-left: 35px; margin-top: 5px;'><li>Press <strong>b</strong> to open the Boomerang menu</li><li>Press <strong>Ctrl/Cmd + s</strong> to open the send later menu (while you are composing a message)</li><li>Use the arrow keys, space bar, and enter to navigate inside the menus.</li></ul></div><div class='bullet_text'><h3 style='margin: 0 0 10px 0;'>Premium Settings</h3><div class='b4g_settings_premium_link' style='margin-bottom:5px;'><a href='https://b4g.baydin.com/subscriptions?utm_source=b4g&utm_medium=settings&utm_campaign=settingslink'>Upgrade to the Premium plan to enable these features.</a></div><div class='b4g_premium-text-disabled' style='color: #999;'><input type='checkbox' class='pref pref-check' id='b4g_read_receipt_check' style='margin: 4px 0;vertical-align: middle;'> <label for='b4g_read_receipt_check' style='vertical-align: middle;'>Request a read receipt for every email I send</label><br/><input type='checkbox' class='pref pref-check' id='b4g_send_check' style='margin: 4px 0;vertical-align: middle;'> <label for='b4g_send_check' style='vertical-align: middle;'>Enable Boomerang for every email I send:</label> <div class='b4g_send_condition_value_settings_box' style='margin-top:5px;'><span style='margin:8px 9px 8px 18px; color:#777;'>Remind me</span><span class='' style='height: 20px; top: 3px; margin: 0 0 6px 10px; padding: 1px 0px;'><select name='ifResponseSettingNum' id='b4g_send_check_num' class='b4g-enabled-pref pref pref-select' style=''><option value='1'>1</option><option value='2'>2</option><option value='3'>3</option><option value='4'>4</option><option value='5'>5</option><option value='6'>6</option><option value='7'>7</option><option value='8'>8</option><option value='9'>9</option><option value='10'>10</option><option value='11'>11</option><option value='12'>12</option><option value='13'>13</option><option value='14'>14</option><option value='15'>15</option><option value='16'>16</option><option value='17'>17</option><option value='18'>18</option><option value='19'>19</option><option value='20'>20</option><option value='21'>21</option><option value='22'>22</option><option value='23'>23</option><option value='24'>24</option><option value='25'>25</option><option value='26'>26</option><option value='27'>27</option><option value='28'>28</option><option value='29'>29</option><option value='30'>30</option><option value='31'>31</option></select></span><span class='' style='height: 20px; top: 3px; margin: 0 0 6px 4px; padding: 1px 0px;'><select name='ifResponseSettingUnit' id='b4g_send_check_unit' class='b4g-enabled-pref pref pref-select' style=''><option value='hours'>hours</option><option value='days'>days</option><option value='weeks'>weeks</option><option value='months'>months</option></select></span><span style='margin:8px 7px 8px 8px; color:#777;'>after sending</span><span class='' style='height: 20px; top: 3px; margin: 0 0 6px 4px; padding: 1px 0px;'><select name='ifResponseSettingCond' id='b4g_send_check_cond' class='b4g-enabled-pref pref pref-select' style=''><option value='no reply'>if no reply</option><option value='no open'>if not opened</option><option value='always'>regardless</option></select></span></div></div><div class='b4g_premium-text-disabled' style='color: #999;margin-top:10px;'><input type='checkbox' id='b4g_crm_enabled' class='pref' style='vertical-align: middle;'> <label style='vertical-align: middle;' for='b4g_crm_enabled'>Enable CRM Integration</label><br/><div class='b4g_crm_hide_if_disabled' style='display:none;'><div style='clear:both; margin-top:10px; color:#777;'><span style='margin:3px 0px 12px 18px; width:120px; float:left; color:#777;' >Select CRM</span> <select id='b4g_crm_select' class='pref' style='float:left;'><option value='salesforce'>Salesforce</option><option value='highrise'>Highrise</option><option value='insightly'>Insightly</option><option value='capsule'>Capsule</option><option value='sugar'>Sugar</option><option value='pipedrive'>Pipedrive</option><option value='zoho'>Zoho</option><option value='other'>Other</option></select></div><div style='clear:both; color:#777;'><span style='margin:3px 0px 12px 18px; width:120px; float:left; color:#777;' >Bcc Address <img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/questionmark.png' class='b4g_settings_bccaddress_question' style='margin-right: 5px; cursor:pointer; width:14px; height:14px; vertical-align:middle;'></span> <input id='b4g_bccAddress' class='' placeholder='example@salesforce.com' type='text' style='float:left;width:250px; margin-left:0px; padding-left:4px;'><span id='b4g_bccAddressDisplay' style='margin:3px 0px 12px 2px; float:left;'></span><a id='b4g_edit_link' href='javascript:void(0);' style='margin:3px 0px 12px 15px; float:left;'>Edit</a><a id='b4g_save_link' href='javascript:void(0);' style='margin:3px 0px 12px 15px; float:left;'>Save</a></div><div style='clear:both; color:#777;'><span style='margin:0px 2px 0px 18px; width:120px; float:left; color:#777;' >Include with</span> <input style='margin-left: 0px; margin-right: 2px; vertical-align:middle;' class='pref b4g_crm_include_with' type='radio' id='b4g_crm_include_with_every' name='b4g_crm_include_with' value='every'/><label for='b4g_crm_include_with_every'>every email I send</label></div><div style='clear:both; margin-top: 5px; color:#777;'><span style='margin:3px 2px 0px 18px; width:120px; float:left;' ></span> <input style='margin-left: 0px; margin-right: 2px; vertical-align:middle;' class='pref b4g_crm_include_with' type='radio' id='b4g_crm_include_with_boomerang' name='b4g_crm_include_with' value='boomerang' /><label for='b4g_crm_include_with_boomerang'>only emails I Boomerang when sending</label></div></div></div></div></div></div></div>"));
Kd();a(".dialogdiv",b).dialog({modal:!0,closeOnEscape:!0,width:500,title:"Boomerang Settings",buttons:{Ok:{text:"OK",style:"padding: 5px 20px;","class":"b4g-button by-button by-button-secondary",click:function(){Ld(a(this))&&a(this).dialog("destroy")}},Cancel:{text:"Cancel",style:"padding: 5px 20px;","class":"b4g-button dialog-gray by-button",click:function(){a(this).dialog("destroy")}}}});va();a(".dialogdiv .b4g_settings_dialog").hide();a(".dialogdiv .b4g_settings_shortcuts_question").click(function(b){a(this).next("ul").toggle();
n(["keyboard-shortcuts-explanation","toggle"])});a(".dialogdiv .b4g_settings_respondable_question").click(function(b){a(this).next("div").toggle();n(["respondable-explanation","toggle"])});a.ajax({method:"get",url:"https://b4g.baydin.com/getpreferences/",xhr:function(){var b=a.ajaxSettings.xhr();b.withCredentials=!0;return b},success:function(c){if(c){var d=c.unread?"checked":"",e=c.starred?"checked":"",f=c.topInbox?"checked":"",g=c.labelled?"checked":"",l=c.onSendSetting?"checked":"",m=null==c.onSendOffset?
"1_weeks":c.onSendOffset,k=null==c.onSendCond?"reply":c.onSendCond,h=c.readReceipts?"checked":"",p="premium"===c.plan?!0:!1,U="pro"===c.plan?!0:!1;a("#unread",b).attr("checked",d);a("#starred",b).attr("checked",e);a("#topinbox",b).attr("checked",f);a("#labelled",b).attr("checked",g);a("#keyboard-shortcuts",b).attr("checked",oa.is_enabled());a("#b4g_enable_respondable",b).attr("checked",Ia().enabled);n(["Settings Dialog","successful launch"]);U||p?(a(".b4g_settings_respondable_upgrade_link",b).hide(),
a(".b4g_respondable_text_disabled",b).removeClass(".b4g_premium-text-disabled"),a(".b4g_respondable_text_disabled",b).css("color","#333"),a("#b4g_enable_premium_respondable",b).attr("checked",Ia().machineLearningEnabled)):a("#b4g_enable_premium_respondable").attr("disabled","disabled");if(p){a(".b4g_settings_premium_link",b).hide();a(".b4g_premium-text-disabled",b).removeClass(".b4g_premium-text-disabled").css("color","#333");a(".b4g_send_condition_settings_box",b).show();a("#b4g_send_check",b).attr("checked",
l);a("[name=ifResponseSettingCond]",b).val(k);a("#b4g_read_receipt_check",b).attr("checked",h);d=m.split("_");a("[name=ifResponseSettingNum]",b).val(d[0]);a("[name=ifResponseSettingUnit]",b).val(d[1]);"checked"!==l&&(a(".pref-select",b).attr("disabled","disabled").removeClass("b4g-enabled-pref").addClass("b4g-disabled-pref"),a(".b4g_send_condition_value_settings_box",b).addClass("b4g-disabled-send-condition"));a("#b4g_crm_enabled").click(function(){a(this).is(":checked")?a(".b4g_crm_hide_if_disabled").show():
a(".b4g_crm_hide_if_disabled").hide()});c.crm.active&&(a("#b4g_crm_enabled").attr("checked",!0),a(".b4g_crm_hide_if_disabled").show());l=c.crm.bccAddress;a("#b4g_bccAddress").val(l);a("#b4g_bccAddressDisplay").text(l);d=c.crm.crm;a("#b4g_crm_select").val(d);a(".b4g_crm_include_with[value="+c.crm.bccIncludeWith+"]").attr("checked",!0);var v=function(){a("#b4g_bccAddress").show().select();a("#b4g_bccAddressDisplay").hide();a("#b4g_edit_link").hide();a("#b4g_save_link").show()};c=function(){a("#b4g_bccAddress").hide();
a("#b4g_bccAddressDisplay").show();a("#b4g_edit_link").show();a("#b4g_save_link").hide();var b=a("#b4g_bccAddress").val();if(E(b))return a("#b4g_bccAddressDisplay").text(b),!0;v();console.log(b);alert("Please enter a valid email address.");return!1};0<a.trim(l).length?c():v();a("#b4g_edit_link").click(v);a("#b4g_save_link").click(c);c=function(){var b=a("#b4g_crm_select").val(),c=a("#b4g_bccAddress");switch(b){case "salesforce":c.attr("placeholder","example@salesforce.com");break;case "highrise":c.attr("placeholder",
"dropbox@12345678.highrisehq.com");break;case "insightly":c.attr("placeholder","example@mailbox.insight.ly");break;case "capsule":c.attr("placeholder","dropbox@12345678.example.capsulecrm.com");break;case "sugar":c.attr("placeholder","example@sugarondemand.com");break;case "pipedrive":c.attr("placeholder","12345@dropbox.pipedrive.com");break;case "zoho":c.attr("placeholder","example@emails.zohocrm.com");break;default:c.attr("placeholder","example@example.com")}};c();a("#b4g_crm_select").change(c)}else a(".b4g_send_condition_settings_box",
b).show(),a(".pref-select",b).attr("disabled","disabled").removeClass("b4g-enabled-pref").addClass("b4g-disabled-pref"),a("#b4g_send_check",b).attr("disabled","disabled"),a("#b4g_read_receipt_check",b).attr("disabled","disabled"),a("#b4g_crm_enabled",b).attr("disabled","disabled"),a(".b4g_send_condition_settings_box",b).addClass("b4g-disabled-send-condition");a(".b4g_settings_loading",b).hide();a(".b4g_settings_dialog",b).show();a(".pref",b).not("#b4g_enable_premium_respondable").change(function(){this===
a("#unread",b).get(0)&&0==this.checked?a("#topinbox",b).get(0).checked=0:this===a("#topinbox").get(0)&&1==this.checked&&(a("#unread").get(0).checked=1);a("#b4g_enable_premium_respondable",b).is(":checked")&&!a("#b4g_enable_respondable",b).is(":checked")&&a("#b4g_enable_premium_respondable",b).attr("checked",!1);p&&(this===a("#b4g_send_check_cond").get(0)?"no open"===a(this).val()&&a("#b4g_read_receipt_check").attr("checked","checked"):this===a("#b4g_read_receipt_check").get(0)&&(a(this).is(":checked")||
"no open"!==a("#b4g_send_check_cond").val()||a("#b4g_send_check_cond").val("always")),a("#b4g_send_check",b).get(0).checked?(a(".pref-select",b).removeAttr("disabled").removeClass("b4g-disabled-pref").addClass("b4g-enabled-pref"),a(".b4g_send_condition_value_settings_box",b).removeClass("b4g-disabled-send-condition")):(a(".pref-select",b).attr("disabled","disabled").removeClass("b4g-enabled-pref").addClass("b4g-disabled-pref"),a(".b4g_send_condition_value_settings_box",b).addClass("b4g-disabled-send-condition")))});
a("#b4g_enable_premium_respondable").change(function(){if(!db()&&a(this).is(":checked")){var b=this;a(b).attr("checked",!1);Cc(function(){a.ajax({type:"post",url:"https://b4g.baydin.com/mailcruncher/respondableconsent",xhr:M,success:function(c){var d=c.status;c=c.message;"success"==d?(Ba(),a(b).attr("checked",!0),a("#b4g_enable_respondable").attr("checked",!0)):"error"==d&&w(c)}})})}else a("#b4g_enable_premium_respondable").is(":checked")&&!a("#b4g_enable_respondable").is(":checked")&&a("#b4g_enable_respondable").attr("checked",
!0)})}else n(["Settings Dialog","failed launch"]),a(".dialogdiv").remove(),w("<p>There seems to be an issue with your login credentials. Try visiting the <a href='https://b4g.baydin.com/settings'>manage page</a> to adjust your settings.</p>")},error:function(){window.open("https://b4g.baydin.com/settings","_blank");a(".dialogdiv").remove();n(["dev-CORS","failure","XHR-failure"])},dataType:"json"})}function Ld(b){a("#keyboard-shortcuts",b).is(":checked")?(oa.enable(),n(["keyboard-shortcuts","toggle",
"enabled"])):(oa.disable(),n(["keyboard-shortcuts","toggle","disabled"]));var c=1==a("#unread",b).get(0).checked?"True":"False",d=1==a("#starred",b).get(0).checked?"True":"False",e=1==a("#topinbox",b).get(0).checked?"True":"False",f=1==a("#labelled",b).get(0).checked?"True":"False",g=1==a("#b4g_send_check",b).get(0).checked?"True":"False",l=a("#b4g_send_check_num option:selected",b).val()+"_"+a("#b4g_send_check_unit",b).val(),m=a("#b4g_send_check_cond option:selected",b).val(),k=1==a("#b4g_read_receipt_check",
b).get(0).checked?"True":"False",g="&onSendSetting="+g+"&onSendOffset="+l+"&onSendCond="+m+"&readReceipts="+k,l=a("#b4g_crm_enabled").is(":checked")?"True":"False",m=a("#b4g_crm_select").val(),k=a("#b4g_bccAddress").val();if("True"===l&&!E(k))return alert("Please enter a valid email address."),!1;var h=a(".b4g_crm_include_with:checked").val(),c="https://b4g.baydin.com/changepreferences?unread="+c+"&starred="+d+"&topInbox="+e+"&labelled="+f+(g+("&crmActive="+l+"&crmSelect="+m+"&crmBcc="+k+"&crmInclude="+
h)),c=a("#b4g_enable_respondable",b).is(":checked")?c+"&respondableEnabled=True":c+"&respondableEnabled=False",c=a("#b4g_enable_premium_respondable",b).is(":checked")?c+"&machineLearningEnabled=True":c+"&machineLearningEnabled=False";a.ajax({method:"get",url:c,xhr:function(){var b=a.ajaxSettings.xhr();b.withCredentials=!0;return b},success:function(a){Ba(Dc);n(["Settings Dialog","settings changed successfully"])},error:function(a){n(["dev-CORS","failure","XHR-failure"])}});return!0}function Ba(b){b||
(b=a.noop);localStorage.removeItem("b4g_respondable-"+u());fa(b)}function Mc(b){var c=a("<div id='b4g-inline-troubleshoot'><h4>Inline manage:</h4><ul><li>Is enabled: <b class='b4g-inline-enabled'></b></li><li>Local data last updated: <br><b class='b4g-inline-lastupdated'></b></li><li>Number inline-manage threads: <b class='b4g-inline-threadscount'></b></li><li>Is server data accessible: <b class='b4g-inline-serverdata'></b></li></ul></div>");b.css("height","auto").find("#b4g-inline-troubleshoot-holder").append(c);
var d=function(b,d,g){a(b,c).text(d).css("color",g)};ja.troubleshoot({local:function(a,b){var c=ja.is_enabled();d(".b4g-inline-enabled",c?"Yes":"No",c?"green":"red");var c=new Date(b["last-updated"]),l=Object.keys(b["thread-ids"]).length;d(".b4g-inline-lastupdated",c+"","blue");d(".b4g-inline-threadscount",l,"blue")},server:function(a){a?d(".b4g-inline-serverdata",a,"red"):d(".b4g-inline-serverdata","Yes","green")}});d(".b4g-inline-enabled","Loading...","blue");d(".b4g-inline-lastupdated","Loading...",
"blue");d(".b4g-inline-threadscount","Loading...","blue");d(".b4g-inline-serverdata","Loading...","blue")}function Kd(){a(".b4g_settings_bccaddress_question").click(function(){var b=a("#b4g_crm_select").val(),c="<p style='margin-left:20px;'>Enter the email address that your CRM provides.</p>",d="Other";switch(b){case "salesforce":d="How to Find the Bcc Address for Salesforce";c="<p><strong>How to activate:</strong></p><ol>   <li>Find where it says 'Setup' in the upper right corner and select this option.</li>   <li>In the left menu bar, select 'Email Administration'. </li>   <li>Select the 'Email to Salesforce' tab.</li>   <li>Edit the settings and select the box to activate this feature.</li></ol><p><strong>How to find your Bcc address:</strong></p> <ol>   <li>Find your user name at the upper right corner and select the drop down bar.</li>   <li>Select 'My Settings'.</li>   <li>Select the Email tab under 'My Settings'</li>   <li>Select the 'My Email to Salesforce Tab' (this does not exist until you activate the feature).</li>   <li>You will see your email to salesforce address highlighted.</li></ol>";
break;case "highrise":d="How to Find the Bcc Address for Highrise";c="<ol>   <li>Log into your Highrise account.</li>   <li>Find 'Account and Settings' and select the drop down bar.</li>   <li>Select 'My Info' from the drop down list.</li>   <li>You will see your BCC email address displayed under '<strong>Your Personal Email Dropbox</strong>'.</li></ol>";break;case "insightly":d="How to Find the Bcc Address for Insightly";c="<ol>   <li>Log into your Insightly account.</li>   <li>Select 'Emails' from the menu bar on the left.</li>   <li>You will see your BCC email address displayed there.</li></ol>";
break;case "capsule":d="How to Find the Bcc Address for Capsule";c="<ol>   <li>Log into your Capsule account.</li>   <li>Select 'User' and then 'My Preferences' in the Capsule navigation bar.</li>   <li>You will see your BCC email address under <strong>'Mail Drop Box'</strong>.</li></ol>";break;case "sugar":d="How to Find the Bcc Address for Sugar";c="<p><strong>To activate Sugar Email Archiving for your instance, you must be the admin or request your account admin to follow the steps below:</strong></p><ol>   <li>Log into Sugar CRM.</li>   <li>Navigate to Admin > Email Archiving.</li>   <li>Read and agree to the privacy agreement.</li>   <li>Click <strong>'Enable Email Archiving'</strong>.</li>   <li>Then you will see your BCC address in the field 'Email Archiving Address'.</li></ol>";
break;case "pipedrive":d="How to Find the Bcc Address for Pipedrive";c="<ol>   <li>Log into Pipedrive CRM.</li>   <li>Go to your Personal Settings.</li>   <li>Select the section named 'Email drop-box'.</li>   <li>Click the radio button 'Enabled' next to Dropbox status.</li>   <li>You will find your BCC address in the 'Your dropbox address' field.</li>   <li>Enter your email address in the box below and click 'Save changes'.</li></ol>";break;case "zoho":d="How to Find the Bcc Address for Zoho",c="<p>To activate BCC Dropbox in Zoho:</p><ol>   <li>Log into your Zoho account.</li>   <li>Click <strong>Setup > Users &amp; Permissions > Profiles</strong>.</li>   <li>In the <em>Profiles</em> page, click the <strong>Edit</strong> link corresponding to the profile that you want to edit.</li>   <li>From the list of profiles, select the <strong>BCC Dropbox</strong> check box under <em>General Permissions</em>.</li>   <li>Click <strong>Save</strong>.</li></ol><p>The BCC Dropbox email address will be available in Zoho CRM under <strong>Setup > Personal Settings >BCCDropbox.</strong></p><p>Note: This feature in Zoho is only available to the users on Professional and Enterprise plans.</p>"}var e=
c;"other"!==b&&(e="<div class='dialogdiv'>"+e+"<p><img style='vertical-align:middle;' src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/email.png'/><a id='emailme' href='javascript:void(0)' style='vertical-align:middle;'>Email me these instructions</a></p></div>");w(e,d,void 0,{width:500},"crmhelp");a("#emailme").click(function(){var b="https://b4g.baydin.com/mailcruncher/sendcrmreminder?instructions="+encodeURIComponent(c)+"&subject="+d;Y(b,a.noop());a(this).replaceWith("<span style='vertical-align:middle;'>Instructions sent!</span>")})})}
function Ec(b,c,d,e){b=w(b,"",c,d,e);c=b.parent();a(".b4g-ui-dialog-titlebar",c).remove();c.addClass("em-dialog").prepend(a("<div/>").addClass("em-close").html("&#215;"));return b}function Cc(b,c){var d=Ec("<h1>Respondable Advanced Features</h1><p>These features use machine learning techniques to provide rich analysis of the messages you write. Pro and premium Boomerang users can see the effects of the following parameters on the quality of their messages.</p><h2>Positivity</h2><p>Positivity is a measurement of how positive (words like \u201cwonderful\u201d) or negative (\u201cterrible\u201d) the tone of your message is.</p><h2>Politeness</h2><p>Indicators of politeness include attempts to minimize or apologize for imposition and using language that reflects gratitude.</p><h2>Subjectivity</h2><p>Subjectivity is a measure of the ratio of opinions to factual statements in your message.</p><div class='em-dialog-inset'><strong>If you enable these features, Boomerang will securely send data about your messages to our servers for analysis. After the analysis is complete, your data is discarded. For more information about our data practices, please visit <a href='http://boomeranggmail.com/faq.html#respondable' target='_blank'>our FAQ</a>.</strong><input type='checkbox' class='' id='respondable_consent_checkbox' style='vertical-align: middle;'><label style='vertical-align: middle;' for='respondable_consent_checkbox'>I consent to send my data to Boomerang's servers for analysis.</label></div>",
{Enable:{text:"Enable","class":"b4g-button red",click:function(){a(this).find("#respondable_consent_checkbox").is(":checked")?(a(this).dialog("destroy"),n(["respondable","consent","accepted"]),b()):alert("Please check the checkbox before clicking Enable")}},Cancel:{text:"Cancel","class":"b4g-button grey cancelConsent",click:function(){a(this).dialog("destroy");n(["respondable","consent","declined"]);c&&c()}}},{},"respondable-consent").parent();va(".em-dialog a");var e=d.find(".b4g-button.red");e.attr("disabled",
!0);a("#respondable_consent_checkbox",d).change(function(){e.attr("disabled",!this.checked)});d.find(".em-close").click(function(){d.find(".cancelConsent").click()})}function Md(b,c){var d=Ec("<p>Respondable only supports English at the present time</p><p>It looks like you're using Gmail in a different language.</p>",{"Turn Off":{text:"Turn off Respondable","class":"b4g-button red",click:function(){a(this).dialog("destroy");b()}},"Try It Anyway":{text:"Try it anyway!","class":"b4g-button grey",click:function(){a(this).dialog("destroy");
c()}}},{},"respondable-non-english").parent();d.css("width","400px");a(".b4g-ui-dialog-titlebar",d).remove()}function Ia(){var a={machineLearningEnabled:!1,enabled:!0,hasConsented:!1,hasSeenFTUE:!1},c=I("b4g_respondable-"+u()),d;if(null==c)d=a;else try{d=JSON.parse(c)}catch(e){console.log("Unexpected error in get_respondable_preferences"),console.log(c),d=a}return d}function Ca(){var a=S();return a&&("pro"===a||"premium"===a)}function ga(){return Ca()&&Ia().machineLearningEnabled&&db()}function db(){return Ia().hasConsented}
function Dc(){a(".email-meter-display").remove();a(".em-email-meter-gauge").remove();var b=a(".email-meter");b.removeData();b.removeClass("email-meter")}function Fc(){a.ajax({method:"get",url:"https://b4g.baydin.com/changepreferences?respondableEnabled=False",xhr:M,success:function(a){Ba(Dc)}})}function xb(){var a="true"===I("b4gshowcardexpired"),c=Date.parse(I("b4gshowcardexpiredafter"))||Date.today().addDays(-4),d=Date.parse(I("b4glastcheckedbillingstatusdate")||Date.today().addDays(-365));a&&-1<
Date.compare(Date.today(),c)?Gc():-1<Date.compare(Date.today(),Date.parse(d).addDays(5))&&Gc()}function Gc(){(new Date-new Date(2013,3,17))/864E5/5>Math.random()&&Y("https://b4g.baydin.com/mailcruncher/checkbillinginfo?guser="+u(),function(a,c,d){G("b4glastcheckedbillingstatusdate",Date.today().toString("ddd, dd MMM yyyy HH:mm:ss"));3===a?(Nd(),G("b4gshowcardexpired",!0)):G("b4gshowcardexpired",!1)})}function Nd(){var b=q(),c=u(),d=a("<div class='b4g_card_expired_bar'><div>Your credit card payment for Boomerang was declined. <strong>Please update your billing information.</strong></div> <div style='height: 50px; line-height: 50px;'><a class='b4g-button red' id='b4g_card_expired_fix' style='display: inline; margin:0px;' target='_blank' href='https://b4g.baydin.com/fixexpiredbilling?guser="+
encodeURIComponent(c)+"'>FIX THIS</a><a id='billing_expired_snooze'>Remind me later</a><a id='billing_expired_downgrade' style='text-decoration: none;' target='_blank' href='https://b4g.baydin.com/cancelsubscription?guser="+encodeURIComponent(c)+"'>Cancel my subscription</a></div></div>");d.css({padding:"20px 0px 10px 0px",color:"#555",background:"#FFF1A8",border:"1px solid #EEE","text-align":"center"});0===a(".b4g_card_expired_bar",b).length&&a(".aiw",b).find(".nH").first().show().append(d);a("#billing_expired_snooze",
b).click(function(){d.hide();G("b4gshowcardexpiredafter",Date.today().addDays(3).toString("ddd, dd MMM yyyy HH:mm:ss"));G("b4gshowcardexpired",!0);n(["credit card expiration","clicked_RemindLater"])});a("#b4g_card_expired_fix",b).click(function(){d.hide();G("b4gshowcardexpired",!0);G("b4gshowcardexpiredafter",Date.today().addDays(3).toString("ddd, dd MMM yyyy HH:mm:ss"));n(["credit card expiration","clicked_FixThis"])});a("#billing_expired_downgrade",b).click(function(){d.hide();G("b4gshowcardexpired",
!1);n(["credit card expiration","clicked_CancelMySubscription"])});n(["credit card expiration","show"])}function tb(a,c,d){var e=S();e&&a(e)?c():fa(function(){var e=S();a(e)?c():d()})}function S(){var a=u();return I("b4g_plan-"+a)}function mc(a){return a&&"basic"!==a}function wd(a){return a&&(-1<a.indexOf("pro")||"premium"===a)}function Wb(a){return a&&"premium"===a}function Z(a){n(["nag screen","show",a]);if("Old Safari"!==t)if(17===a)Pa("<p style='margin: 15px;'>Hey, did you know that you\u2019ve already scheduled more than 10 messages with Boomerang this month?</p> <a href='https://b4g.baydin.com/subscriptions' class='b4g-button green' id='signup-button' target='_blank'>Upgrade</a>",
!1,"Give me 1 more message!");else if(18===a)Pa("<p style='margin: 15px;'>You have already scheduled beyond the 10 messages Boomerang Basic provides for free.</p> <div style='text-align:center;'><img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/coffecup.png' style='margin:0px auto;'/></div> <p style='margin:0 15px 15px;'>For not much more than a trip to Starbucks a month, you can schedule an unlimited number of messages and help us keep Boomerang running. We've scheduled your message anyway.</p> <a href='https://b4g.baydin.com/subscriptions' class='b4g-button green' id='signup-button' target='_blank'>Upgrade</a>",
!1,"Give me 1 more message!");else if(19===a)Pa("<p style='margin: 15px;'>You have already scheduled beyond the 10 messages Boomerang Basic provides for free.</p>  <p style='margin: 0 15px 15px 15px;'>You can get more free messages by telling others about Boomerang!</p> <span class='b4g-button green' id='multi-friend-button'>INVITE YOUR CONTACTS</span>",!1,"Give me 1 more message!");else if(20===a)Pa("<ul style='list-style-type: none;'><li><i>Our dinner's not steak and fondue</i></li><li><i>Instead it's ramen and stew</i></li><li><i>If our users don't buy</i></li><li><i>We'll starve and then die</i></li><li><i>So no more messages for you!</i></li></ul><p style='margin: 0 15px;'>You\u2019ve hit your quota of messages for this month. Boomerang Basic provides for 10, but you\u2019ve scheduled more than 15. <span style='color:red;'><strong>Your message was NOT scheduled.</strong></span></p><p style='margin: 5px 0 0 15px;'>Please upgrade your subscription to get unlimited message scheduling.</p> <a href='https://b4g.baydin.com/subscriptions' class='b4g-button green' id='signup-button' target='_blank' style='margin-left: 80px;'>Upgrade Subscription</a> <p style='margin: 5px 0 0 15px;'>You can also refer a friend to earn some message credits. </p><a href='https://b4g.baydin.com/refer' class=' b4g-button dialog-gray' id='refer-button' target='_blank'>Refer a friend</a>",
!1,"<span id='referral_confirm'>No, thanks.</span>");else{if(a>=Qa){a-=Qa;var c="<div id='referral_success'></div><div id='referral_dialog'><p style='margin: 0 0 18px 0;'>Boomerang Basic provides 10 messages per month for free. You\u2019ve already scheduled 15 this month.</p><p>It costs us money to provide Boomerang to you, so to continue scheduling messages, you can either buy a subscription, or share Boomerang with your followers and earn 25 more credits as thanks.</p> <p class='referral-share-options'><a href='https://b4g.baydin.com/subscriptions' class='b4g-button green' id='signup-button' target='_blank' href='javascript:void(0);'>Upgrade</a> <span>or</span> ";
0===(a&2)&&(c+="<span class='referral-gplus'><g:plusone callback='b4g_plus' href='http://www.boomeranggmail.com' /></span>");0===(a&1)&&(c+="<a class='b4g-button blue' id='tweet-button' target='_blank' onclick='b4g_tweet();' href='javascript:void(0);'>Tweet Now</a>");Pa(c+"</p></div>",!1,"<span id='referral_confirm'>No! Give me 1 more message anyway.</span>");a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src="https://apis.google.com/js/plusone.js";c=document.getElementsByTagName("script")[0];
c.parentNode.insertBefore(a,c)}}else 17===a?alert("Hey, did you know that you\u2019ve already scheduled more than 10 messages with Boomerang this month? That's okay. We've scheduled your message anyway."):18===a?alert("You have already scheduled beyond the 10 messages Boomerang Basic provides for free. For not much more than a trip to Starbucks a month, you can schedule an unlimited number of messages and help us keep Boomerang running. We've scheduled your message anyway. "):19===a?alert("Boomerang Basic provides 10 messages per month for free. You\u2019ve already scheduled 15 this month. It costs us money to provide Boomerang to you, so to continue scheduling messages, please upgrade your subscription from Boomerang menu at the top right of your Gmail screen. We've scheduled your message anyway."):
alert("Our dinner's not steak and fondue. Instead it's ramen and stew. If our users don't buy. We'll starve and then die. So no more messages for you! You\u2019ve hit your quota of messages for this month. Boomerang Basic provides for 10, but you\u2019ve scheduled more than 15. Please upgrade your subscription to Boomerang Personal or Boomerang Professional. Your message was NOT scheduled. ")}function Pa(b,c,d){if("Old Safari"===t)alert(b);else{var e=q();a(".dialogdiv").remove();d=d?"<div class='dialogdiv' style='display:none;'>"+
b+"<span style='float:right; margin:0 15px 0 0;'><a class='closeLink' href='javascript:void(0)'>"+d+"</a></span></div>":"<div class='dialogdiv' style='display:none;'>"+b+"</div>";a("body",e).append(a(d));-1!==b.indexOf("INVITE YOUR CONTACTS")&&a("#multi-friend-button").click(function(){n(["multi-friend-selector","click","nag screen"]);Hc(Ic)});b={title:"Boomerang for Gmail",modal:!0,closeOnEscape:!0,width:370};c&&(b.buttons={Ok:{text:"OK Fine!","class":"b4g-button dialog-gray",click:function(){a(this).dialog("destroy")}}});
a(".dialogdiv",e).dialog(b);a(".closeLink").click(function(){a(".dialogdiv").dialog("close")});va()}}function Ic(){var b=q();a(".dialogdiv").remove();a("body",b).append(a("<div class='dialogdiv multi-friend-content' style='display:none'><div class='multi-friend-load' style='text-align:center; padding: 20px;'><img src='https://b4g.baydin.com/site_media/bookmarklet/auth-loader.gif' style='position:absolute; top: 50px;'/></div><div class='multi-friend-main' style='display:none;'><div class='multi-friend-max-num' style='padding:8px 0 0 0; width:100%; color:#b93f24; text-align:center;font-size: 14px;display: none;'>You may send invites to up to 200 friends.</div><div style='padding: 8px 20px 0px 20px;'><input type='text' class='multi-friend-search' placeholder='Search by name, email, or company'/></div><div id='multi-friend-list'><b class='multi-friend-contacts-non-found' style='display:none;'>No contacts found.</b><div id='most-contact-container' style='display:none;'><div class='top-of-list multi-friend-list-item'><input type='checkbox' value='blank' class='multi-friend-select-all recommended-contacts' style='margin: 3px 10px 3px 0.5ex;' checked/><b>Recommended Contacts (<span class='multi-friend-most-contacted-count'></span>)</b></div><div id='multi-friend-most-contacted'></div></div><div id='all-contact-container' style='display:none;'><div class='top-of-list multi-friend-list-item'><b style='margin: 3px 10px 3px 27px;'>Other Contacts (<span class='multi-friend-contacts-count'></span>)</b></div><div id='multi-friend-contacts'></div></div></div><div class='multi-friend-lower-portion'><div class='multi-friend-credit-count' style='vertical-align: middle; padding-bottom: 15px;'><b>Message Credits Earned: <span id='multi-friend-credit-count-value'>0</span></b></div><div class='multi-friend-credit-help' style='vertical-align: middle; padding-bottom: 15px;'>You receive 1 message credit for each person you email to join Boomerang. If they download Boomerang, you will earn 10+ credits and a chance to win a Kindle Fire!</div><div><input type='button' class='b4g-button green' value='INVITE CONTACTS' id='multiInvitesSubmit' style='font-size:13px;padding: 7px 16px;margin:0 0 3px 0;'/><input type='button' class='b4g-button' value='CANCEL' id='multiInvitesCancel' style='font-size:13px;padding: 7px 16px;margin:0 0 3px 10px;'/></div></div></div></div>"));
a(".dialogdiv",b).dialog({resizable:!1,modal:!0,position:["center",75],closeOnEscape:!0,width:500,dialogClass:"multi-friend",title:"Invite your contacts to Boomerang for Gmail"});a.ajax({type:"GET",dataType:"json",position:["center",75],xhr:M,url:"https://b4g.baydin.com/getcontactslist?guser="+encodeURIComponent(Ra),success:function(c){0>=c.rec.length?(n(["multi-friend-selector","error","no recommended contacts"]),a(".multi-friend-load",b).text("It doesn't look like you have any contacts!"),setTimeout(function(){a(".dialogdiv").dialog("close")},
3E3)):(Jc(a("#multi-friend-most-contacted",b),c.rec,"recommendedContactsCheck"),a(".multi-friend-most-contacted-count",b).text(c.rec.length),a("#most-contact-container",b).show(),Jc(a("#multi-friend-contacts",b),c.other,"otherContactsCheck"),a(".multi-friend-contacts-count",b).text(0),a(".otherContactsCheck",b).parent().hide(),a(".multi-friend-main",b).show(),a(".multi-friend-load",b).hide(),a(".b4g-ui-dialog-titlebar-close",b).hide(),a(".multi-friend-search",b).keyup(function(c){var e=a(".multi-friend-search",
b).val().toLowerCase();if(e){var f=0;a("#all-contact-container",b).show();a(".top-of-list",b).hide();a(".contact-info",b).each(function(){0<=a(this).text().toLowerCase().indexOf(e)?(a(this).parent(".contact",b).show(),f++):a(this).parent(".contact",b).hide()});f?a(".multi-friend-contacts-non-found",b).hide():a(".multi-friend-contacts-non-found",b).show()}else a(".top-of-list",b).show(),a(".recommendedContactsCheck",b).parent().show(),c=a(".otherContactsCheck:checked",b),0<c.size()?(c.parent().addClass("searchedAndFoundContact",
b),a(".otherContactsCheck:not(:checked)",b).parent().hide(),a(".multi-friend-contacts-count",b).text(a(".searchedAndFoundContact",b).size()),a(".searchedAndFoundContact",b).show()):0>=a(".searchedAndFoundContact",b).size()?a("#all-contact-container",b).hide():(a(".otherContactsCheck",b).parent().hide(),a(".searchedAndFoundContact",b).show())}),a(".multiFriendCheck",b).change(function(){var c=a(".multiFriendCheck:checked",b).size();200<=c?(a(".multiFriendCheck:not(:checked)",b).attr("disabled","disabled"),
a(".multi-friend-max-num:not(:visible)",b).show(),a(".b4g-ui-dialog-title",b).text("Invite your contacts to Boomerang for Gmail ("+c+" selected)")):190<=c?(a(".multi-friend-max-num:not(:visible)",b).show(),a(".b4g-ui-dialog-title",b).text("Invite your contacts to Boomerang for Gmail ("+c+" selected)")):0===c?a(".b4g-ui-dialog-title",b).text("Invite your contacts to Boomerang for Gmail"):(a(".multi-friend-max-num:visible",b).hide(),a(".multiFriendCheck:not(:checked) :disabled",b).removeAttr("disabled"),
a(".b4g-ui-dialog-title",b).text("Invite your contacts to Boomerang for Gmail ("+c+" selected)"));a("#multi-friend-credit-count-value",b).text(c)}),a(".multi-friend-select-all",b).change(function(){var c=a(".multiFriendCheck:checked",b).size();a(this).is(":checked")?a(".recommendedContactsCheck:not(:checked)",b).slice(0,200-c).attr("checked","checked"):a(".recommendedContactsCheck:checked",b).removeAttr("checked");a(".multiFriendCheck",b).trigger("change")}),a(".multi-friend-select-all",b).trigger("change"),
a("#multiInvitesSubmit",b).click(function(){n(["multi-friend-selector","send emails"]);var c=[];a(".multiFriendCheck:checked",b).each(function(){c.push(a(this).val())});Od(b,c.join(", "),"You should try Boomerang for Gmail","Hey,\r\nI thought you might like this awesome Gmail plugin I have been using.\r\n\r\nHere are some of the things you can do with Boomerang:\r\n1. Write messages now and schedule them to deliver at any time\r\n2. Schedule messages to return to your inbox at a later time\r\n3. Remind yourself to follow up on messages that don't get a response within a certain time\r\n\r\n")}),
a("#multiInvitesCancel",b).click(function(){n(["multi-friend-selector","close"]);a(".dialogdiv").dialog("close")}))},error:function(b,d,e){a(".dialogdiv").dialog("close");"revoked"===b.responseText?(n(["multi-friend-selector","error","OAuth keys revoked"]),Hc(Ic)):"invalid email"===b.responseText?(n(["multi-friend-selector","error","invlaid email"]),w("Attempt failed: Boomerang cannot identify your email. Contact support@baydin.com for help resolving the issue.")):(n(["multi-friend-selector","error",
b.responseText]),w("Something went wrong. Reload the page and try again."))}})}function Od(b,c,d,e){null==c.toLowerCase().match(/[a-zA-Z0-9\._+-]+@[a-zA-Z0-9\.-]+\.[a-z\.A-Z]+/g)?alert("Please select at least one email address."):(document.body.style.cursor="wait",a.ajax({url:"https://b4g.baydin.com/sendreferralemailinvitations",data:{addresses:c,subject:d,body:e,origin:"f1jp4fqjip"},type:"POST",xhr:M,success:function(c){document.body.style.cursor="default";a(".multi-friend-main",b).hide();a(".multi-friend-load").show().html("<h2>"+
c+"</h2>");window.setTimeout(function(){a(".dialogdiv",b).dialog("close")},2E3)},error:function(){document.body.style.cursor="default";alert("There was an error sending out your emails. Try again.")}}))}function Jc(b,c,d){for(var e=0;e<c.length;e++)b.append(a("<div class='contact multi-friend-list-item'><input type='checkbox' value='"+c[e].email+"' class='multiFriendCheck "+d+"'/>"+("<span class='contact-info'>"+c[e].name+" &lt;"+c[e].email+"&gt;</span>")+"</div>"))}function yb(b,c,d){a.ajax({method:"get",
url:b,xhr:M,success:function(a){c(a,b,d)}})}function Hc(b){function c(a,c,f){"success"!==a?e(d,f):b()}function d(d,e,f){if("success"===d)b();else if("cookies"===d)alert("Attempt failed: "+d);else if("Firefox"===t)w("<div id='error_dialog' style=''><ol><li>Do you have a pop-up blocker enabled?<br/><b>Click 'Options' or 'Preferences'</b> in the notification bar above, click on <b>'Allow pop-ups on mail.google.com'</b>, and <a href='javascript: window.location.reload()'>refresh</a>.</li> <li>Added the exception to your pop-up blocker but still getting this? <br/> <a href='http://boomeranggmail.com/faq.html#Troubleshoot'>Click here</a> to troubleshoot.</a></li></div>");
else if("Safari"===t||"Old Safari"===t){var k=a("<div class='overlay' style='background:#bcbcbc; opacity:0.9;filter:alpha(opacity=90);'><div id='dialog' style='height:100px'><div id='title-bar'>Logging in...</div><div class='dialog-content'> Please <a id='safari-boomerang' href='javascript:void(0)'>click here</a> so we can log you in with Boomerang.</div></div></div>");a("body").append(k);a("#safari-boomerang").click(function(){c(d,e,f);k.remove()})}else w("Attempt failed: "+ea[d])}function e(b,c){var d,
e=u();"Chrome"===t||"Opera"===t?(d=a("<div class='overlay' style='background:#bcbcbc; opacity:0.95; filter:alpha(opacity=95);'><img id='blue-arrow' style='position:absolute;top:100px;right:100px;visibility:hidden;' width='200px' height='266px' src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/bluegiantarrow2.png' /><div id='dialog' style='height:auto; position:absolute; left:0; right:0;'><div id='title-bar'>Authenticating...</div><div class='dialog-content' style='text-align:center;'><img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/auth-loader.gif'/></div></div></div>"),
setTimeout(hb,5E3)):d=a("<div class='overlay' style='background:#bcbcbc; opacity:0.9; filter:alpha(opacity=9);'></div>");var f=0,p=0;try{f=window.screenY+Math.max(0,Math.floor((a(window).height()-600)/2)),p=window.screenX+Math.max(0,Math.floor((a(window).width()-800)/2))}catch(h){}a("body").append(d);var n=window.open("https://b4g.baydin.com/contacts/login?guser="+e,"","width=800,height=600,location=1,status=1,resizable=1,top="+f+",left="+p),v=setInterval(function(){if(!n&&"Chrome"!==t&&"Opera"!==
t||n.closed)d.remove(),clearInterval(v),-1===t.indexOf("Safari")&&-1===t.indexOf("Firefox")?yb("https://b4g.baydin.com/contacts/checklogin?guser="+e+"&hasAlreadyAuthenticated=True",b,c):yb("https://b4g.baydin.com/contacts/checklogin?guser="+e,b,c)},100)}var f=u();yb("https://b4g.baydin.com/contacts/checklogin?guser="+f,c,"")}function fa(b,c,d){function e(d,e){function f(b,c){function d(a,c,f){4===a?g(e,f):1===a?b():20===a&&Z(a)}function e(f,g,m){if(1===f)b(),xb();else if(20===f)Z(f);else if(28===
f)w("Attempt failed: "+ea[f]),c&&c("Failed to authenticate.");else if("Firefox"===t)w("<div id='error_dialog' style=''><ol><li>Do you have a pop-up blocker enabled?<br/><b>Click 'Options' or 'Preferences'</b> in the notification bar above, click on <b>'Allow pop-ups on mail.google.com'</b>, and <a href='javascript: window.location.reload()'>refresh</a>.</li> <li>Added the exception to your pop-up blocker but still getting this? <br/> <a href='http://boomeranggmail.com/faq.html#Troubleshoot'>Click here</a> to troubleshoot.</a></li></div>");
else if("Safari"===t||"Old Safari"===t){var k=a("<div class='overlay' style='background:#bcbcbc; opacity:0.9;filter:alpha(opacity=90);'><div id='dialog' style='height:100px'><div id='title-bar'>Logging in...</div><div class='dialog-content'> Please <a id='safari-boomerang' href='javascript:void(0)'>click here</a> so we can log you in with Boomerang.</div></div></div>");a("body").append(k);a("#safari-boomerang").click(function(){d(f,g,m);k.remove()})}else w("Attempt failed: "+ea[f]),c&&c("Failed to authenticate.")}
function g(b,c){var d,e=u();"Chrome"===t?(d=a("<div class='overlay' style='background:#bcbcbc; opacity:0.95; filter:alpha(opacity=95);'><img id='blue-arrow' style='position:absolute;top:100px;right:100px;visibility:hidden;' width='200px' height='266px' src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/bluegiantarrow2.png' /><div id='dialog' style='height:auto; position:absolute; left:0; right:0;'><div id='title-bar'>Authenticating...</div><div class='dialog-content' style='text-align:center;'><img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/auth-loader.gif'/></div></div></div>"),
setTimeout(hb,5E3)):d=a("<div class='overlay' style='background:#bcbcbc; opacity:0.9; filter:alpha(opacity=9);'></div>");var f=0,m=0;try{f=window.screenY+Math.max(0,Math.floor((a(window).height()-450)/2)),m=window.screenX+Math.max(0,Math.floor((a(window).width()-800)/2))}catch(k){}a("body").append(d);var l=window.open("https://b4g.baydin.com/mailcruncher/login?guser="+e,"","width=800,height=450,location=1,status=1,resizable=1,top="+f+",left="+m),p=setInterval(function(){if(!l&&"Chrome"!==t||l.closed)d.remove(),
clearInterval(p),-1===t.indexOf("Safari")&&-1===t.indexOf("Firefox")?Y("https://b4g.baydin.com/mailcruncher/checklogin?guser="+e+"&hasAlreadyAuthenticated=True",b,c):Y("https://b4g.baydin.com/mailcruncher/checklogin?guser="+e,b,c)},100)}var m=u();Y("https://b4g.baydin.com/mailcruncher/checklogin?guser="+m,d,"")}var g=u(),l={guser:g};e&&(l.hasAlreadyAuthenticated="True");a.ajax({url:"https://b4g.baydin.com/mailcruncher/checklogin2",data:l,type:"GET",xhr:M,success:function(a){var b=a.status,c=a.plan;
null!=c&&G("b4g_plan-"+g,c);c=a.preferences;null!=c&&G("b4g_preferences-"+g,JSON.stringify(c));a=a.respondable;null!=a&&G("b4g_respondable-"+g,JSON.stringify(a));d(b)},error:function(){G("b4g_plan-"+g,"pro - trial");f(b,c);n(["dev","checkloginerror",t])}})}function f(a){"unauthenticated"===a?l(g):"success"===a||"paywall"===a&&!d?(b(),xb()):"paywall"===a&&(Z(20),c&&c())}function g(e){if("success"===e||"paywall"===e&&!d)b(),xb();else if("paywall"===e)Z(20),c&&c();else if("cookies"===e)w("Attempt failed: "+
ea[28]),c&&c("Failed to authenticate.");else if("Firefox"===t)w("<div id='error_dialog' style=''><ol><li>Do you have a pop-up blocker enabled?<br/><b>Click 'Options' or 'Preferences'</b> in the notification bar above, click on <b>'Allow pop-ups on mail.google.com'</b>, and <a href='javascript: window.location.reload()'>refresh</a>.</li> <li>Added the exception to your pop-up blocker but still getting this? <br/> <a href='http://boomeranggmail.com/faq.html#Troubleshoot'>Click here</a> to troubleshoot.</a></li></div>");
else if("Safari"===t||"Old Safari"===t){var g=a("<div class='overlay' style='background:#bcbcbc; opacity:0.9;filter:alpha(opacity=90);'><div id='dialog' style='height:100px'><div id='title-bar'>Logging in...</div><div class='dialog-content'> Please <a id='safari-boomerang' href='javascript:void(0)'>click here</a> so we can log you in with Boomerang.</div></div></div>");a("body").append(g);a("#safari-boomerang").click(function(){f(e);g.remove()})}else w("Attempt failed: Failed to authenticate"),c&&
c("Failed to authenticate.")}function l(b){var c,d=u();"Chrome"===t||"Opera"===t?(c=a("<div class='overlay' style='background:#bcbcbc; opacity:0.95; filter:alpha(opacity=95);'><img id='blue-arrow' style='position:absolute;top:100px;right:100px;visibility:hidden;' width='200px' height='266px' src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/bluegiantarrow2.png' /><div id='dialog' style='height:auto; position:absolute; left:0; right:0;'><div id='title-bar'>Authenticating...</div><div class='dialog-content' style='text-align:center;'><img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/auth-loader.gif'/></div></div></div>"),
setTimeout(hb,5E3)):c=a("<div class='overlay' style='background:#bcbcbc; opacity:0.9; filter:alpha(opacity=9);'></div>");var f=0,g=0;try{f=window.screenY+Math.max(0,Math.floor((a(window).height()-600)/2)),g=window.screenX+Math.max(0,Math.floor((a(window).width()-800)/2))}catch(l){}a("body").append(c);var h=window.open("https://b4g.baydin.com/mailcruncher/login?guser="+d,"","width=800,height=600,location=1,status=1,resizable=1,top="+f+",left="+g),n=setInterval(function(){if(!h&&"Chrome"!==t&&"Opera"!==
t||h.closed)c.remove(),clearInterval(n),-1===t.indexOf("Safari")&&-1===t.indexOf("Firefox")?e(b,!0):e(b,!1)},100)}e(f,!1)}function za(a,c){fa(a,c,!0)}function Fa(b){b||(b=q());var c=a(".boomerangSendCheck",b);c.is(":checked")&&(c.hide(),c.attr("disabled",!0),c.after("<img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/checkbox-loader.gif' class='b4g_checkbox_loader' alt='Loading...'>"),za(function(){c.show();c.attr("disabled",!1);a(".b4g_checkbox_loader").remove();if("premium"===S()){var d=
JSON.parse(I("b4g_preferences-"+u()));d.crm.active&&"boomerang"===d.crm.bccIncludeWith&&Qb(b,d.crm.bccAddress)}},function(){c.show();c.attr("disabled",!1);c.attr("checked",!1);a(".b4g_checkbox_loader").remove()}))}function wa(a){a=a.replace(/^\s+|\s+$/g,"").replace(/^in|^In|^IN/,"+");var c=Date.parse(a.toLowerCase().replace("tomorrow","").replace("tom","")),d;if(d=c&&c<new Date)d=a.toLowerCase(),d=0===d.indexOf("sun")||0===d.indexOf("mon")||0===d.indexOf("tue")||0===d.indexOf("wed")||0===d.indexOf("thu")||
0===d.indexOf("fri")||0===d.indexOf("sat");d&&-1===a.indexOf("yester")&&-1===a.indexOf("today")&&(c=c.addDays(7));-1!==a.toLowerCase().indexOf("tom")&&(c||(c=new Date),c=c.addDays(1));c&&null===extractTime(a)&&0===c.getHours()&&0===c.getMinutes()&&(d=new Date,c.set({hour:d.getHours(),minute:d.getMinutes()}));c&&c<(new Date).addDays(-1)&&c>(new Date).addYears(-1)&&-1===a.indexOf("day")&&-1===a.indexOf("now")&&!hasYear(a)&&(c=c.addYears(1));a=a.trim().toLowerCase();if(/^00:\d{1,2}\s*p\.?(m\.?)?$/.test(a))return null;
c&&c<new Date&&(/^\d{1,2}:\d{1,2}$/.test(a)?(c=c.addHours(12),c<new Date&&(c=c.addHours(12))):/^\d{1,2}(:\d{1,2})?\s*(a|p)\.?(m\.?)?$/.test(a)&&c.addDays(1));return c}function zb(a){var c=new Date;return c>a?new Date:new Date(c.valueOf()+Math.floor(Math.random()*(a-c)))}function Kc(a,c,d,e){var f=a.toLowerCase(),f=f.replace(/(th|rd|nd|st)/g,""),f=f.replace(/augu/g,"august"),f=f.replace(/september/g,"sep"),f=f.replace(/sept/g,"sep");(a=hasYear(f))||(f+=", "+e.getFullYear());var g=c.toLowerCase(),g=
g.replace(/noon/g,"12:00pm"),g=g.replace(/midnight/g,"12:00am"),g=g.replace(/at|to|from|until|around/g,""),g=g.replace(/[ \.\-\n\r\t]/g,""),g=g.replace(/o('|\u2019)?clock|ish/g,":00"),g=g.replace(/(a\.?m\.?)/g,"am"),g=g.replace(/(p\.?m\.?)/g,"pm");/^\d+$/.test(g)&&(g+=":00");/^\d?\d:?\d*:?\d*$/.test(g)&&(g=/^(8|9|10|11):?\d*:?\d*$/.test(g)&&d?g+"am":g+"pm");d=Date.parse(f+" "+g);if(null==d)return null;!/((a|p)\.?m\.?)/i.test(c)&&c&&d<e&&(d=d.addHours(12));!a&&d<e&&d.clone().addDays(21)<new Date&&
(d=d.addYears(1));return d}function ld(a,c,d){if(null==a)return[];var e=extractDate(a),f=extractTime(a),g=extractDay(a);a=!/dinner|evening|night|party/i.test(a);null==f&&(f="6:45am");var l=[],m=null;null!=e?m=Kc(e,f,a,c):null!=g&&(e=new Date(c),g=Date.parse(g),g=null==g?(new Date).addDays(7):g.clearTime()<e.clearTime()?new Date(g.addDays(7)):new Date(g),m=Kc(g.toString("MMM d yyyy"),f,a,c));null!=m&&(c=m,f=[],a=new Date(c),f.push(new Date(a)),a=(new Date(c)).clearTime().addDays(-7).addHours(d),f.push(new Date(a)),
a=(new Date(c)).clearTime().addDays(-1).addHours(d),f.push(new Date(a)),a=(new Date(c)).clearTime().addHours(d),f.push(new Date(a)),a=(new Date(c)).clearTime().addHours(12),f.push(new Date(a)),a=(new Date(c)).clearTime().addDays(1).addHours(d),f.push(new Date(a)),a=(new Date(c)).clearTime().addDays(7).addHours(d),f.push(new Date(a)),l=f);return l}function ya(a,c,d){"undefined"===typeof d&&(d=!0);var e=new Date,f=!1;4>e.getHours()&&(f=!0);var g=Math.floor(30*Math.random())-15;try{switch(a.toLowerCase()){case "in 1 hour":e=
e.addHours(1);break;case "in 2 hours":e=e.addHours(2);break;case "in 4 hours":e=e.addHours(4);break;case "tomorrow morning":e=Date.today().addDays(1).addHours(c);d&&e.addMinutes(g);f&&(e=e.addDays(-1));break;case "tomorrow afternoon":e=Date.today().addDays(1).addHours(12);d&&e.addMinutes(g);f&&(e=e.addDays(-1));break;case "in 1 day":e=(new Date).addDays(1);break;case "in 2 days":e=(new Date).addDays(2);break;case "in 4 days":e=(new Date).addDays(4);break;case "in 1 week":e=(new Date).addWeeks(1);
break;case "in 2 weeks":e=(new Date).addWeeks(2);break;case "in 1 month":e=(new Date).addMonths(1);break;case "- by 5pm today":e=zb(Date.today().addHours(17));break;case "- within 1 week":e=zb(Date.today().addDays(7));break;case "- within 1 month":e=zb(Date.today().addMonths(1));break;default:e=wa(a)}}catch(l){e=a}return e}function Ga(a,c){if(null==a)return"Not a valid date/time";var d=gc(a,c);return d+=" "+((c?"":"at ")+a.toString("h:mm tt"))}function gc(a,c){return a.is().today()?c?"Today":"today":
Date.today().add(1).days().same().day(a)?c?"Tomorrow":"tomorrow":(c?"":"on ")+a.toString("ddd, MMM d, yyyy")}function xc(a,c,d){d=null==d?Date.today():d.clone();switch(a){case 1:d=d.first();break;case 2:d=d.second();break;case 3:d=d.third();break;case 4:d=d.fourth();break;default:d=d["final"]()}switch(c){case 6:d=d.sunday();break;case 0:d=d.monday();break;case 1:d=d.tuesday();break;case 2:d=d.wednesday();break;case 3:d=d.thursday();break;case 4:d=d.friday();break;case 5:d=d.saturday();break;default:return null}return d<
new Date?(d.add(1).month(),xc(a,c,d)):d}function Ta(a){a=a.match(Sa);for(var c="",d=0;null!=a&&d<a.length;d++)c+=a[d],d<a.length-1&&(c+=" ");return c}function kd(a){var c=a.search(/^Subject:/m);0<c&&(a=a.substring(c));c=a.search(/Show quoted text/);0<c&&(a=a.substring(0,c));return a}function rc(a){var c,d=a.length,e=[],f={};for(c=0;c<d;c++)f[a[c]]=0;for(c in f)f.hasOwnProperty(c)&&e.push(c);return e}function M(){var b=a.ajaxSettings.xhr();b.withCredentials=!0;return b}function Y(a,c,d){var e=new Image,
f="&uniquestring="+(new Date).getTime();e.onload=function(){var f=e.width;f>=ea.length&&f<Qa&&(f=16);e.style.display="none";c(f,a,d)};e.src=a+"&image=True"+f}function G(a,c){if("undefined"===typeof localStorage)n(["dev","localStorage error","not available"]);else try{"undefined"!==typeof a&&null!=a&&localStorage.setItem(a,c)}catch(d){"QUOTA_EXCEEDED_ERR"===d.name?n(["dev","localStorage error","over quota"]):n(["dev","localStorage error","unexpected error -- "+d.name,d.message])}}function I(a){if("undefined"===
typeof localStorage)return null;try{return localStorage.getItem(a)}catch(c){return null}}function Wc(){var a=I("hasSeenB4GTutorial"),c=u();null==a&&c&&(null!=I("b4gMenuEntries")?G("hasSeenB4GTutorial","yes"):Y("https://b4g.baydin.com/mailcruncher/hasseentutorial?guser="+encodeURIComponent(c),Pd,""))}function Pd(a,c,d){G("hasSeenB4GTutorial","yes");1===a&&"Old Safari"!==t&&Ma(1)}function Ma(b){n(["welcome dialog","show",b]);var c="",d="";switch(b){case 1:c="<div id='wc_screen'> <div class='wc_header'>Thank you for installing Boomerang.</div> <div class='wc_text'>Let's take you on a tour of Boomerang features inside Gmail.</div> <div class='wc_img'><div style='margin-top: 15px; margin-bottom: 5px;'><span style='margin-left: 100px;'><strong>Return messages to inbox</strong></span><span style='margin-left:100px;'><strong>Schedule messages</strong></span></div><img class='wc_screenshot' width='475px' style='margin-left: 70px;' src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/1_ftuepic.png' /></div><div class='wc_pg_no'>1 of 5 <span class='startButton b4g-button red'>START</span><a class='skipButton b4g-button' href='javascript:void(0)'>SKIP</a> </div></div>";
d="This feature is available in Safari versions 5.1 and higher. Please update Safari to use this feature.";break;case 2:c="<div id='wc_screen'> <div class='wc_header'>Boomerang</div> <div class='wc_text'>Bring a message back to your inbox when you want it.</div> <div class='wc_img'><p class='wc_img_header'>Clicking on the Boomerang button will allow you to specify the time you want the message back in your inbox.</p><div align='center'><img class='wc_screenshot' height='106px' src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/2_boomerangbutton.png' /></div><br/> <a class='wc_video_link' href='http://www.youtube.com/watch?v=XU1iRwqJC1U' target='_blank'><img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/playbutton.png' style='position:relative; top:3px;'> Watch a video to learn more.</a></div><div class='wc_pg_no'>2 of 5 <span class='previousButton b4g-button'>BACK</span><span class='nextButton b4g-button green'>NEXT</span><a class='skipButton b4g-button' href='javascript:void(0)'>SKIP</a> </div></div>";
break;case 3:c="<div id='wc_screen'> <div class='wc_header'>Send Later</div> <div class='wc_text'>Schedule a message to be sent anytime as long as it's in the future.</div> <div class='wc_img'><p class='wc_img_header'>Write a message in Gmail like you always do and then click Send Later menu to specify the time you want it sent. You don\u2019t need to do anything else, we will handle the rest.</p><div align='center'><img class='wc_screenshot' height='160px' src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/3_sendlater.jpg' /></div><a class='wc_video_link' href='http://www.youtube.com/watch?v=abqz45EN98w' target='_blank'><img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/playbutton.png' style='position:relative; top:3px;'> Watch a video to learn more.</a></div><div class='wc_pg_no'>3 of 5 <span class='previousButton b4g-button'>BACK</span><span class='nextButton b4g-button green'>NEXT</span><a class='skipButton b4g-button' href='javascript:void(0)'>SKIP</a> </div></div>";
break;case 4:c="<div id='wc_screen'> <div class='wc_header'>Manage Scheduled Messages</div> <div class='wc_text'>View, reschedule or cancel scheduled messages all in one place.</div> <div class='wc_img'><p class='wc_img_header'>Open the Boomerang  menu on the top right of Gmail screen. and click on  the Manage scheduled messages option. There, you will be able to see the list of all scheduled messages and reschedule or cancel them if you change your mind. You can also set your preferences for Booomerang.</p><div align='center'><img class='wc_screenshot' width='253px' src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/4_manage.jpg' /></div><br/><a class='wc_video_link' href='http://www.youtube.com/watch?v=_gWiqyVYOrc' target='_blank'><img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/playbutton.png' style='position:relative; top:3px;'> Watch a video to learn more.</a></div><div class='wc_pg_no'>4 of 5 <span class='previousButton b4g-button'>BACK</span><span class='nextButton b4g-button green'>NEXT</span><a class='skipButton b4g-button' href='javascript:void(0)'>SKIP</a> </div></div>";
break;case 5:c="<div id='wc_screen'><div class='wc_header'>More Advanced Features</div><div class='wc_text'>Boomerang includes a few more features that can help you with your Inbox management.</div><div class='wc_img' ><ul><li><span class='wc_text'><strong>Response Tracking</strong></span><a class='wc_video_link' href='http://www.youtube.com/watch?v=IfqOJV_3uqI' target='_blank'><img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/playbutton.png' style='position:relative; top:3px;'></a><br/><span class='wc_img_header'>Track responses to any email you send or receive and get a reminder if you don't get a reply</span></li><br/><li><span class='wc_text'><strong>Recurring Messages</strong></span><a class='wc_video_link' href='http://www.youtube.com/watch?v=_2BlqvRmi-s' target='_blank'><img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/playbutton.png' style='position:relative; top:3px;'></a><br/><span>Write an email and send it every day, week, month or any interval you choose</span></li><br/><li><span class='wc_text'><strong>Notes</strong></span><a class='wc_video_link' href='http://www.youtube.com/watch?v=uwNoNCUBP4M' target='_blank'><img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/playbutton.png' style='position:relative; top:3px;'></a><br/><span class='wc_img_header'>Add notes to your Boomerang'ed messages</span></li><br/><li><span class='wc_text'><strong>Boomerang Mobile</strong></span><a class='wc_video_link' href='http://www.youtube.com/watch?v=MUZppQm08LM' target='_blank'><img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/playbutton.png' style='position:relative; top:3px;'></a><br/><span class='wc_img_header'>Schedule messages on the go on any smart phone or tablet</span></li><br/><li><span class='wc_text'><strong>Read Receipts</strong></span><a class='wc_video_link' href='http://www.youtube.com/watch?v=YJiMO1weJhA' target='_blank'><img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/playbutton.png' style='position:relative; top:3px;'></a><br/><span class='wc_img_header'>Receive a notification about whether an email is opened or if links in the email are clicked.</span></li></ul></div><div class='wc_pg_no'>5 of 5<span class='previousButton b4g-button last'>BACK</span><a class='skipButton b4g-button green' href='javascript:void(0)'>FINISH</a></div></div></div>"}"Old Safari"===
t?alert(d):(r=q(),a(".dialogdiv").remove(),c="<div class='dialogdiv' style='display:none;'>"+c+"</div>",a("body",r).append(a(c)),a(".dialogdiv",r).dialog({modal:!0,closeOnEscape:!0,width:770,dialogClass:"welcomeDialog"}),a(".startButton").click(function(){Ma(2)}),a(".skipButton").click(function(){a(".dialogdiv").dialog("close")}),a(".nextButton").click(function(){Ma(b+1)}),a(".previousButton").click(function(){Ma(b-1)}),va())}function Ab(b){b=b||{};var c=a(Qd);b.content instanceof ia?a(".b4g-ftue-content",
c).append(b.content):a(".b4g-ftue-content",c).text(b.content);c.css({left:b.left,top:b.top,right:b.right,bottom:b.bottom,width:b.width||"320px"}).find(".b4g-ftue-pointer").addClass("b4g-pointer-"+(b.dir||"lr")).end().find(".b4g-ftue-button").text(b.button||"").hover(function(){a(this).addClass("T-I-JW")},function(){a(this).removeClass("T-I-JW")}).click(function(a){a.preventDefault();b.close&&setTimeout(function(){b.close()},0);c.remove()}).end().appendTo("body");return c}function cb(b){if(0>=a("#b4g_manage").length)return setTimeout(function(){b({"user-in-pop-out":!0})},
0);if(cb.requestInFlight)return setTimeout(function(){b({"request-in-flight":!0})},0);if(I("b4g-has-seen-click-open-tracking-tutorial"))return setTimeout(function(){b({"tutorial-has-been-seen":!0})},0);var c=u();Y("https://b4g.baydin.com/mailcruncher/hasseentrackingtutorial?guser="+encodeURIComponent(c),function(a,c,f){cb.requestInFlight=!1;2===a?b(null):(G("b4g-has-seen-click-open-tracking-tutorial",!0),b({"tutorial-has-been-seen":!0}))});cb.requestInFlight=!0}function Id(b){var c=a(".b4g-tracking-toggle",
b),d=c.offset();c.trigger("mouseenter");b.parents("body > .dw").andSelf().css("z-index",5);a('<div class="b4g-ui-widget-overlay"/>').css("z-index",3).appendTo("body");Ab({bottom:a("body").height()-d.top+2,right:a("body").width()-(d.left+c.outerWidth()/2)-24,content:a(Bb[0]),close:function(){c.trigger("mouseleave");Rd(b)},button:"Next"});n(["click open tracking FTUE","step1"])}function Rd(b){var c=a(".b4g-send-condition",b),d=c.offset();Ab({bottom:a("body").height()-d.top+2,right:a("body").width()-
(d.left+c.outerWidth()/2)-24,content:a(Bb[1]),close:function(){Sd(b)},button:"Next"});n(["click open tracking FTUE","step2"])}function Sd(b){Vb(a("#b4g_manage"));var c=a("#tmmanage").offset();b.parents("body > .dw").andSelf().css("z-index",null);a(".b4g-ui-widget-overlay").click(function(a){a.stopPropagation()});Ab({top:c.top-8,left:c.left-420,width:380,dir:"ur",content:a(Bb[2]),close:function(){a(".b4g-ui-widget-overlay").remove();G("b4g-has-seen-click-open-tracking-tutorial",!0)},button:"Ok, got it."});
n(["click open tracking FTUE","step3"])}function na(a,c){return a.replace(/\{\{(.*?)\}\}/g,function(a,b){var f=b.split("."),g,l=c;do g=f.shift(),l=l[g];while(0<f.length&&null!=l);return l})}function Td(b,c){c=c||{};var d=Ud[b],e=(c.idx||0)%d["share-message"].length,f=d["share-message"][e],d={"dialog-message":d["dialog-message"],text:encodeURIComponent(f.text),"url-twitter":encodeURIComponent(na(f.url,"twitter")),"url-fb":encodeURIComponent(na(f.url,"fb")),"url-linkedin":encodeURIComponent(na(f.url,
"linkedin")),"url-gplus":encodeURIComponent(na(f.url,"gplus"))},d=a(na(Vd,d)).find(".b4g-viral-close").click(function(c){c.preventDefault();a(".b4g-viral-hook").remove();n("Viral hook closed",b)}).end().appendTo("body").animate({top:0});a(".b4g-viral-share-options a",d).click(function(){n("Viral hook share click",b,a(this).data("share-type"))});n("Viral hook shown",b);return{idx:e+1}}function La(a){var c=S();if("personal"!==c&&"pro"!==c&&"premium"!==c){var d;try{d=JSON.parse(I("b4g-viral-hook")||
"{}")}catch(l){d={}}if("send-later"===a.type||"return-later"===a.type)d["last-"+a.type]=(new Date).getTime(),c=a.type+"-count",d[c]=d[c]||0,d[c]+="bulk"in a?a.bulk:1;G("b4g-viral-hook",JSON.stringify(d));c=d["send-later-count"]||0;c+=d["return-later-count"]||0;if(!(3>c)){var c=d.lastShown||{},e=new Date,f=e.getTime()-24192E5,g;for(g in c)if(c.hasOwnProperty(g)){if(null==c[g].date){G("b4g-viral-hook","{}");return}if(c[g].date>f)return}g="none";"return-later"===a.type&&a.isByMagic?g="detected-date-by-magic":
"send-later"===a.type&&a.isIfNoReply?g="send-later-if-no-reply":"send-later"===a.type&&0<e.getHours()&&6>e.getHours()?g="send-later-at-1am-5am":"is-inbox-zero"===a.type&&d["last-return-later"]&&e.getTime()-36E5<d["last-return-later"]&&(g="inbox-zero-within-hour");"none"===g||g in c&&c[g].date>e.getTime()-7776E6||(a=Td(g,c[g]),c[g]={date:(new Date).getTime(),info:a},d.lastShown=c,G("b4g-viral-hook",JSON.stringify(d)))}}}function Sb(b){var c=a(".aeF");0>=c.length?setTimeout(function(){Sb(b)},1E3):(new ka(function(){if(0<
document.location.href.indexOf("#inbox")||0<a(".TK > .ain .afM").length)0>=a(".J-KU-KO .aKp.aIf-aLf").length||0>=a(".aRv:visible").length||b()})).observe(c[0],{childList:!0,subtree:!0})}var r=q(),X=null,Ra=null,jb=!1,Q=null,ea="success;success;Boomerang encountered a problem during authentication. Ask Boomerang to send this message again, and we will log you back in.;Boomerang was not able to access the Sent Mail folder. Please enable IMAP and allow Sent Mail to be shown in IMAP.;403 Not Authenticated;Boomerang was not able to access the Drafts folder. Please enable IMAP and allow Drafts to be shown in IMAP.;Boomerang was not able to access the Boomerang-Outbox folder. Please enable IMAP and allow the Boomerang-Outbox label to be shown in IMAP.;Boomerang was not able to access the Inbox. Please enable IMAP. In addition, please allow All Mail to be shown in IMAP.;Boomerang was not able to access the All Mail folder. Please enable IMAP. In addition, please allow All Mail to be shown in IMAP.;Boomerang cannot uniquely identify this email, because there is another draft with the same subject and recipient. Please change the subject and try again.;Boomerang cannot uniquely identify this email, because there is another email in the Boomerang-Outbox with the same subject and recipient. Please change the subject and try again.;Boomerang was unable to find this Draft. Please allow the draft to save again after a couple seconds, then try again. If you are still unsuccessful and you don't mind sharing this message to help improve our product, please forward to support@baydin.com;Boomerang was not able to locate this email. Please try again. If you are still unsuccessful and you don't mind sharing this email to help us improve our product, please forward it to support@baydin.com.;You've reached the maximum number of messages that can be delivered at the time that you specified. Please adjust your delivery time to be at least two minutes apart from your other messages and try again.;Invalid date.;Boomerang was not able to identify the sender of this email. One possible conflict is the Gmail Labs: Authentication icon for verified senders. If you do not have this Labs enabled, please let us know at support@baydin.com.;Boomerang encountered a problem while processing this email. Please try again. If you are still unsuccessful and you don't mind sharing this email to help us improve our product, please forward it to support@baydin.com;nag_screen_1;nag_screen_2;nag_screen_3;paywall;pro;personal;basic;none;account error;Boomerang was not able to access the Boomerang folder. Please enable IMAP and allow the Boomerang label to be shown in IMAP.;Boomerang was not able to access the Boomerang Outbox folder. Please enable IMAP and allow the Boomerang-Outbox label to be shown in IMAP.;Third party cookies must be enabled for Boomerang to work, but they are not currently enabled in your browser.<br/><br/> Please enable them, or create an exception for <strong>b4g.baydin.com</strong>. For information on how to do this, please visit the help page for your browser: <br /><a target='_blank' href='http://support.google.com/chrome/bin/answer.py?hl=en&answer=95647'>Chrome</a> | <a target='_blank' href='http://support.mozilla.org/en-US/kb/Enabling%20and%20disabling%20cookies'>Firefox</a> | <a target='_blank' href='http://docs.info.apple.com/article.html?path=Safari/5.0/en/9277.html'>Safari</a>;You have scheduled too many messages to be sent during that 24-hour period. This message was NOT scheduled. Please schedule your message to be sent at least 24 hours earlier or later. If you want to remove this limit, please upgrade to a paid plan.;premium;Boomerang doesn't support attaching Google+ Photos at this time. Please download this photo to your computer and drag-and-drop the saved copy into the email instead. Alternatively, add it as a regular attachment to the email.".split(";"),
Qa=100,Sa=/[a-zA-Z0-9\._+\-]+@[a-zA-Z0-9\.\-]+\.[a-z\.A-Z]+/g,ra=Array(7);ra[0]="Monday";ra[1]="Tuesday";ra[2]="Wednesday";ra[3]="Thursday";ra[4]="Friday";ra[5]="Saturday";ra[6]="Sunday";var ka=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,eb={read:function(a,c){setTimeout(function(){var d=I(a);c(null,d)},0)},write:function(a,c,d){G(a,c);setTimeout(function(){d(null)},0)}};window.b4g=window.b4g||{};var a,ia,Cb={init:function(){this.browser=this.searchString(this.dataBrowser)||
"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){for(var c=0;c<a.length;c++){var d=a[c].string,e=a[c].prop;this.versionSearchString=a[c].versionSearch||a[c].identity;if(d){if(-1!==d.indexOf(a[c].subString))return a[c].identity}else if(e)return a[c].identity}},searchVersion:function(a){var c=a.indexOf(this.versionSearchString);if(-1!==
c)return parseFloat(a.substring(c+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"OPR",identity:"Opera"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},
{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,
subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};Cb.init();var t="none";switch(Cb.browser){case "Chrome":t="Chrome";break;case "Firefox":t="Firefox";break;case "Safari":t=5.1>Cb.version?"Old Safari":"Safari";break;case "Opera":t="Opera";break;default:t="Other"}window.B4G_THIS_IS_OPERA&&(t="Opera");var Wa=!1;window.onbeforeunload=
function(){if(Wa)return"Firefox"===t&&alert("You are editing a message that you previously scheduled with Boomerang. DO NOT LEAVE THIS PAGE WITHOUT RESCHEDULING. \n\nIf you do, you will CANCEL SENDING THIS MESSAGE ALTOGETHER and the message will remain in your Drafts folder."),"You are editing a message that you previously scheduled with Boomerang. DO NOT LEAVE THIS PAGE WITHOUT RESCHEDULING. \n\nIf you do, you will CANCEL SENDING THIS MESSAGE ALTOGETHER and the message will remain in your Drafts folder."};
var Db=document.getElementsByTagName("head")[0],la,Eb,V=String(document.location),n=function(a){window.postMessage({type:"B4G_FROM_PAGE",trackedEventData:a},"*")},Ib=".ii",id=".iH > div",bd=".dK",Tb=".hP",Pc=".gD",Rc=".g3",md=".nH .if > .nH > .nH > .dJ",Ya=function(a){return 0<a.closest(".nH[role=list]").length},gd=function(){a(".D.E.G-atb").each(function(){3!==a(this).css("z-index")&&a(this).css("z-index",3)})},Zb='<div class="sendLaterTable boomerangReply" style="background-color: whiteSmoke; border: 1px solid #CFCFCF; border-width: 0 1px 1px 1px; margin: 0 -1px; overflow-y: hidden;"><table style="width:100%"><tr><td style="width: 80px"><div class="send-later-button tk3N6e-I J-J5-Ji W6eDmd tk3N6e-I-n2to0e L3 J-Zh-I J-J5-Ji Bq L3" aria-haspopup="true" style="-moz-user-select: none; background-color: #D14836; background-image: -webkit-linear-gradient(top,#DD4B39,#D14836); background-image: -moz-linear-gradient(top,#DD4B39,#D14836); background-image: -ms-linear-gradient(top,#DD4B39,#D14836); background-image: linear-gradient(top,#DD4B39,#D14836); color: white; border: 1px solid transparent; padding: 0 9px; -webkit-border-radius: 2px; -moz-border-radius: 2px; border-radius: 2px;cursor: pointer;font-size: 11px; font-weight: bold; white-space: nowrap; margin: 3px; height: 27px;line-height: 27px;min-width: 54px; outline: 0;" tabindex="0">Send Later</div></td> <td style="border-top: none; width: 7px"><div class="Uz"></div></td><td><div class="boomerangSendWidget" style="font-size:11px; float:left;"><label><input type="checkbox" class="boomerangSendCheck" value="boomSend" style="vertical-align:text-bottom;"/><span style="padding-right:4px;"> Boomerang this</span></label><div class="T-I J-J5-Ji Bq lX T-I-ax7 L3 b4g_button sendboomerang-button" style="padding: 1px 2px; height: 20px; font-weight: normal; margin: 0;"><div class="conditional-caption" aria-haspopup="true" style="line-height: 20px;" role="button" tabindex="0"><span class="conditional-caption-text"> in 2 days</span><div class="VP5otc-d2fWKd tk3N6e-I-J3 J-J5-Ji"><div class="conditional-caption-arrow G-asx T-I-J3 J-J5-Ji">&nbsp;</div></div></div></div><div class="T-I J-J5-Ji Bq lX T-I-ax7 L3 b4g_button b4g-send-condition" style="height: 20px; top: 3px; margin: 0 0 6px 4px; padding: 1px 0px;"><select name="ifResponse" class="boomerangSendCondition" style="background: url(https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/ifnoreplyarrow.png) no-repeat right center; border:0; padding: 2px 5px 2px 1px; background-color: transparent; color: #444; -webkit-appearance: none; -moz-appearance: none; vertical-align: middle; margin: 0px 5px 6px 0px;"><option value="no reply">if no reply</option><option value="no click">if not clicked</option><option value="no open">if not opened</option><option value="always">regardless</option></select></div><div class="T-I J-J5-Ji Bq lX T-I-ax7 L3 b4g_button b4g-tracking-toggle-holder" style="height: 20px; top: 3px; margin: 0 0 6px 4px; padding: 1px 0px;"><div/></div></td></tr></table></div>',
ic=15,jc="You can only have fifteen total times stored in the menu right now. Please remove an existing item to add a new one.",sb="<div class='b4g-notes' style='width: 220px'><h3 style='margin: 7px 0 10px 0;'>Enter the note to yourself below.</h3><textarea rows='10' id='note_entry' style='border:1pxsolid#999;background-color:#fbf1b5;width:100%;box-sizing:border-box;'>Some text</textarea><div style='font-size:.9em'>This note will return with your message.</div><div style='text-align:center;padding:10px 10px 7px 10px;'><button id='notes_save_button' class='by-button by-button-secondary' style='width:70px;'><span class='by-button-text'>Save</span></button><button id='notes_cancel_button' class='by-button' style='width:70px;margin-left:5px;'><span class='by-button-text'>Cancel</span></button></div></div>",
Ed=/\b((?:(?:https?:\/\/)|(?:www\d{0,3}[.])|(?:[a-z0-9.\-]+[.][a-z]{2,4})\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/,Fd=/^http:\/\/mailstat\.us\/tr\/t\/[a-z0-9]+\/[a-z0-9]+\/(.*)$/,Hd=function(){var a=1;return function(){return(a++).toString(36)}}(),Yc=function(){function b(c,f){var g=a.now();f=f||0;c=c.filter(function(a){a=d[a];return!a||12E4<g-a});0>=c.length||(a.ajax({type:"post",url:"https://b4g.baydin.com/tr/track-sender-open",
data:{email:u(),guids:c.join()},xhr:M,success:function(){},error:function(){c.forEach(function(a){d[a]=0});2<f||b(c,f+1)}}),c.forEach(function(a){d[a]=g}))}function c(){var d=a(".aeF");0>=d.length?setTimeout(c,1E3):(new ka(function(c){R()&&(c=a(".aHU"),0>=c.length||(c=c.find("[href^='http://mailstat.us/tr/opt-out']"),0>=c.length||(c=c.map(function(){if(a(this).data("has-been-ignored"))return null;var b=this.href.match(/\bguid=([0-9a-z]+)\b/);if(!b)return null;a(this).data("has-been-ignored",!0);return b[1]}).toArray(),
0<c.length&&b(c))))})).observe(d[0],{childList:!0,subtree:!0})}var d={};return c}(),oa=function(){var b,c=-1<window.navigator.platform.indexOf("Mac"),d=function(){eb.write("b4g-keyboard-shortcuts-enabled",JSON.stringify(b),function(a){a&&console.log("Error saving keyboard-shortcuts-enabled",a)})},e=function(c){if(b&&66===c.which&&!(0<a("#b4g_menu:visible").length||0<a(c.target).closest(".editable,input:text,input[type=url],input[type=email],input[type=search],textarea,[contenteditable]").length)){var d=
a(".boomerang-button, .bulkboomerang").filter(":visible");0>=d.length||(d.click(),c.preventDefault())}},f=function(d,e){if(b&&83===d.which&&(c&&d.metaKey&&!d.ctrlKey||!c&&(d.metaKey||d.ctrlKey))&&!(0<a("#b4g_menu:visible").length||0>a(".send-later-button:visible").length)){var f=Ea(d.target,null);null!==f&&(a(".send-later-button",f).click(),d.preventDefault())}},g=function(a){var c=ma(a);c.data("has-shortcut-listener")||(c.data("has-shortcut-listener",!0),c.keydown(function C(d){b&&(d.target=a,f(d),
c.unbind("keydown",C).keydown(C))}))};return{init:function(){eb.read("b4g-keyboard-shortcuts-enabled",function(c,d){b=!1;try{b=JSON.parse(d)}catch(g){}b&&a(document).bind("keydown keyup keypress",e).bind("keydown keyup keypress",f)})},disable:function(){b=!1;a(document).unbind("keydown keyup keypress",e).unbind("keydown keyup keypress",f);d()},enable:function(){b=!0;a(document).bind("keydown keyup keypress",e).bind("keydown keyup keypress",f);d()},is_enabled:function(){return b},add_compose_listen:function(c){0<
a(".editable iframe",c).length&&g(c);a(c).bind("keydown keyup keypress",function(a){b&&f(a)})},enable_menu_arrow_keys:function(){a("#b4g_menu").keydown(function(b){if(b.which===a.ui.keyCode.UP||b.which===a.ui.keyCode.TAB||b.which===a.ui.keyCode.DOWN||b.which===a.ui.keyCode.ESCAPE)if(b.preventDefault(),b.stopPropagation(),b.which===a.ui.keyCode.ESCAPE)ca();else{var c=a(".b4g-menu-option:visible",this),d=a(".b4g-state-selected",this);b=b.which===a.ui.keyCode.DOWN||b.which===a.ui.keyCode.TAB&&!b.shiftKey;
0===d.length?d=b?0:-1:(b=b?1:-1,d=(c.index(d)+b)%c.length);c.removeClass("b4g-state-selected").eq(d).addClass("b4g-state-selected").find("a, input[type='text'], input[type='checkbox']").focus()}})}}}(),ja=function(){function b(){y.enabled||(y.enabled=!0,m(y),c(y))}function c(a){var b=u();eb.write("b4g-inline-manage-data:"+b,JSON.stringify(a),function(a){a&&console.warn("Error writting b4g inline-mange data: ",a)})}function d(a){var b=Date.now();if(b>=O||b+a<=O)setTimeout(function(){m(y)},a),O=b+a}
function e(){var b=a(".aeF");0>=b.length?setTimeout(e,1E3):(m(y),(new ka(f)).observe(b[0],{childList:!0,subtree:!0}),I(b))}function f(){1<=a(".aHU").length&&R()&&(y&&!y.enabled&&-1<window.location.hash.indexOf("/Boomerang")&&b(),m(y))}function g(a){var b=u();eb.read("b4g-inline-manage-data:"+b,function(b,c){b&&console.log("Error loading inline manage data",b);var d;try{d=JSON.parse(c||"{}")}catch(e){d={}}y=y||d||{};y.enabled=d.enabled||!1;y["last-updated"]=d["last-updated"]||0;y["thread-ids"]=d["thread-ids"]||
{};a(y)})}function l(a){if(void 0===y)g(function(){l(a)});else{var b={},d=y["thread-ids"];a.forEach(function(a){b[a]=d[a]||{}});y["thread-ids"]=b;c(y);return b}}function m(a){void 0===a?g(function(a){m(y)}):y.enabled&&(h(y["thread-ids"]),H["managed-thread-ids"]||(a=Date.now()-y["last-updated"],18E6>a?d(18E6-a):k(function(a,b){if(a)d(6E5);else if(b)if(b.success){var c=l(b["thread-ids"]);d(18E6);h(c)}else d(6E5);else d(6E5)})))}function k(b){a.ajax({type:"get",url:"https://b4g.baydin.com/inline-manage/managed-thread-ids",
data:{email:u(),uid:Y},xhr:M,success:function(a){b(!1,a)},error:function(a,c,d){b({status:c,error:d})},complete:function(){H["managed-thread-ids"]=void 0;delete H["managed-thread-ids"];y&&(y["last-updated"]=Date.now(),c(y))},dataType:"json"});H["managed-thread-ids"]=!0}function h(b){var c=R();if(b=b[c]){a(".cf.hX:contains('Boomerang')").not(":contains('Boomerang-Returned')").find(".hV.hM").hide().end().find(".hU.hM:contains('Boomerang')").css({"background-color":"#FBF1B5",color:"#666"}).filter(":contains('Boomerang-Outbox')").css({"background-color":"#FFD76E",
color:"#666"});var d=b["last-updated"]||0;9E5<Date.now()-d&&p(c);b.returns&&ha(b.returns,d);b.sends&&T(b.sends,d);b.recurrings&&X(b.recurrings,d);b.tracks&&N(b.tracks,d)}}function p(b){H[b]||(a.ajax({type:"get",url:"https://b4g.baydin.com/inline-manage/manage-info",data:{"thread-id":b,email:u()},xhr:M,success:function(a){a.success&&(a.success=void 0,delete a.success,y["thread-ids"][b]=a,c(y),h(y["thread-ids"]))},error:function(){d(6E5)},complete:function(){H[b]=void 0;delete H[b];var a=y["thread-ids"][b]||
{};a["last-updated"]=Date.now();y["thread-ids"][b]=a;c(y)},dataType:"json"}),H[b]=!0)}function n(b,c,d){d=d||{};var e=c.offset();b.addClass("b4g-inline-popup").appendTo("body").css({top:e.top+c.outerHeight()+(d.top||0),left:e.left-b.outerWidth()+c.outerWidth()+(d.left||0)});a(document).click(function W(d){c[0]===d.target||b[0]===d.target||a.contains(c[0],d.target)||a.contains(b[0],d.target)||!a.contains(document,d.target)||0<a(d.target).closest(".b4g-ui-datepicker").length||(d.preventDefault(),b.remove(),
a(document).unbind("click",W))})}function v(b,d,e){var f=a(sb);f.addClass("b4g-inline-notes-edit").find("textarea").val(b.notes).end().find("#notes_save_button").click(function(){var d=b.notes;b.notes=a("textarea",f).val();a(".b4g-inline-notes-text",e).text(b.notes);c(y);var g=function(){alert("Sorry, there was an error. We can't save your note. Try again later.");b.notes=d;a(".b4g-inline-notes-text",e).text(d);c(y)};fa(function(){a.ajax({type:"post",url:"https://b4g.baydin.com/inline-manage/update-notes",
data:{"return-later-id":b.id,notes:b.notes},xhr:M,success:function(a){a.success||g()},error:g,dataType:"json"})},g);f.remove()}).end().find("#notes_cancel_button").click(function(){f.remove()}).end();n(f,d,{top:5});return f}function D(b,c,d){var e=null!=b.condition,f=null!=b["is-conditional"],g=(new Date).toString("MMM d, yyyy h:mm tt"),m=a(".g3:visible"),k=0<m.length,m=m[0]===c.closest(".adn").find(".g3")[0],k=f&&k&&!m,l=a(S.reschedule);l.find(".b4g-reschedule-date").val(g).bind("change keyup",function(){var b=
wa(a(this).val()),c=Ga(b,!0);a(".b4g-reschedule-preview",l).text(c).toggleClass("b4g-state-invalid",null==b||b<new Date)}).end().find(".b4g-return-condition").toggle(e).end().find(".b4g-send-ifnoreply, .b4g-ifnoreply-warning").toggle(k).end().find(".b4g-send-ifnoreply input").change(function(){a(this).is(":checked")&&((new Date).toString("MM/d a\\t h:mmtt"),a(".b4g-ifnoreply-warning").html("This message will be sent if no replies are received between <strong>now and the scheduled time</strong>."))}).end().find("[type='submit']").click(function(){a(this).closest("form").submit()}).end().find("form").bind("submit",
function(b){b.preventDefault();b=wa(a(".b4g-reschedule-date",l).val());var c;e&&(c=a(".b4g-return-condition",l).val());f&&(c=a(".b4g-send-ifnoreply input",l).attr("checked"));b?d({date:b,condition:c}):alert("Please enter in a valid date.")}).end().find(".b4g-reschedule-cancel").click(function(){l.remove()}).end();$a(l.find(".b4g-reschedule-date"));e&&-1<"OC".indexOf(b.condition)&&a(".b4g-return-condition",l).append('<option value="O">Only if not opened</option>').append('<option value="C">Only if not clicked</option>');
e&&a(".b4g-return-condition",l).val(b.condition);f&&a(".b4g-send-ifnoreply input",l).attr("checked",b["is-conditional"]);n(l,c,{left:1});return l}function r(a){var b=y["thread-ids"];b[a]["last-updated"]=Date.now();h(b)}function q(b,c){var d=b.responseText||b.error||b;"string"!==a.type(d)&&(d=c||"Sorry, there was an error. We can't save your update. Try again later.");alert(d)}function z(b,d,e){var f=a(e).closest(".b4g-inline-part").data("manage-data"),g=R(),m,k;"send"===d?(m="send-time",k="is-conditional"):
"return"===d&&(m="return-time",k="condition");var l=f[k],p=f[m],v=function(a){q(a);f[k]=l;f[m]=p;c(y);r(g)};d=a(e).closest(".by-button");var n=D(f,d,function(d){f[k]=d.condition;f[m]=d.date.getTime();c(y);a(".b4gid-"+f["hex-gmail-id"]).remove();h(y["thread-ids"]);fa(function(){a.ajax({type:"post",url:"https://b4g.baydin.com"+b,data:{id:f.id,offset:d.date.getTime(),condition:d.condition},xhr:M,success:function(a){a.success||v(a)},error:v,dataType:"json"})},v);n.remove()})}function w(b,d,e,f){var g=
a(e).closest(".b4g-inline-part").data("manage-data"),m=R();e=y["thread-ids"];var k=e[m][d+"s"];d=k.indexOf(g);-1<d&&k.splice(d,1);c(y);a(".b4gid-"+g["hex-gmail-id"]).remove();a(".m"+g["hex-gmail-id"]).removeClass("b4g-inline-pending-content");h(e);var l=function(a){q(a);k.push(g);c(y);r(m)};fa(function(){a.ajax({type:"post",url:"https://b4g.baydin.com"+b,data:{id:g.id},xhr:M,success:function(a){a.success||l(a);f&&f()},error:l,dataType:"json"})},l)}function x(b,d,e){a(".by-button-text",e).text("Cancelling...");
var f=a(e).closest(".b4g-inline-part").data("manage-data"),g=R(),m=function(a){q(a);r(g)};fa(function(){a.ajax({type:"post",url:"https://b4g.baydin.com"+b,data:{id:f.id},xhr:M,success:function(a){a.success||m(a);a=y["thread-ids"][g][d+"s"];var b=a.indexOf(f);-1<b&&a.splice(b,1);c(y);window.location.reload()},error:m,dataType:"json"})},m)}function B(b){var d=Bd(function(){var e=a.extend({},b),f=R(),g=Date.parse(a("#start_date_input").val()+" "+a("#start_time_input").val());if(!g||g<new Date)alert("Invalid start date");
else{var m=ub(),k=a("#num_interval").val(),l=vb(g);if(l){var p=null;"monthweek"==a("#frequency").val()&&(p=a("#set_position").val());var v="None",n="None";if(a("#radio_num_occurences").attr("checked"))v=a("#num_occurences").val(),n=E(g,k,m,l,v);else if(a("#radio_end_date").attr("checked")){n=Date.parse(a("#end_date").val()+" "+a("#start_time_input").val());if(null==n){alert("Invalid end date");return}n=n.getTime()}var U=function(d){q(d);a.extend(b,e);c(y);r(f)};fa(function(){var c={id:b.id,frequency:m,
interval:k,utc_weekday:l,start:g.getTime(),end:n,num_occurences:v};p&&(c.setPosition=p);a.ajax({type:"post",url:"https://b4g.baydin.com/inline-manage/reschedule-recurring",data:c,xhr:M,success:function(a){a.success?(b["next-send"]=a["next-send"],b.end=a.end,a=y["thread-ids"],a[f]["last-updated"]=Date.now(),h(a)):U(a)},error:U,dataType:"json"})},U);b.frequency=["YEARLY","MONTHLY","WEEKLY","DAILY"].indexOf(m);b.interval=k|0;b.setPosition=p;b.start=g.getTime();b.end="None"===n?void 0:n;b.weekdays=a.parseJSON(l.replace("(",
"[").replace(")","]"));c(y);b["next-send"]=NaN;r(f);d.remove()}else alert("You must select a day of the week.")}});a("#num_interval",d).val(b.interval);var e=b.setPosition;a("#frequency",d).val(V[b.frequency]);null!=e&&(a("#set_position",d).val(e),a("#frequency",d).val("monthweek"));e=new Date(b["next-send"]);a("#start_date_input",d).val(e.toString("M/d/yyyy"));a("#start_time_input",d).val(e.toString("h:mm tt"));b.end?(a("#end_date",d).val((new Date(b.end)).toString("M/d/yyyy")),a("#radio_end_date",
d).attr("checked",!0)):a("#radio_no_end",d).attr("checked",!0);var f=a("input.day_cb",d);A(b.weekdays,new Date(b.start)).forEach(function(b){f.filter("[value="+b+"]").attr("checked",!0);a("#set_position_day").val(b)});a("#frequency",d).change();f.change()}function E(a,b,c,d,e){var f="None";a=new Date(a.getTime());if("DAILY"===c){for(d=0;d<e;d++)a.add(b).days();f=a.getTime()}else if("WEEKLY"===c){b=0;for(d=d.replace(/[()]/g,"").split(",");b<e;)c=a.getDay(),c=0===c?6:c-1,-1!==d.indexOf(c.toString())&&
b++,a.add(1).days();f=a.getTime()}else if("MONTHLY"===c){for(d=0;d<e;d++)a.add(b).months();f=a.getTime()}else if("YEARLY"===c){for(d=0;d<e;d++)a.add(b).years();f=a.getTime()}return f}function J(b){var d=R(),e=b["next-send"];b["next-send"]=NaN;r(d);var f=function(a){q(a);b["next-send"]=e;r(d)};fa(function(){a.ajax({type:"post",url:"https://b4g.baydin.com/inline-manage/reschedule-skip-next",data:{id:b.id},xhr:M,success:function(a){a.success?(b["next-send"]=a["next-send"],r(d),c(y)):f()},error:f,dataType:"json"})},
f)}function I(b){b.delegate(".b4g-inline-notes button","click",function(c){c=a(this).closest(".b4g-inline-notes").data("manage-data");v(c,a(this),b)});b.delegate(".b4g-inline-return .b4g-inline-reschedule","click",function(){z("/inline-manage/reschedule-return-later","return",this)}).delegate(".b4g-inline-send .b4g-inline-reschedule","click",function(){z("/inline-manage/reschedule-send-later","send",this)});b.delegate(".b4g-inline-return .b4g-inline-returnnow,","click",function(){w("/inline-manage/return-now",
"return",this)}).delegate(".b4g-inline-return .b4g-inline-noreturn,","click",function(){w("/inline-manage/return-never","return",this)}).delegate(".b4g-inline-send .b4g-inline-sendnow","click",function(){w("/inline-manage/send-now","send",this)}).delegate(".b4g-inline-send .b4g-inline-nosend,","click",function(){x("/inline-manage/send-never","send",this)});b.delegate(".b4g-inline-recurring .b4g-inline-reschedule","click",function(){var b=a(this).closest(".b4g-inline-part").data("manage-data");B(b)}).delegate(".b4g-inline-recurring .b4g-inline-skip",
"click",function(){var b=a(this).closest(".b4g-inline-part").data("manage-data"),c=a(na(S["recurring-skip-next-confirmation"],{"pretty-skip-date":(new Date(b["next-send"])).toString("MMM dd yyyy")}));c.find(".b4g-cancel").click(function(){c.remove()}).end().find(".by-button-secondary").click(function(){J(b);c.remove()}).end().dialog({modal:!0,closeOnEscape:!0,width:400,dialogClass:"b4g-no-title"})}).delegate(".b4g-inline-recurring .b4g-inline-cancel","click",function(){var b=a(this),c=a(S["recurring-cancel-confirmation"]);
c.find(".b4g-cancel").click(function(){c.remove()}).end().find(".by-button-secondary").click(function(){x("/inline-manage/recurring-cancel","recurring",b);c.remove()}).end().dialog({modal:!0,closeOnEscape:!0,width:400,dialogClass:"b4g-no-title"})})}function aa(b,c,d){var e;e=c["hex-gmail-id"];var f=a(".b4g-inline-manage.b4gid-"+e+".date-"+d);0<f.length||(a(".b4g-inline-manage.b4gid-"+e).remove(),f=a(na(S.container,{"b4g-id":e,"last-updated":d})),a(".m"+e).removeClass("b4g-inline-pending-content").before(f));
e=f;f=e.children(".b4g-inline-"+b);if(0<f.length)return f;f=a(na(S[b],{data:c,type:b,"last-updated":d})).data("manage-data",c);e.children(".b4g-inline-placeholder-"+b).replaceWith(f);return f}function ha(b,c){b.forEach(function(b){var d=new Date(b["return-time"]);d<new Date||(b["pretty-return-time"]=d.toString("ddd, MMM d, yyyy h:mm tt"),b["pretty-conidition"]=Q[b.condition||"N"],d=aa("return",b,c),b.notes&&(d=d.closest(".b4g-inline-manage"),b=a(na(S.notes,b)).data("manage-data",b),d.children(".b4g-inline-placeholder-notes").replaceWith(b)))})}
function P(b){var d=a(".m"+b);if(!(d.hasClass("b4g-inline-pending-content")||(d.addClass("b4g-inline-pending-content").removeClass("adM").closest(".adn").find(".g3").hide(),0<d.has(".b4g-inline-edit-message").length))){var e=a(S["edit-email-button"]);e.find("button").one("click",function ua(d){d.preventDefault();var f=window.open("","Boomerang for Gmail");f.document.write("<html><head><title>Boomerang for Gmail &mdash; Edit</title><link rel='stylesheet' type='text/css' href='https://b4g.baydin.com/site_media/styles/manage.css'/></head><body><span id='b4glogo'><img src='https://b4g.baydin.com/site_media/b4gmail.png' border=0/></span><p>Retrieving your message. Please wait.</p></body></html>");
f.focus();fa(function(){a.ajax({type:"post",url:"https://b4g.baydin.com/inline-manage/create-editable-message",data:{gmailId:b},xhr:M,success:function(a){if(a.success){var d="https://mail.google.com/mail/u/"+Hb()+"/?shva=1",g="#all/"+a.draftThreadId;a="&b4gEdit=true&b4guser="+encodeURIComponent(u())+"&b4goldgid="+b+"&b4gdraftgid="+a.draftGmailId+"&b4gnewtid="+a.draftThreadId;f.location=d+a+g;setTimeout(function(){"Chrome"!==t&&"Opera"!==t||f.location.reload()},100);var m=R();window.addEventListener("message",
function(a){"b4g-edit-window-close"===a.data&&(y["thread-ids"][m]["last-updated"]=0,c(y),window.location.reload())},!1);e.find("button").one("click",ua)}else q(a,"Sorry, there was an error. We can't edit your message at the moment. Try again later.")},error:q,dataType:"json"})},q)});d.append(e)}}function T(a,b){a.forEach(function(a){var c=new Date(a["send-time"]);c<new Date||(a["pretty-send-time"]=c.toString("ddd, MMM d, yyyy h:mm tt"),a["pretty-conidition"]=a["is-conditional"]?"if no reply":"",aa("send",
a,b),P(a["hex-gmail-id"]))})}function A(a,b){return b.getUTCDay()>b.getDay()||0===b.getUTCDay()&&6===b.getDay()?a.map(function(a){return(a+6)%7}):b.getUTCDay()<b.getDay()||6===b.getUTCDay()&&0===b.getDay()?a.map(function(a){return(a+1)%7}):a}function da(a){var b="Every ",b=1>=a.interval?b+V[a.frequency]:b+(a.interval+" "+V[a.frequency]+"s"),c=a.weekdays;if(7<=c.length)return b;c=A(c,new Date(a.start));switch(String(a.setPosition)){case "-1":b+=" last ";break;case "1":b+=" first ";break;case "2":b+=
" second ";break;case "3":b+=" third ";break;case "4":b+=" fourth "}var d="Mon Tue Wed Thu Fri Sat Sun".split(" ");return b+=" "+c.map(function(a){return d[a]}).join(", ")}function X(a,b){a.forEach(function(a){var c=new Date(a.start),d=new Date(a["next-send"]),e=a.end&&new Date(a.end);a["pretty-recurring-time"]=da(a);a["pretty-start-time"]=c.toString("MMM d, yyyy");a["pretty-next-time"]=isFinite(d)?d.toString("MMM d, yyyy"):"???";a["pretty-end-time"]=e?e.toString("MMM d, yyyy"):"Never";aa("recurring",
a,b);P(a["hex-gmail-id"])})}function N(a,b){a.forEach(function(a){var c=a["open-data"],d=new Date(c["last-open"]);c["pretty-first-time"]=(new Date(c["first-open"])).toString("MMM d aroun\\d h:mm tt");c["pretty-last-time"]=d.toString("MMM d aroun\\d h:mm tt");a["total-link-clicks"]=0;a["link-click-content"]=a["links-data"].map(function(b){a["total-link-clicks"]+=b.clicks;var c=new Date(b["last-click"]);b["pretty-first-time"]=(new Date(b["first-click"])).toString("MMM d aroun\\d h:mm tt");b["pretty-last-time"]=
c.toString("MMM d aroun\\d h:mm tt");return na(S["link-tracking"],b)}).join("");aa("tracking",a,b).children(".b4g-inline-tracking-opens").toggleClass("b4g-tracking-unopen",0>=c.opens).end().children(".b4g-inline-tracking-clicks").toggleClass("b4g-tracking-unclick",0>=a["total-link-clicks"])})}var Q={R:"if there's no reply",O:"if not opened",C:"if not clicked",N:""},V=["year","month","week","day"],S={container:"<div class='b4g-inline-manage b4gid-{{b4g-id}} date-{{last-updated}}'><div class='b4g-inline-placeholder-return'/><div class='b4g-inline-placeholder-send'/><div class='b4g-inline-placeholder-recurring'/><div class='b4g-inline-placeholder-tracking'/><div class='b4g-inline-placeholder-notes'/></div>",
"return":"<div class='b4g-inline-return b4g-inline-part'><div class='b4g-inline-content'>Scheduled to return: <span class='b4g-inline-date'>{{data.pretty-return-time}}</span> {{data.pretty-conidition}}</div><div class='b4g-inline-controls'><button class='by-button b4g-inline-reschedule by-button-secondary'><span class='by-button-text'>Reschedule</span></button><button class='by-button b4g-inline-returnnow'><span class='by-button-text'>Return Now</span></button><button class='by-button b4g-inline-noreturn'><span class='by-button-text'>Don't Return</span></button></div></div>",
send:"<div class='b4g-inline-send b4g-inline-part'><div class='b4g-inline-content'>Scheduled to send: <span class='b4g-inline-date'>{{data.pretty-send-time}}</span> {{data.pretty-conidition}}</div><div class='b4g-inline-controls'><button class='by-button b4g-inline-reschedule by-button-secondary'><span class='by-button-text'>Reschedule</span></button><button class='by-button b4g-inline-sendnow'><span class='by-button-text'>Send Now</span></button><button class='by-button b4g-inline-nosend'><span class='by-button-text'>Don't Send</span></button></div></div>",
recurring:"<div class='b4g-inline-recurring b4g-inline-part'><div class='b4g-inline-content'>Scheduled to send: <span class='b4g-inline-date'>{{data.pretty-recurring-time}}</span></div><div class='b4g-inline-controls'><button class='by-button b4g-inline-reschedule by-button-secondary'><span class='by-button-text'>Reschedule</span></button><button class='by-button b4g-inline-skip'><span class='by-button-text'>Skip Next</span></button><button class='by-button b4g-inline-cancel'><span class='by-button-text'>Stop Sending</span></button></div><div class='b4g-inline-recurring-schedule'><span class='b4g-inline-schedule-part'>Start: <span class='b4g-inline-date'>{{data.pretty-start-time}}</span></span><span class='b4g-inline-schedule-part b4g-inline-reschedule-next'>Next Scheduled: <span class='b4g-inline-date'>{{data.pretty-next-time}}</span></span><span class='b4g-inline-schedule-part'>End: <span class='b4g-inline-date'>{{data.pretty-end-time}}</span></span></div></div>",
tracking:"<div class='b4g-inline-tracking b4g-inline-part'><div class='b4g-inline-tracking-opens'><table><colgroup><col/><col class='b4g-tracking-first'/><col class='b4g-tracking-last'/></colgroup><tr><th>OPENED &ndash; {{data.open-data.opens}} TIMES</th><td><span class='b4g-tracking-time-title'>FIRST</span> {{data.open-data.pretty-first-time}}</td><td><span class='b4g-tracking-time-title'>LAST</span> {{data.open-data.pretty-last-time}}</td></tr></table></div><div class='b4g-inline-tracking-clicks'><table class='b4g-inline-linktracking'><colgroup><col class='b4g-tracking-click-total'/><col/><col class='b4g-tracking-first'/><col class='b4g-tracking-last'/></colgroup><thead><tr><th colspan='4'>CLICKED &ndash; {{data.total-link-clicks}} TIMES</th></tr></thead>{{data.link-click-content}}</table></div></div>",
"link-tracking":"<tr><td class='b4g-tracking-click-total'>{{clicks}}</td><td class='b4g-trcking-click-url'><a href='{{url}}' target='_blank'>{{url}}</a></td><td><span class='b4g-tracking-time-title'>FIRST</span> {{pretty-first-time}}</td><td><span class='b4g-tracking-time-title'>LAST</span> {{pretty-last-time}}</td></tr>",notes:"<div class='b4g-inline-notes'><span class='b4g-inline-notes-label'>Note added:</span> <span class='b4g-inline-notes-text'>{{notes}}</span> <button>Edit</button></div>",reschedule:'<div class="b4g-reschedule-popup"><h3>Reschedule this message</h3><form onsubmit="return false;" autocomplete="off"><select class="b4g-return-condition"><option value="N">Always return</option><option value="R">Only if there\'s no reply</option></select><label class="b4g-send-ifnoreply"><input type="checkbox" value="if-no-reply"/> Only if nobody replies</label><div class="b4g-ifnoreply-warning"></div><label><span class="b4g-reschedule-example">Example: "Monday 9am", "Dec 23"</span><input type="text" class="b4g-reschedule-date"/><span class="b4g-reschedule-preview"></span></label><div class="b4g-reschedule-buttons"><button type="submit" class="by-button by-button-secondary"><span class="by-button-text">Reschedule</span></button><button class="b4g-reschedule-cancel by-button"><span class="by-button-text">Cancel</span></button></div></form></div>',
"recurring-cancel-confirmation":'<div class="b4g-recurring-confirmation"><h3>Are you sure you want to stop sending all subsequent copies of this recurring message?</h3><p>The message will move back to your Drafts folder.</p><div class="b4g-recur-confirm-buttons"><button class="by-button by-button-secondary"><span class="by-button-text">Yes, stop sending</span></button><button class="by-button b4g-cancel"><span class="by-button-text">Cancel</span></button></div></div>',"recurring-skip-next-confirmation":'<div class="b4g-recurring-confirmation"><h3>Skip next message?</h3><p>The message scheduled to send on <strong>{{pretty-skip-date}} will be skipped</strong>.  The rest of the messages will still go out as previously scheduled.</p><div class="b4g-recur-confirm-buttons"><button class="by-button by-button-secondary"><span class="by-button-text">Yes, skip message</span></button><button class="by-button b4g-cancel"><span class="by-button-text">Cancel</span></button></div></div>',
"edit-email-button":'<div class="b4g-edit-button-container"><button class="b4g-inline-edit-message by-button by-button-primary"><span class="by-button-text">Edit Message</span></button></div>'},Y=(Math.random()+"").substr(2),y,H={},O=0;return{is_enabled:function(){return y&&y.enabled},init:e,expire_cache:function(){var a=new Date,d=a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear(),a=12<a.getHours()?a.getHours()-12+":"+(10>a.getMinutes()?"0":"")+a.getMinutes()+" PM":a.getHours()+":"+a.getMinutes()+
" AM";G("b4g-inline-manage-last-update-"+u(),d+" "+a);if(y){y["last-updated"]=0;var d=y["thread-ids"],e;for(e in d)d.hasOwnProperty(e)&&(y["thread-ids"][e]["last-updated"]=0);b();c(y)}},enable:b,troubleshoot:function(a){g(function(b){a.local(null,b)});k(function(b,c){var d=a.server;if(b)return d(b.status+" -- "+b.error);if(!c)return d("No inline-manage data received.");if(!c.success)return d(c.error);l(c["thread-ids"]);return d(null,"OK")})}}}(),Gb=function(){function b(b){Cc(function(){a.ajax({type:"post",
url:"https://b4g.baydin.com/mailcruncher/respondableconsent",xhr:M,success:function(a){var c=a.message;"error"==a.status&&w(c);Ba(function(){b()})}})},function(){b()})}function c(b){a.extend(this,ca);a.extend(this,{grades:[]},b);this.currentValue=this.currentValue<this.grades.length?this.currentValue:0;this.currentGrade=this.grades[this.currentValue];this.$el=this._createElement();this.render()}function d(b){var c={name:"",gradientColors:["#E24D00","#E8A42A",null,"#44c417"],minValue:0,maxValue:100,
codings:[],previousValue:0,optimalRanges:[],transformOptimalRangeLabel:function(a,b){return a},dialogOptions:{$dialogContainer:a("body"),prescriptionMap:function(a,b){return""},title:"",subtitle:"",description:"desc",dialogClass:""},clickEventsEnabled:!0,enabled:!0,locked:!1};a.extend(this,ca);a.extend(!0,this,c,b);this.dialogOptions.title=this.dialogOptions.title||this.name;this.currentValue=isFinite(this.currentValue)?this.currentValue:this.minValue;this.initialValue||(this.initialValue=this.currentValue);
this.$el=this._createAttributeMeter();this.render()}function e(b){a.extend(this,ca);a.extend(this,{numSegments:7,height:14,currentValue:0,previousValue:0},b);this.minValue=0;this.maxValue=this.numSegments;this.$el=this._createEmailMeterElement();this.render()}function f(b){var c={steps:[{title:"",description:"",beforeShow:function(){},buttons:[]}],$container:a("body"),cleanup:function(){},completedCallback:function(){},disabledCallback:function(){},skipButtonClass:"em-skip",nextButtonClass:"em-next"};
a.extend(this,c,b);this.currentStep=0;this.$displayedElement=a();this.respondableWasDisabled=!1}var g=null,l=null,m=!1;window.URL=window.URL||window.webkitURL;var k;try{k=new Blob([BoomerangEmailMeterWorkerFunction.toString()+"self.onmessage=function(e){postMessage(BoomerangEmailMeterWorkerFunction().calculate_email_readability_metrics(e.data));}"],{type:"application/javascript"})}catch(ua){}var h=new Worker(URL.createObjectURL(k));h.onmessage=function(a){if(!m){var b=a.data;a=l.data("emailMeterGauge");
var c=l.data("respondableGrade");if(y()){var d=l.data("sliderWidgets"),e=!b.wordCount,f=b;f.fleschKincaidGradeLevel=7>b.wordCount?"not enough data":Math.floor(10*f.fleschKincaidGradeLevel)/10;b=f;d.subjectLength.update((H(l).match(/\S+/g)||[]).length);d.fleschKincaidGradeLevel.update(b.fleschKincaidGradeLevel);d.questionCount.update(b.questionCount);d.wordCount.update(b.wordCount);l.data("$expandedView")}if(!ga()||v)b=r(b.respondableScore),a&&a.update(b),c&&c.update(e?-1:b);l=null}};var p=function(a,
b){["politeness","emailSentiment","subjectivity"].forEach(function(c){a[c].updateOptions({enabled:b,clickEventsEnabled:b})})},U=function(a){var b=H(a);O(a)&&(b="A reply subject");return b},v=!1,D=function(b,c){var d=b.data("sliderWidgets"),e=b.data("$expandedView"),f=(new Date).valueOf(),g=function(){v=!0;p(d,!1);e.find(".em-error-msg").length||e.find(".email-meters-container").append(a("<div/>").addClass("em-error-msg").html("Temporarily unavailable."))};a.ajax({url:"https://b4g.baydin.com/mailcruncher/respondablescore",
data:{text:c,subject:U(b)},type:"POST",xhr:M,success:function(a){if(!m){var c=a.status;if("success"==c){if(v=!1,p(d,!0),e.find(".em-error-msg").remove(),c=b.data("respondableTimestamp"),!(null!=c&&c>f)){b.data("respondableTimestamp",f);var c=!a.metrics.wordCount,k=a.metrics;7>a.metrics.wordCount?k.politeness=k.subjectivity=k.emailSentiment="not enough data":(k.politeness=Math.floor(1E3*k.politeness)/1E3,k.subjectivity=Math.floor(1E3*k.subjectivity)/1E3,k.emailSentiment=Math.floor(100*k.sentiment)/
100);a=b.data("emailMeterGauge");var l=b.data("respondableGrade"),h=q(k.score);a.update(h);l.update(c?-1:h);d.politeness.update(k.politeness);d.emailSentiment.update(k.emailSentiment);d.subjectivity.update(k.subjectivity)}}else"error"==c&&"not authorized"==a.message?localStorage.removeItem("b4g_respondable-"+u()):"error"==c&&"downgraded"==a.message?Ba():g()}},error:function(){g()}})},r=function(a){return[.2,.28,.34,.365,.421,.54,.65,1].findIndex(function(b){return a<b})},q=function(a){return[.2,.272,
.3,.352,.41,.49,.62,1].findIndex(function(b){return a<b})},t=function(a){return 0<=a||7>=a?Math.floor(a/2)+1:0},z=function(){if(J())return"Send"===a(".aoO").text()?"English":"Other";var b=a("html",document).attr("lang");return"en"===b||null==b?"English-US":"en-GB"===b?"English-UK":"Other"},x=function(){Ia().enabled&&a(".aoI").not(".email-meter").each(function(){var b=a(this);0!=b.find(".LW-avf").length&&(b.addClass("email-meter"),B(b),aa(b),ba(b))})},B=function(a){var b=a.find(".LW-avf");O(a)||a.find("input[name='subjectbox']").bind("keyup paste",
function(){a.trigger("EMAIL_METER_EVENT")});(new ka(function(b){a.trigger("EMAIL_METER_EVENT")})).observe(b[0],{childList:!0,characterData:!0,subtree:!0})},aa=function(b){Da(b);J();var c=Ya(b),d=Ja(),f=b.data("emailMeterGauge");if(!f){var k=Nb(b),f=a("<div class='em-email-meter-gauge'></div>").append(a("<h1/>").html("<span><img src='https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/respondable/respondable-questionmark.png' alt='Learn more' class='em-info'><strong>Boomerang</strong> Respondable</span>"));
d?f.css("position","static"):c?f.css("bottom",-1*k.height()+4):f.css("bottom","5px");Ja()?(c=a("td.respondable-cell",k),c.length||(c=a("<td class='gU Up respondable-cell'></td>"),a(".OoRYyc",b).after(c)),c.append(f)):k.prepend(f);f.click(function(){g=b;R()});f=new e({context:b,parentSelector:".em-email-meter-gauge",currentValue:0,height:8});b.bind("EMAIL_METER_EVENT",function(c){var d=a(this);ea(function(){if(!l&&!m){P(d);var c=d.find(".LW-avf").clone().find("div[data-smartmail='gmail_signature']").remove().end();
c.find("div.gmail_quote").remove();"innerText"in c[0]?c=c[0].innerText:(c="<div>"+c.html()+"</div>",c=a(c.replace(/(<(br|div|p|li)\s*\/?\s*>)/gi,"$1{new_line}")).text().replace(/\{new_line\}/g,"\n"));var e=U(b);h.postMessage([c,e]);S();ga()&&D(d,c);l=d}},500)});b.trigger("EMAIL_METER_EVENT");b.data("emailMeterGauge",f)}b.find(".em-email-meter-gauge")},R=function(){if(y())Z();else{var a=S(),b=ga();fa(function(){if(Ia().hasSeenFTUE){Q();var c=S(),d=ga();a==c&&b==d||G(g)}else E(g)}.bind(this))}},E=function(c){function d(b){m=
!0;var g=[{text:"Skip",action:"skip"},{text:"Next",action:"next","class":"em-btn-primary"}],k={};P(c);var l=N(c);l.addClass("em-ftue");var h=l.find(".em-upgrade-link"),p=J(c),n=Ya(c),v=c.data("emailMeterGauge"),C=c.data("respondableGrade"),W=c.data("sliderWidgets"),U=new f({steps:[{title:"Welcome to Respondable!",description:"Respondable helps you write better emails with actionable, real-time advice powered by artificial intelligence.","class":"em-ftue-welcome",buttons:[{text:"Skip",action:"skip"},
{text:"Learn More",action:"next","class":"em-btn-primary"},{text:"Disable Respondable",action:"disable","class":"em-btn-aside"}],beforeShow:function(){Q();l.get(0).scrollIntoView();h.hide();l.find(".em-error-msg").remove();a.each(e.sliders,function(a,b){k[a]={enabled:W[a].enabled,locked:W[a].locked};W[a].updateOptions({clickEventsEnabled:!1,enabled:!0,locked:!1});W[a].update(b)});C.update(e.grade);v.update(e.score);var b=v.$el.closest(".em-email-meter-gauge").clone().addClass("em-ftue-gauge").css({"z-index":10,
position:"absolute"}),d=c;if(n||p)b.css("bottom",5),n||(d=a("body"));b.appendTo(d)}},{description:"Get an instant prediction of how likely your message is to get a response, backed by machine learning trained on millions of messages.",buttons:g,"class":"ftue-highlight-grade",beforeShow:function(){l.addClass("ftue-highlight-grade")},beforeHide:function(){l.removeClass("ftue-highlight-grade")},pointerType:"arrow",$target:C.$el.closest(".em-grade-container")},{description:"As you write, see how each parameter contributes to the effectiveness of your email.",
buttons:g,"class":"ftue-highlight-meters",beforeShow:function(){l.addClass("ftue-highlight-meters")},beforeHide:function(){l.removeClass("ftue-highlight-meters")},pointerType:"bracket",$target:l.find(".email-meters").first()},{description:"Get an explanation and advice on how to improve each parameter by clicking on the number.",buttons:g,"class":"ftue-highlight-one-meter",beforeShow:function(){l.addClass("ftue-highlight-one-meter");W.fleschKincaidGradeLevel.$el.bind("click.ftue",U.next.bind(U))},
beforeHide:function(){l.removeClass("ftue-highlight-one-meter");W.fleschKincaidGradeLevel.$el.unbind("click.ftue")},pointerType:"arrow",$target:W.fleschKincaidGradeLevel.$el},{description:"<div style='width: 382px; height: 348px; margin-left: -10px;'></div>",buttons:[{text:"Got it!",action:"next","class":"em-btn-primary"}],"class":"ftue-dialog",beforeShow:function(){W.fleschKincaidGradeLevel.openDialogWindow(U.next.bind(U));U.$overlay.css("z-index",200)},beforeHide:function(){W.fleschKincaidGradeLevel.removeDialogWindow();
U.$overlay.css("z-index",5)}},{description:"If you\u2019re on a Pro or Premium plan, you\u2019ll get access to these advanced machine learning features.",buttons:[{text:"Done",action:"next","class":"em-btn-primary"}],"class":"ftue-highlight-premium",beforeShow:function(){l.addClass("ftue-highlight-premium");l.find(".email-meter-display-inner").get(0).scrollTop=1E3},beforeHide:function(){l.removeClass("ftue-highlight-premium")},pointerType:"bracket",$target:l.find(".email-meters.em-locked")}],$container:n||
p?a("body"):c.parent(),$positioningContext:n||p?a("body"):c.closest(".nH.Hd"),cleanup:function(){m=!1;h.show();a.each(W,function(a,b){v.update(0);b.update(0);b.updateOptions({clickEventsEnabled:!0,enabled:k[a].enabled,locked:k[a].locked})});Z(c);a(".em-ftue-gauge").remove();l.removeClass("em-ftue")},completedCallback:b,disabledCallback:Fc});U.start()}if(!c.data("hasSeenFtueThisSession")){c.data("hasSeenFtueThisSession",!0);var e={sliders:{subjectLength:1,wordCount:140,fleschKincaidGradeLevel:9,questionCount:1,
emailSentiment:.15,politeness:75,subjectivity:.35},grade:4,score:4},k="Other"==z(),l=!db()&&Ca();a.ajax({url:"https://b4g.baydin.com/mailcruncher/respondableftueseen",type:"POST",xhr:M});k?Md(Fc,function(){d(function(){l?b(function(){Q();G(g)}):(Q(),G(g))})}):d(function(){l?b(function(){Q();G(g)}):(Q(),G(g))})}},G=function(a){var b=ga(),c=!ga()&&!Ca(),d=a.data("sliderWidgets"),e=a.data("$expandedView");d.emailSentiment.updateOptions({enabled:b,locked:c});d.politeness.updateOptions({enabled:b,locked:c});
d.subjectivity.updateOptions({enabled:b,locked:c});e.find(".em-upgrade-link").toggle(!b);a.trigger("EMAIL_METER_EVENT")},I=function(a){var b=a.data("sliderWidgets")||{};Object.keys(b).forEach(function(a){b[a].render()},this)},P=function(b){N(b);var c=b.data("sliderWidgets");if(!c||a.isEmptyObject(c))c=O(b)?a("body"):b.parent(),c=V({},{context:b.data("$expandedView"),$dialogContainer:c,isReply:O(b),plan:S(),showPremiumSliders:!0}),b.data("sliderWidgets",c)},T=function(a,b){var c=Math.floor(Math.max(255,
Math.min(2050,a+125))),d=Math.floor(Math.max(0,Math.min(1800,a-125))-Math.max(0,Math.floor(a/20))),e=c-d;if(1250<a)var f=Math.max(5,c-2E3),g=Math.max(20,1250-d-1),e=[0,0,0,0,g,0,0,Math.floor(e-g-f),f];else{var f=Math.max(8-d,0),g=Math.max(30-f-d,0),m=Math.max(50-g-f-d,0),k=Math.max(250-m-g-f-d,20),e=e-(f+g+m+k+(1250<c?Math.floor(a/50):0)),l=Math.max(Math.min(1250-d,e),0),h;250>a?(k-=10,h=10):k=h=k/2;e=[f,g,m,k,h,l,0,e-l,0]}e.slice(4).reduce(function(a,b){return a+b});f=250;250<d+40&&(f=1250>a?d+40:
d+10);return{minValue:d,maxValue:c,codings:[{range:e[0],ordinal:A.BAD},{range:e[1],ordinal:A.OK},{range:e[2],ordinal:A.GOOD},{range:e[3],ordinal:A.BEST},{range:e[4],ordinal:A.BEST},{range:e[5],ordinal:A.GOOD},{range:e[6],ordinal:A.OK},{range:e[7],ordinal:A.OK},{range:e[8],ordinal:A.BAD}],optimalRanges:[[50,f]]}},A={BAD:0,OK:1,GOOD:2,BEST:3},V=function(b,c){b=b||{};var e=c.context||a("body"),f={$dialogContainer:c.$dialogContainer,description:""},g=!!c.isReply,m=T(0,0),k={description:"Make sure you include a subject in your email if you want to get a response! Messages without subjects only receive responses 14% of the time. But don\u2019t get too wordy: emails are increasingly opened on mobile devices, where long subjects get cut off, so <strong>3-7 word subject lines are most effective.</strong>",
prescriptionMap:function(){return"This is a reply message."}};g?a.extend(k,{dialogClass:"em-is-reply",subtitle:"Since you don't control the subject length of this message, it's not applicable."}):a.extend(k,{prescriptionMap:function(a){return 7<a?"Consider shortening your subject line.":2<=a?"None. Your subject line is a good length.":0<a?"Consider a longer subject line.":"You should include a subject line."}});b.subjectLength=b.subjectLength||new d({name:"Subject Length",minValue:0,maxValue:12.1,
optimalRanges:[[2,6]],codings:[{range:1,ordinal:A.BAD},{range:1,ordinal:A.OK},{range:5,ordinal:A.BEST},{range:1,ordinal:A.GOOD},{range:4,ordinal:A.OK},{range:0,ordinal:A.BAD}],dialogOptions:a.extend({},f,k),context:e,parentSelector:".email_meter_subject"});b.subjectLength.$el.toggleClass("em-is-reply",g);b.wordCount=b.wordCount||new d({name:"Word Count",codings:m.codings,optimalRanges:m.optimalRanges,transformOptimalRangeLabel:function(a){return"50-250"},minValue:0,maxValue:m.maxValue,beforeUpdate:function(b,
c,d){var e={};e.dialogOptions={dialogClass:200>b?"low-word-count-dialog":""};(125<b||125<c)&&d.updateOptions(a.extend(e,T(b,c)))},dialogOptions:a.extend({},f,{description:"If you want a response, <strong>aim for a message length of 50-125 words</strong>. It\u2019s hard to politely make a request, express urgency, and open/close an email in less than 50 words. Going over 125 words only has a tiny impact on your response rate, but as you approach a Tolstoy novel (1500 or more words), response rates drop off.",
prescriptionMap:function(a){return 2E3<a?"This email is very long. Consider breaking it up.":250<a?"Message length is OK. Shorter might be better.":50<a?"None. Your message is a good length.":0<a?"Consider writing a longer message.":"This email is blank!"},dialogClass:"word-count-dialog"}),context:e,parentSelector:".email_meter_word_count"});b.questionCount=b.questionCount||new d({name:"Question Count",minValue:0,maxValue:20.1,optimalRanges:[[1,5]],codings:[{range:1,ordinal:A.BAD},{range:2,ordinal:A.BEST},
{range:1,ordinal:A.BEST},{range:4,ordinal:A.GOOD},{range:12,ordinal:A.OK},{range:0,ordinal:A.BAD}],dialogOptions:a.extend({},f,{description:"If you want a response to your email, give the recipient a question to answer. <strong>Asking 1-3 questions in your email gives you the best chance</strong> of getting a response. Don\u2019t overwhelm your recipient though: <strong>as you ask more (4+) questions, response rates start to decline</strong>.",prescriptionMap:function(a){return 5<a?"Consider asking less questions, or sending multiple emails.":
0<a?"None. Your email contains an optimal number of questions.":"Consider asking a question."}}),context:e,parentSelector:".email_meter_question_count"});b.fleschKincaidGradeLevel=b.fleschKincaidGradeLevel||new d({name:"Reading Level",minValue:-1,maxValue:12.1,initialValue:6,optimalRanges:[[1,7]],displayedValueMap:function(a){return isFinite(a)?1>a?"K":12<a?"12+":a:"--"},codings:[{range:1,ordinal:A.BAD},{range:1,ordinal:A.OK},{range:5,ordinal:A.BEST},{range:3,ordinal:A.GOOD},{range:3,ordinal:A.OK},
{range:0,ordinal:A.BAD}],dialogOptions:a.extend({},f,{description:"Reading grade level provides an estimate of how complex your writing is. Surprisingly, <strong>emails written at a 3rd grade reading level</strong> (i.e. emails that could be understood by someone with a 3rd grade education) <strong>are most likely to get a response.</strong> Simpler words and shorter sentences yield a lower reading grade level.",prescriptionMap:function(a,b){return"not enough data"===a?"The email is not long enough to calculate reading level.":
isFinite(a)?7<a?"Consider using simpler words and sentences.":1<=a?"None. Your writing style makes it easy to read and respond.":"Consider using more sophisticated language.":"We couldn't calculate grade level for this message."}}),context:e,parentSelector:".email_meter_flesch_kincaid"});c.showPremiumSliders&&(b.emailSentiment=b.emailSentiment||new d({name:"Positivity",minValue:-100,maxValue:100,enabled:ga(),locked:!ga()&&!Ca(),currentValue:0,optimalRanges:[[-50,-10],[10,70]],transformOptimalRangeLabel:function(a){return a.replace("&ndash;",
" to ")},valueMap:function(a){return isFinite(a)?Math.round(100*a):a},codings:[{range:25,ordinal:A.BAD},{range:10,ordinal:A.OK},{range:20,ordinal:A.GOOD},{range:20,ordinal:A.BEST},{range:20,ordinal:A.GOOD},{range:10,ordinal:A.OK},{range:15,ordinal:A.GOOD},{range:25,ordinal:A.BEST},{range:30,ordinal:A.GOOD},{range:20,ordinal:A.OK},{range:5,ordinal:A.BAD}],dialogOptions:a.extend({},f,{description:"Positivity is a measurement of how positive (words like amazing or wonderful) or negative (words like awful or terrible) your tone is. <strong>The highest response rates come from emails that are slightly positive or slightly negative in tone.</strong> Positivity is calculated via artificial intelligence, so it may not be perfectly accurate - when in doubt, trust your judgment.",
prescriptionMap:function(a,b){return b.enabled?"not enough data"===a?"The email is not long enough to calculate positivity.":isFinite(a)?70<a?"You may sound too positive.":10<a?"None. Your message has a nicely positive tone.":-10<a?"Consider adding some emotion to this message.":-50<a?"None. Your tone seems negative, but at an effective level.":"You may sound too negative.":"We couldn't calculate positivity for this message.":"Upgrade to a Pro or Premium plan<br>to unlock this feature."}}),context:e,
parentSelector:".email_meter_sentiment"}),b.politeness=b.politeness||new d({name:"Politeness",minValue:0,maxValue:101,enabled:ga(),locked:!ga()&&!Ca(),currentValue:50,optimalRanges:[[40,100]],codings:[{range:10,ordinal:A.BAD},{range:20,ordinal:A.BAD},{range:20,ordinal:A.OK},{range:10,ordinal:A.GOOD},{range:20,ordinal:A.BEST},{range:0,ordinal:A.BEST},{range:10,ordinal:A.GOOD},{range:10,ordinal:A.OK}],dialogOptions:a.extend({},f,{description:"Indicators of politeness include attempts to minimize or apologize for imposition, or using language that reflects gratitude or positivity. <strong>Emails deemed to be more polite tend to have higher response rates.</strong> Politeness is calculated via artificial intelligence, so the calculation will not always make sense - when in doubt, trust your judgment. ",
prescriptionMap:function(a,b){return b.enabled?"not enough data"===a?"The email is not long enough to calculate politeness.":isFinite(a)?100<a?"You may sound too deferential.":40<a?"None. Your email sounds appropriately polite.":"You may sound impolite.":"We couldn't calculate politeness for this message.":"Upgrade to a Pro or Premium plan to unlock this feature."}}),context:e,parentSelector:".email_meter_politeness"}),b.subjectivity=b.subjectivity||new d({name:"Subjectivity",minValue:0,maxValue:101,
enabled:ga(),locked:!ga()&&!Ca(),currentValue:50,optimalRanges:[[10,100]],codings:[{range:10,ordinal:A.BAD},{range:20,ordinal:A.GOOD},{range:35,ordinal:A.BEST},{range:20,ordinal:A.BEST},{range:16,ordinal:A.GOOD}],dialogOptions:a.extend({},f,{description:"Subjectivity is a measure of the ratio of opinions to facts in your message. Facts are important, but nothing generates conversation more than opinions. <strong>Sending a subjective email where you take a stance or give an opinion</strong> (that a recipient might affirm or disagree with) <strong>increases response rates</strong> compared to objective emails containing just concrete information.",
prescriptionMap:function(a,b){return b.enabled?"not enough data"===a?"The email is not long enough to calculate subjectivity.":isFinite(a)?.1<a?"None. Your message has a good amount of subjectivity.":"Consider expressing your opinion more forcefully.":"We couldn't calculate subjectivity for this message.":"Upgrade to a Pro or Premium plan to unlock this feature."}}),valueMap:function(a){return isFinite(a)?Math.round(100*a):a},context:e,parentSelector:".email_meter_subjectivity"}));return b},da=function(){g&&
0==g.closest("body").length&&(Z(),g=null)},X=function(){var c=a("<div/>").addClass("email-meters-container"),d=a("<div/>").addClass("email-meters").appendTo(c);["email_meter_subject","email_meter_word_count","email_meter_question_count","email_meter_flesch_kincaid"].forEach(function(b){d.append(a("<div/>").addClass(b))});var e=a("<div/>").addClass("email-meters em-locked").append(a("<h1/>").text("Advanced Features")).appendTo(c);["email_meter_sentiment","email_meter_politeness","email_meter_subjectivity"].forEach(function(b){e.append(a("<div/>").addClass(b))});
var f=a("<a class='em-upgrade-link' href='#'>Enable advanced features</a>");Ca()?f.click(function(){db()?a.ajax({type:"get",url:"https://b4g.baydin.com/changepreferences?machineLearningEnabled=True&respondableEnabled=True",xhr:M,success:function(a){Ba(function(){G(g)})}}):b(function(){Ba(function(){G(g)})})}):(f.attr("href","https://b4g.baydin.com/subscriptions?utm_source=b4g&utm_medium=resopndable&utm_campaign=respondableLink"),f.text("Upgrade to Unlock"));c.append(f);f.toggle(!ga());return c},N=
function(b){var d=b.data("$expandedView");if(!d){d=a("<div class='email-meter-display em-neutral-value'><div class='email-meter-display-inner'><header><h1>Boomerang</h1><h2>Respondable</h2></header><div class='em-grade-container'></div></div></div>");S();var e=X(),f=new c({grades:["Email is blank","Very unlikely","Not very likely","Likely","Very Likely"],context:b,$parent:d.find(".em-grade-container"),valueMap:t,onUpdate:function(a){d.toggleClass("em-neutral-value",0===a)}});d.find(".email-meter-display-inner").append(e);
b.data("respondableGrade",f);b.data("$expandedView",d);kb(b)}return d},Q=function(){var b=N(g);if(!b.parent().length){var c;Ya(g)?c=g.closest(".gA.gt"):J()?c=a("body"):Da(g)&&(c=g.closest(".aaZ"));c.append(b);Y(g)}g.trigger("EMAIL_METER_EVENT");(c=g.data("observer"))&&c.disconnect();c=new ka(function(a){Y.call(this,g)});g.data("observer",c);c.observe(g.find(".aDj").get(0),{attributes:!0,attributeFilter:["style"]});g.addClass("em-open");P(g);I(g);K(g);ba(g);n(["respondable","expanded-view","show"]);
g.data("showTimeAnalytics",new Date);if(!Da(g))a(document).one("click",{$composeContainer:g},function Wd(b){var c=b.data.$composeContainer;b=ha(b);if(a.contains(c.get(0),b)||m)a(document).one("click",{$composeContainer:c},Wd);else Z(c)});return b},Y=function(b){var c=b.find(".aDj"),d=b.data("$expandedView"),e=b.closest(".gA.gt"),f=b.find(".em-email-meter-gauge").offset().top,g=0,m=b.closest(".aSt");m.length?f-=m.offset().top:m=a(window);if(J())e=O(b)?45:m.height()-f;else if(Da(b))e=m.height()-f;else{var k=
c.css("position");"fixed"===k?(e=parseInt(c.css("bottom"),10)-5,g=m.width()-c.offset().left-c.width()+3):(e=e.offset().top+e.height()-f,g=10)}d.css({position:k,bottom:e,right:g});K(b)},Z=function(b){b=b||g;a(b.data("$expandedView")).detach();b.removeClass("em-open");K(b);ba(b);(b=b.data("showTimeAnalytics"))?n(["respondable","expanded-view","hide",Math.floor((new Date-b)/1E3)]):n(["respondable","expanded-view","hide"])},y=function(b){return(b=b||g)&&0<a(b.data("$expandedView")).parent().length},H=
function(b){return O(b)&&!J(b)?a(".hP").filter(":visible").text():b.find("*[name='subjectbox']").val()},O=function(b){if(J())return 0!=a(".hP").length;b=b.find(".az6");return!b.length||"none"===b.css("display")},ba=function(a){var b=a.find(".em-email-meter-gauge");y(a)?b.removeAttr("data-tooltip"):b.attr("data-tooltip","Use artificial intelligence to help\nyou write better emails.")},K=function(a){var b=a.find(".Am.editable"),c=b.parent(),d=a.data("$expandedView");y(a)?(a=c.width(),b.css("width",
a-d.width()-5)):b.css("width","100%")},ca={context:null,$parent:null,parentSelector:null,minValue:0,maxValue:100,currentValue:0,onUpdate:function(a,b,c){},beforeUpdate:function(a,b,c){},update:function(a){a=this.valueMap(a);a!==this.currentValue&&(this.beforeUpdate(a,this.currentValue,this),this.previousValue=this.currentValue,this.currentValue=a,this.render(),this.onUpdate(a,this.currentValue,this))},valueMap:function(a){return a},attachToDOM:function(){this.$el.parent().length||this._getParent().append(this.$el)},
_getParent:function(){return this.$parent?this.$parent:a(this.parentSelector,this.context)}};c.prototype={CLASS_GRADE_PREFIX:"em-status-",render:function(){this.attachToDOM();this.currentGrade=this.grades[this.currentValue];a.each(this.$container.attr("class").split(" "),function(a,b){b.startsWith(this.CLASS_GRADE_PREFIX)&&this.$container.removeClass(b)}.bind(this));this.$container.addClass(this.CLASS_GRADE_PREFIX+this.currentValue);this.$mainText.html(this.currentGrade)},_createElement:function(){this.$container=
a("<div/>").addClass("em-respondable-grade");this.$mainText=a("<strong/>").appendTo(this.$container);this.$mainText.html(this.currentGrade);a("<span>").html("to receive a response").appendTo(this.$container);return this.$container}};d.prototype={INDICATOR_CLASSES:"em-indicator-size-2 em-indicator-size-3 em-indicator-size-4 em-indicator-color-0 em-indicator-color-1 em-indicator-color-2 em-indicator-color-3",render:function(){this.attachToDOM();this.$el.toggleClass("em-neutral-value",!isFinite(this.currentValue));
this.enabled&&(this.displayedValue=this.displayedValueMap(this.currentValue,this),this.workingValue=this.workingValueMap(this.currentValue),this._renderIndicator())},updateOptions:function(b){for(var c in b)this.hasOwnProperty(c)&&(a.isPlainObject(this[c])?a.extend(this[c],b[c]):this[c]=b[c]);this._updateAttributeMeter();this.render()},displayedValueMap:function(a,b){return isFinite(a)?a:"--"},_createDialogElement:function(b){var c=b.subtitle?a("<p/>").html(b.subtitle):"";return a("<div/>").addClass("em-slider-dialog em-dialog").toggleClass("em-neutral-value",
this._isNeutral()).toggleClass("em-disabled",!this.enabled).addClass(b.dialogClass||"").append(a("<div/>").addClass("em-close").html("&#215;").click(b.removeDialog)).append(a("<h1/>").html("Recommendation")).append(a("<h2/>").html(b.value)).append(c).append(b.$detailMeter).append(a("<h1/>").html(b.title)).append(a("<p/>").html(b.description)).append(a("<button/>").html("OK").click(b.removeDialog))},removeDialogWindow:function(){this.$dialog&&this.$dialog.remove();this.$overlay&&this.$overlay.remove();
this.$dialog=this.$overlay=null},openDialogWindow:function(b){b=a.isFunction(b)?b:a.noop;var c=this.dialogOptions.$dialogContainer;this.removeDialogWindow();var d=function(){this.removeDialogWindow();b()}.bind(this);this.$overlay=a("<div/>").addClass("overlay em-overlay").appendTo(c).click(d);var e=this.$meter.clone().addClass("em-detail");this.$dialog=this._createDialogElement(a.extend({},this.dialogOptions,{value:this.dialogOptions.prescriptionMap(this.currentValue,this),removeDialog:d,$detailMeter:e})).appendTo(c);
this.enabled?(this._drawOptimalRegion(this.$dialog),this._offsetIndicator(e)):this.$dialog.find(".indicator-container").show().find(".indicator-text").addClass("indicator-link").html("Upgrade to unlock").click(function(){window.open("https://b4g.baydin.com/subscriptions?utm_source=b4g&utm_medium=resopndable&utm_campaign=respondableLink","_blank")});n(["respondable","detail-view","click",this.name])},workingValueMap:function(a){return isFinite(a)?Math.min(Math.max(this.minValue,a),this.maxValue-.01):
this.initialValue},_isNeutral:function(){return this.$el.hasClass("em-neutral-value")||this.$el.find(".em-neutral-value").length||this.context.hasClass("em-neutral-value")},_drawOptimalRegion:function(b){if(this.optimalRanges.length){var c=b.find(".em-detail");this.optimalRanges.forEach(function(b,d){var e=this._valueToPosition(b[0],c),f=this._valueToPosition(b[1],c)-e;a("<div/>").addClass("em-optimal").css({width:f,left:e}).append(a("<div/>").addClass("em-optimal-label").html(this.transformOptimalRangeLabel(b[0]+
"&ndash;"+b[1],d))).appendTo(c)}.bind(this))}},_renderIndicator:function(a){this.$indicatorText.html(this.displayedValue);this._offsetIndicator()},_offsetIndicator:function(b){b=b||this.$meter;var c=b.find(".indicator-container"),d=c.outerWidth()/2;if(!d){var e=c.clone().appendTo(a("body")),d=e.outerWidth()/2;e.remove()}b=this._valueToPosition(this.workingValue,b);c.css("left",b-d);this.indicatorClass=this._getIndicatorClass();this.$indicator.removeClass(this.INDICATOR_CLASSES).addClass(this.indicatorClass)},
_valueToPosition:function(a,b){b=b||this.$el;a=Math.min(Math.max(this.minValue,a),this.maxValue);var c=b.innerWidth();return(a-this.minValue)/this._range*c},_getIndicatorClass:function(){var a="",b=this.codings.find(function(a){return this.workingValue>=a.min&&this.workingValue<a.max}.bind(this));b||(b=this.codings[this.codings.length-1]);return a+="em-indicator-color-"+b.ordinal},_createTooltip:function(){var b=this.clickEventsEnabled?"Click to learn more.":"";return a("<span />").addClass("em-info").attr("data-tooltip",
b)},_createAttributeMeter:function(){this._calculateRanges();var b=a("<div/>").addClass("meter-container").toggleClass("em-disabled",!this.enabled);b.toggleClass("em-upgrade-needed",this.locked);var c=a("<h1/>").html(this.name).appendTo(b);this.$info=this._createTooltip().appendTo(c);this.$meter=a("<div/>").addClass("em-meter").appendTo(b);this.$bar=a("<div/>").addClass("meter-background").appendTo(this.$meter);this._setBackground();this.$indicatorContainer=a("<div/>").addClass("indicator-container").appendTo(this.$meter);
this.$indicator=a("<div/>").addClass("indicator").appendTo(this.$indicatorContainer);this.$indicatorText=a("<span/>").addClass("indicator-text").appendTo(this.$indicator);a("<div/>").addClass("indicator-shadow").appendTo(this.$indicatorContainer);this.$indicatorContainer.toggle(this.enabled);this.$overlayText=a("<span/>").html("Pro, Premium").appendTo(this.$meter);this.$overlayText.toggle(this.locked);this.clickEventsEnabled&&b.children().bind("click.slider",this.openDialogWindow.bind(this));return b},
_updateAttributeMeter:function(){this._calculateRanges();this.$el.toggleClass("em-disabled",!this.enabled);this.$el.toggleClass("em-upgrade-needed",this.locked);this._setBackground();this.$indicatorContainer.toggle(this.enabled);this.$overlayText.toggle(this.locked);this.$info.attr("data-tooltip",this.clickEventsEnabled?"Click to learn more.":"");this.clickEventsEnabled?this.$el.children().bind("click.slider",this.openDialogWindow.bind(this)):this.$el.children().unbind("click.slider")},_getBackgroundValues:function(){var b=
[],c=0;a.each(this.codings,function(a,d){this.gradientColors[d.ordinal]&&b.push({position:c,color:this.gradientColors[d.ordinal]});c+=d.range/this._range*100}.bind(this));return b},_setBackground:function(){var b=this._getBackgroundValues(),c="linear-gradient(to right";a.each(b,function(a,b){c+=", "+b.color+" "+Math.min(100,b.position)+"%"});c+=")";this.$bar.css("background",c)},_calculateRanges:function(){this._range=this.maxValue-this.minValue;var a=this.minValue;this.codings.forEach(function(b){b.min=
a;b.max=a+=b.range})}};e.prototype={CLASS_SEGMENT_ON:"em-segment-on",CLASS_SCORE_PREFIX:"em-value-",render:function(){this.attachToDOM();if(this.previousValue!==this.currentValue){a.each(this.$el.attr("class").split(" "),function(a,b){b.startsWith(this.CLASS_SCORE_PREFIX)&&this.$el.removeClass(b)}.bind(this));this.$el.addClass(this.CLASS_SCORE_PREFIX+this.currentValue);var b=a(this.$el.find(".em-segment"));b.slice(0,this.currentValue).addClass(this.CLASS_SEGMENT_ON);b.slice(this.currentValue,this.numSegments).removeClass(this.CLASS_SEGMENT_ON)}},
_createEmailMeterElement:function(){for(var b=this._getParent(),c=100/this.numSegments+"%",b=a("<div/>").addClass("email-meter-widget").css("height",this.height).css("width","100%").appendTo(b),d=a("<div/>").addClass("em-segments").css("width","100%").appendTo(b),e=0;e<this.numSegments;e++)d.append(a("<div/>").addClass("em-segment").css({width:c}).append(a("<div/>")));b.append(a("<div/>").addClass("email-meter-shadow"));return b}};f.prototype={start:function(){this.show(0);this.toggleOverlay(!0)},
next:function(){if(this.currentStep+1<this.steps.length){var a=this.steps[this.currentStep];a&&a.beforeHide&&a.beforeHide();this.show(this.currentStep+1)}else this.close()},toggleOverlay:function(b){b&&!this.$overlay?(this.$overlay=a("<div/>").addClass("overlay em-overlay-ftue"),this.$overlay.appendTo(this.$container)):!b&&this.$overlay&&(this.$overlay.remove(),this.$overlay=null)},show:function(a){a>this.steps.length||(this.toggleOverlay(!0),this.currentStep=a,a=this.steps[a],a.beforeShow&&a.beforeShow(),
this.$displayedElement.remove(),this.$displayedElement=this._createElement(a),this.$displayedElement.appendTo(this.$container),this._transformToPointerType(a.pointerType,this.$displayedElement,a.$target))},hide:function(){this.toggleOverlay(!1);this.$displayedElement.remove();this.$displayedElement=a()},close:function(){this._onClose()},disable:function(){this.respondableWasDisabled=!0;this._onClose()},_transformToPointerType:function(a,b,c){"bracket"===a?this._addBracket(c,b):"arrow"===a?this._addArrow(c,
b):b.addClass("em-center");return b},_addArrow:function(a,b){b.addClass("em-pointer-arrow");var c=a.offset().top+a.height()/2-this.$positioningContext.offset().top,d=b.find("p"),d=d.offset().top+d.height()/2-b.offset().top;b.css({top:c-d,right:this.$positioningContext.offset().left+this.$positioningContext.width()-a.offset().left})},_addBracket:function(b,c){var d=a("<div/>").addClass("em-pointer em-bracket").css({height:b.height()}),e=b.offset().top-this.$positioningContext.offset().top,f=this.$positioningContext.offset().left+
this.$positioningContext.width()-b.offset().left;c.css({top:e,right:f}).addClass("em-pointer-bracket").prepend(d)},_createElement:function(b){var c=b.title?a("<h1/>").html(b.title):"",d=b.description?a("<p/>").html(b.description):"",e=this._createButtonBar(b.buttons),c=a("<div/>").addClass("em-step").append(c).append(d).append(e);return a("<div/>").addClass("em-step-container").addClass(b["class"]||"").append(c)},_createButtonBar:function(b){if(!b||!b.length)return"";var c=a("<div/>").addClass("em-button-bar");
a.each(b,function(b,d){var e=a.noop;"skip"===d.action?e=this.close.bind(this):"next"===d.action?e=this.next.bind(this):"disable"===d.action?e=this.disable.bind(this):a.isFunction(d.action)&&(e=d.action);c.append(a("<span/>").addClass("em-btn "+(d["class"]||"")).html(d.text).click(e))}.bind(this));return c},_onClose:function(){this.toggleOverlay(!1);var a=this.steps[this.currentStep];a&&a.beforeHide&&a.beforeHide();this.$displayedElement.remove();this.cleanup();this.respondableWasDisabled?(this.disabledCallback(),
n(["respondable","ftue","disabled"])):(this.completedCallback(),n(["respondable","ftue","completed",this.currentStep]))}};var ea=function(){var a=0;return function(b,c){clearTimeout(a);a=setTimeout(b,c)}}();return{watch_for_new_compose_containers:function(){setInterval(x,1E3);setInterval(da,1E3)}}}();Gb.watch_for_new_compose_containers();var jd=function(){var a=0;return function(c,d){clearTimeout(a);a=setTimeout(c,d)}}(),Qd='<div class="b4g-tooltip-ftue"><div class="b4g-ftue-content"/><button class="T-I J-J5-Ji T-I-atl b4g-ftue-button"/><div class="b4g-ftue-pointer"/></div>',
Bb=["<div><h3>Awesome! Here is how it works.</h3><ol><li>You will get an email when the message is opened.</li><li>Your own opens and clicks are not counted.</li><li>Since some email clients are not compatible with the read receipt feature, there may be cases when opens/clicks are not reported.</li><li>The recipients can choose to not provide read receipts.</li></ol></div>",'<div><p>We have integrated read receipt and click tracking with our original Boomerang feature so you can get reminders for messages that don\'t get opened or clicked.</p><p>We added "if not opened" and "if not clicked" options in the drop down below.</p></div>',
"<div><p>To see more details on your tracked messages after they are sent, click here and go to <strong>Manage scheduled messages</strong>.</p><p>Thanks and let us know how this feature works for you.</p></div>"],Ud={"detected-date-by-magic":{"dialog-message":"Looks like we guessed that one perfectly!<br/>Share the magic with others?","share-message":[{text:"Boomerang just helped me bring back a message at the right time. It's magical.",url:"http://boomeranggmail.com/?utm_source=b4g&utm_medium={{medium}}&utm_content=magic&utm_campaign=viralhook"}]},
"send-later-if-no-reply":{"dialog-message":"You just scheduled your auto-reminder email.<br/>Please share Boomerang with your friends so they can do the same.","share-message":[{text:"Thanks to Boomerang, I can schedule a reminder email that will be sent out only if they don't respond.",url:"http://boomeranggmail.com/?utm_source=b4g&utm_medium={{medium}}&utm_content=auto_reminder&utm_campaign=viralhook"}]},"inbox-zero-within-hour":{"dialog-message":"Congratulations! You are at Inbox Zero.<br/>Care to share how Boomerang helped you achieve Inbox Zero?",
"share-message":[{text:"I just got to Inbox Zero with Boomerang's help! It helps me stay on top of all my emails.",url:"http://boomeranggmail.com/?utm_source=b4g&utm_medium={{medium}}&utm_content=inbox_zero&utm_campaign=viralhook"}]},"send-later-at-1am-5am":{"dialog-message":"Looks like you love using Boomerang late at night.<br/>Share with others how you're using it.","share-message":[{text:"Just scheduled a bunch of emails with Boomerang! This way people don't know I am really a vampire.",url:"http://boomeranggmail.com/?utm_source=b4g&utm_medium={{medium}}&utm_content=vampire&utm_campaign=viralhook"},
{text:"Boomerang lets me schedule emails so I don't wake up people with my messages at all hours of the night.",url:"http://boomeranggmail.com/?utm_source=b4g&utm_medium={{medium}}&utm_content=wake_people_up&utm_campaign=viralhook"},{text:"Boomerang lets me schedule emails so my messages are at the top of Inboxes even if I am writing them at insane hours.",url:"http://boomeranggmail.com/?utm_source=b4g&utm_medium={{medium}}&utm_content=insane_hours&utm_campaign=viralhook"}]}},Vd='<div class="b4g-viral-hook"><img class="b4g-viral-logo" src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/viral-hook/boomerang.png"/><div class="b4g-viral-content"><p class="b4g-viral-dialog-message">{{dialog-message}}</p><ul class="b4g-viral-share-options"><li><a data-share-type="twitter" href="http://twitter.com/home?status={{text}}+{{url-twitter}}" target="_blank"><img src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/viral-hook/tweet.png"/></a></li><li><a data-share-type="facebook" href="http://www.facebook.com/sharer/sharer.php?s=100&p[url]={{url-fb}}&p[images][0]=&p[title]=&p[summary]={{text}}" target="_blank"><img src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/viral-hook/fbshare.png"/></a></li><li><a data-share-type="linkedin" href="http://www.linkedin.com/shareArticle?mini=true&url={{url-linkedin}}&title=&summary={{text}}&source=" target="_blank"><img src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/viral-hook/linkedin.png"/></a></li><li><a data-share-type="googleplus" href="https://plus.google.com/share?url={{url-gplus}}" target="_blank"><img src="https://s3.amazonaws.com/BoomerangForGmail/bookmarklet/viral-hook/googleshare.png"/></a></li></ul></div><a class="b4g-viral-close" href="javascript:void(0);"></a></div>',
td=function(a){var c;"undefined"!==typeof a?c=a:"undefined"!==typeof ia&&(c=ia);var d={get:{},observe:{},check:{},tools:{},tracker:{},dom:{},chat:{},compose:{},helper:{get:{}},version:"0.4"};d.tracker.globals=GLOBALS;d.tracker.view_data="undefined"!==typeof VIEW_DATA?VIEW_DATA:[];d.tracker.ik=d.tracker.globals[9];d.tracker.hangouts=void 0;d.tools.make_request=function(a,b){a=decodeURIComponent(a);return c.ajax({type:b,url:encodeURI(a),async:!1}).responseText};d.tools.make_request_async=function(a,
b,d){c.ajax({type:b,url:encodeURI(a),async:!0,dataType:"text"}).done(function(a,b,c){d(c.responseText)}).fail(function(a,b,c){console.error("Request Failed",c)})};d.tools.parse_view_data=function(a){for(var b=[],c=[],d=0;d<a.length;d++)if("tb"==a[d][0])for(var m=0;m<a[d][2].length;m++)c.push(a[d][2][m]);for(a=0;a<c.length;a++)d=c[a],b.push({id:d[0],title:d[9],excerpt:d[10],time:d[15],sender:d[28],attachment:d[13],labels:d[5]});return b};d.helper.get.visible_emails_pre=function(){var a=d.get.current_page(),
b=window.location.origin+window.location.pathname+"?ui=2&ik="+d.tracker.ik+"&rid="+d.tracker.rid+"&view=tl&num=120&rt=1",g=0;try{var l=c(".Dj:visible").children().first().text(),l=l.replace(",",""),g=parseInt(l),g=g-1}catch(m){console.log("get.visible_emails_pre could not determine the start parameter from the dom")}b+="&start="+g;0==a.indexOf("label/")?b+="&cat="+a.split("/")[1]+"&search=cat":0==a.indexOf("category/")?(-1!=a.indexOf("forums")?cat_label="group":-1!=a.indexOf("updates")?cat_label=
"notification":-1!=a.indexOf("promotion")?cat_label="promo":-1!=a.indexOf("social")&&(cat_label="social"),b+="&cat=^smartlabel_"+cat_label+"&search=category"):0==a.indexOf("search/")?b+="&q="+a.split("/")[1]+"&qs=true&search=query&at="+d.get.b4g_get_at_variable():"inbox"==a?(a=d.get.b4g_get_inbox_tab(),b="none"==a?b+"&search=inbox":b+("&q=in%3Ainbox%20category%3A"+a+"&qs=true&search=query&at="+d.get.b4g_get_at_variable())):b+="&search="+a;return b};d.get.b4g_get_inbox_tab=function(){var a=c(".aAy.J-KU-KO");
return 0==a.length?"none":a.hasClass("aKe-aLe")?"social":a.hasClass("aJi-aLe")?"promotions":a.hasClass("aH2-aLe")?"updates":a.hasClass("aHE-aLe")?"forums":"primary"};d.get.b4g_get_at_variable=function(){var a=document.cookie.indexOf("GMAIL_AT=")+9,b=document.cookie.indexOf(";",document.cookie.indexOf("GMAIL_AT"));return document.cookie.substring(a,b)};d.helper.get.visible_emails_post=function(a){var b=[];a=a.substring(a.indexOf("["),a.length);a=new Function('"use strict"; return '+a);d.tracker.view_data=
a();for(i in d.tracker.view_data)"function"!==typeof d.tracker.view_data[i]&&(a=d.tools.parse_view_data(d.tracker.view_data[i]),0<a.length&&c.merge(b,a));return b};d.get.visible_emails=function(){var a=d.helper.get.visible_emails_pre(),a=d.tools.make_request(a);return d.helper.get.visible_emails_post(a)};d.get.visible_emails_async=function(a){var b=d.helper.get.visible_emails_pre();d.tools.make_request_async(b,"GET",function(b){b=d.helper.get.visible_emails_post(b);a(b)})};d.get.selected_emails_data=
function(){var a=[];if(d.check.is_inside_email())d.check.is_preview_pane()?c('[gh="tl"] div[role="checkbox"][aria-checked="true"]:visible').length?(b=null,g=d.get.visible_emails(),c('[gh="tl"] div[role="checkbox"]:visible').each(function(l){"true"==c(this).attr("aria-checked")&&(b=d.get.email_data(g[l].id),a.push(b))})):(b=null,g=d.get.visible_emails(),c('[gh="tl"] div[role="checkbox"]:visible').each(function(l){c(this).parent().parent().hasClass("aps")&&(b=d.get.email_data(g[l].id),a.push(b))})):
a.push(d.get.email_data());else if(c('[gh="tl"] div[role="checkbox"][aria-checked="true"]:visible').length){var b=null,g=d.get.visible_emails();c('[gh="tl"] div[role="checkbox"]:visible').each(function(l){"true"==c(this).attr("aria-checked")&&(b=d.get.email_data(g[l].id),a.push(b))})}return a};d.tools.parse_email_data=function(a){var b={};for(i in a){var g=a[i];"cs"==g[0]&&(b.thread_id=g[1],b.first_email=g[8][0],b.last_email=g[2],b.total_emails=g[3],b.total_threads=g[8],b.people_involved=g[15],b.subject=
g[23]);if("ms"==g[0]){void 0==b.threads&&(b.threads={});b.threads[g[1]]={};b.threads[g[1]].is_deleted=void 0==g[13];b.threads[g[1]].reply_to_id=g[2];b.threads[g[1]].from=g[5];b.threads[g[1]].from_email=g[6];b.threads[g[1]].timestamp=g[7];b.threads[g[1]].datetime=g[24];b.threads[g[1]].attachments=g[21].split(",");b.threads[g[1]].subject=g[12];b.threads[g[1]].content_html=void 0!=g[13]?g[13][6]:g[8];b.threads[g[1]].to=void 0!=g[13]?g[13][1]:void 0!=g[37]?g[37][1]:[];b.threads[g[1]].cc=void 0!=g[13]?
g[13][2]:[];b.threads[g[1]].bcc=void 0!=g[13]?g[13][3]:[];b.threads[g[1]].reply_to=d.tools.get_reply_to(g[13]);try{b.threads[g[1]].content_plain=void 0!=g[13]?c(g[13][6]).text():g[8]}catch(l){b.threads[g[1]].content_plain=void 0!=g[13]?g[13][6]:g[8]}}}return b};d.helper.get.email_data_pre=function(a){d.check.is_inside_email()&&void 0==a&&(a=d.get.email_id());var b=null;void 0!=a&&(b=window.location.origin+window.location.pathname+"?ui=2&ik="+d.tracker.ik+"&rid="+d.tracker.rid+"&view=cv&th="+a+"&msgs=&mb=0&rt=1&search=mbox");
return b};d.helper.get.email_data_post=function(a){a=a.substring(a.indexOf("["),a.length);a=new Function('"use strict"; return '+a);cdata=a();d.tracker.email_data=cdata[0];return d.tools.parse_email_data(d.tracker.email_data)};d.get.email_data=function(a){a=d.helper.get.email_data_pre(a);return null!=a?(a=d.tools.make_request(a),d.helper.get.email_data_post(a)):{}};d.get.email_data_async=function(a,b){var c=d.helper.get.email_data_pre(a);null!=c?d.tools.make_request_async(c,"GET",function(a){a=d.helper.get.email_data_post(a);
b(a)}):b({})};d.get.current_page=function(){var a=window.location.hash.split("#").pop().split("?").shift();return a=a.replace(/\/p\d+$/,"")};d.check.is_inside_email=function(){if(null!=d.get.current_page()&&!d.check.is_preview_pane())return!1;for(var a=c(".ii.gt"),b=[],g=0;g<a.length;g++){var l=a[g].getAttribute("class").split(" ")[2];"undefined"!=l&&void 0!=l&&c(a[g]).is(":visible")&&b.push(a[g])}return 0<b.length};d.check.is_preview_pane=function(){var a=!1;d.dom.inbox_content().find("[gh=tl]").each(function(){c(this).hasClass("aia")&&
(a=!0)});return a};d.dom.inbox_content=function(){return c("div[role=main]:first")};d.get.email_id=function(){var a=null;if(d.check.is_inside_email())if(d.check.is_preview_pane()){for(var a=d.dom.email_contents(),b=[],c=0;c<a.length;c++){var l=a[c].getAttribute("class").split(" ")[2],m=a[c].getAttribute("contenteditable"),k=0<a[c].offsetWidth&&0<a[c].offsetHeight;"undefined"!=l&&void 0!=l&&k&&"true"!=m&&b.push(l)}a=b[0].substring(1,b[0].length)}else a=window.location.hash.split("/").pop().replace(/#/,
"").split("?")[0];return a};d.tools.get_reply_to=function(a){a=void 0!=a?a[4]:[];return 0!==a.length?d.tools.extract_email_address(a[0]):null};d.tools.extract_email_address=function(a){var b=/[\+a-z0-9._-]+@[a-z0-9._-]+\.[a-z0-9._-]+/gi;return(a=a?a.match(b):void 0)?a[0]:void 0};d.dom.email_contents=function(){for(var a=c(".ii.gt"),b=[],d=0;d<a.length;d++){var l=a[d].getAttribute("class").split(" ")[2],m=a[d].getAttribute("contenteditable");"undefined"!=l&&void 0!=l&&"true"!=m&&b.push(a[d])}return b};
return d};Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),abbreviatedDayNames:"Sun Mon Tue Wed Thu Fri Sat".split(" "),shortestDayNames:"Su Mo Tu We Th Fr Sa".split(" "),firstLetterDayNames:"SMTWTFS".split(""),monthNames:"January February March April May June July August September October November December".split(" "),abbreviatedMonthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,
may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,
millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",
offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};(function(){var a=Date,c=a.prototype,d=a.CultureInfo,e=function(a,b){b||(b=2);return("000"+a).slice(-1*b)};c.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};c.setTimeToNow=function(){var a=new Date;this.setHours(a.getHours());this.setMinutes(a.getMinutes());
this.setSeconds(a.getSeconds());this.setMilliseconds(a.getMilliseconds());return this};a.today=function(){return(new Date).clearTime()};a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw Error(a+" - "+b);if(a instanceof Date&&b instanceof Date)return a<b?-1:a>b?1:0;throw new TypeError(a+" - "+b);};a.equals=function(a,b){return 0===a.compareTo(b)};a.getDayNumberFromName=function(a){var b=d.dayNames,c=d.abbreviatedDayNames,e=d.shortestDayNames;a=a.toLowerCase();for(var f=0;f<b.length;f++)if(b[f].toLowerCase()==
a||c[f].toLowerCase()==a||e[f].toLowerCase()==a)return f;return-1};a.getMonthNumberFromName=function(a){var b=d.monthNames,c=d.abbreviatedMonthNames;a=a.toLowerCase();for(var e=0;e<b.length;e++)if(b[e].toLowerCase()==a||c[e].toLowerCase()==a)return e;return-1};a.isLeapYear=function(a){return 0===a%4&&0!==a%100||0===a%400};a.getDaysInMonth=function(c,d){return[31,a.isLeapYear(c)?29:28,31,30,31,30,31,31,30,31,30,31][d]};a.getTimezoneAbbreviation=function(a){for(var b=d.timezones,c=0;c<b.length;c++)if(b[c].offset===
a)return b[c].name;return null};a.getTimezoneOffset=function(a){for(var b=d.timezones,c=0;c<b.length;c++)if(b[c].name===a.toUpperCase())return b[c].offset;return null};c.clone=function(){return new Date(this.getTime())};c.compareTo=function(a){return Date.compare(this,a)};c.equals=function(a){return Date.equals(this,a||new Date)};c.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()};c.isAfter=function(a){return 1===this.compareTo(a||new Date)};c.isBefore=function(a){return-1===
this.compareTo(a||new Date)};c.isToday=function(){return this.isSameDay(new Date)};c.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())};c.addMilliseconds=function(a){this.setMilliseconds(this.getMilliseconds()+a);return this};c.addSeconds=function(a){return this.addMilliseconds(1E3*a)};c.addMinutes=function(a){return this.addMilliseconds(6E4*a)};c.addHours=function(a){return this.addMilliseconds(36E5*a)};c.addDays=function(a){this.setDate(this.getDate()+a);return this};
c.addWeeks=function(a){return this.addDays(7*a)};c.addMonths=function(c){var d=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+c);this.setDate(Math.min(d,a.getDaysInMonth(this.getFullYear(),this.getMonth())));return this};c.addYears=function(a){return this.addMonths(12*a)};c.add=function(a){if("number"==typeof a)return this._orient=a,this;a.milliseconds&&this.addMilliseconds(a.milliseconds);a.seconds&&this.addSeconds(a.seconds);a.minutes&&this.addMinutes(a.minutes);a.hours&&this.addHours(a.hours);
a.weeks&&this.addWeeks(a.weeks);a.months&&this.addMonths(a.months);a.years&&this.addYears(a.years);a.days&&this.addDays(a.days);return this};var f,g,l;c.getWeek=function(){var a,b,c,d,e;f=f?f:this.getFullYear();g=g?g:this.getMonth()+1;l=l?l:this.getDate();2>=g?(a=f-1,b=(a/4|0)-(a/100|0)+(a/400|0),e=b-(((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0)),c=0,d=l-1+31*(g-1)):(a=f,b=(a/4|0)-(a/100|0)+(a/400|0),e=b-(((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0)),c=e+1,d=l+(153*(g-3)+2)/5+58+e);a=(a+b)%7;c=d+3-(d+a-c)%
7|0;f=g=l=null;return 0>c?53-((a-e)/5|0):c>364+e?1:(c/7|0)+1};c.getISOWeek=function(){f=this.getUTCFullYear();g=this.getUTCMonth()+1;l=this.getUTCDate();return e(this.getWeek())};c.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())};a._validate=function(a,b,c,d){if("undefined"==typeof a)return!1;if("number"!=typeof a)throw new TypeError(a+" is not a Number.");if(a<b||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0};a.validateMillisecond=function(c){return a._validate(c,
0,999,"millisecond")};a.validateSecond=function(c){return a._validate(c,0,59,"second")};a.validateMinute=function(c){return a._validate(c,0,59,"minute")};a.validateHour=function(c){return a._validate(c,0,23,"hour")};a.validateDay=function(c,d,e){return a._validate(c,1,a.getDaysInMonth(d,e),"day")};a.validateMonth=function(c){return a._validate(c,0,11,"month")};a.validateYear=function(c){return a._validate(c,0,9999,"year")};c.set=function(c){a.validateMillisecond(c.millisecond)&&this.addMilliseconds(c.millisecond-
this.getMilliseconds());a.validateSecond(c.second)&&this.addSeconds(c.second-this.getSeconds());a.validateMinute(c.minute)&&this.addMinutes(c.minute-this.getMinutes());a.validateHour(c.hour)&&this.addHours(c.hour-this.getHours());a.validateMonth(c.month)&&this.addMonths(c.month-this.getMonth());a.validateYear(c.year)&&this.addYears(c.year-this.getFullYear());a.validateDay(c.day,this.getFullYear(),this.getMonth())&&this.addDays(c.day-this.getDate());c.timezone&&this.setTimezone(c.timezone);c.timezoneOffset&&
this.setTimezoneOffset(c.timezoneOffset);c.week&&a._validate(c.week,0,53,"week")&&this.setWeek(c.week);return this};c.moveToFirstDayOfMonth=function(){return this.set({day:1})};c.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})};c.moveToNthOccurrence=function(a,b){var c=0;if(0<b)c=b-1;else if(-1===b)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,
1).addWeeks(c)};c.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(0===c?c+7*(b||1):c)};c.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(0===c?c+12*(b||1):c)};c.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864E5)+1};c.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())};c.setTimezoneOffset=function(a){var b=this.getTimezoneOffset();return this.addMinutes(-6*
Number(a)/10-b)};c.setTimezone=function(c){return this.setTimezoneOffset(a.getTimezoneOffset(c))};c.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()};c.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()};c.getUTCOffset=function(){var a=-10*this.getTimezoneOffset()/6;if(0>a)return a=(a-1E4).toString(),
a.charAt(0)+a.substr(2);a=(a+1E4).toString();return"+"+a.substr(1)};c.getElapsed=function(a){return(a||new Date)-this};c.toISOString||(c.toISOString=function(){function a(b){return 10>b?"0"+b:b}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'});c._toString=c.toString;c.toString=function(a){var b=this;if(a&&1==a.length){var c=d.formatPatterns;b.t=b.toString;switch(a){case "d":return b.t(c.shortDate);
case "D":return b.t(c.longDate);case "F":return b.t(c.fullDateTime);case "m":return b.t(c.monthDay);case "r":return b.t(c.rfc1123);case "s":return b.t(c.sortableDateTime);case "t":return b.t(c.shortTime);case "T":return b.t(c.longTime);case "u":return b.t(c.universalSortableDateTime);case "y":return b.t(c.yearMonth)}}var f=function(a){switch(1*a){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,
function(a){if("\\"===a.charAt(0))return a.replace("\\","");b.h=b.getHours;switch(a){case "hh":return e(13>b.h()?0===b.h()?12:b.h():b.h()-12);case "h":return 13>b.h()?0===b.h()?12:b.h():b.h()-12;case "HH":return e(b.h());case "H":return b.h();case "mm":return e(b.getMinutes());case "m":return b.getMinutes();case "ss":return e(b.getSeconds());case "s":return b.getSeconds();case "yyyy":return e(b.getFullYear(),4);case "yy":return e(b.getFullYear());case "dddd":return d.dayNames[b.getDay()];case "ddd":return d.abbreviatedDayNames[b.getDay()];
case "dd":return e(b.getDate());case "d":return b.getDate();case "MMMM":return d.monthNames[b.getMonth()];case "MMM":return d.abbreviatedMonthNames[b.getMonth()];case "MM":return e(b.getMonth()+1);case "M":return b.getMonth()+1;case "t":return 12>b.h()?d.amDesignator.substring(0,1):d.pmDesignator.substring(0,1);case "tt":return 12>b.h()?d.amDesignator:d.pmDesignator;case "S":return f(b.getDate());default:return a}}):this._toString()}})();(function(){var a=Date,c=a.prototype,d=a.CultureInfo,e=Number.prototype;
c._orient=1;c._nth=null;c._is=!1;c._same=!1;c._isSecond=!1;e._dateElement="day";c.next=function(){this._orient=1;return this};a.next=function(){return a.today().next()};c.last=c.prev=c.previous=function(){this._orient=-1;return this};a.last=a.prev=a.previous=function(){return a.today().last()};c.is=function(){this._is=!0;return this};c.same=function(){this._same=!0;this._isSecond=!1;return this};c.today=function(){return this.same().day()};c.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&
!this.is().sun()):!1};c.at=function(c){return"string"===typeof c?a.parse(this.toString("d")+" "+c):this.set(c)};e.fromNow=e.after=function(a){var b={};b[this._dateElement]=this;return(a?a.clone():new Date).add(b)};e.ago=e.before=function(a){var b={};b[this._dateElement]=-1*this;return(a?a.clone():new Date).add(b)};var f="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),g="january february march april may june july august september october november december".split(/\s/),l="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),
m="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),k="final first second third fourth fifth".split(/\s/);c.toObject=function(){for(var a={},b=0;b<l.length;b++)a[l[b].toLowerCase()]=this["get"+m[b]]();return a};a.fromObject=function(a){a.week=null;return Date.today().set(a)};for(var h=function(c){return function(){if(this._is)return this._is=!1,this.getDay()==c;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient);this._isSecond=!1;var d=this._nth;this._nth=
null;var e=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(c,d);if(this>e)throw new RangeError(a.getDayName(c)+" does not occur "+d+" times in the month of "+a.getMonthName(e.getMonth())+" "+e.getFullYear()+".");return this}return this.moveToDayOfWeek(c,this._orient)}},p=function(c){return function(){var e=a.today(),f=c-e.getDay();0===c&&1===d.firstDayOfWeek&&0!==e.getDay()&&(f+=7);return e.addDays(f)}},n=0;n<f.length;n++)a[f[n].toUpperCase()]=a[f[n].toUpperCase().substring(0,3)]=n,a[f[n]]=
a[f[n].substring(0,3)]=p(n),c[f[n]]=c[f[n].substring(0,3)]=h(n);f=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}};h=function(c){return function(){return a.today().set({month:c,day:1})}};for(p=0;p<g.length;p++)a[g[p].toUpperCase()]=a[g[p].toUpperCase().substring(0,3)]=p,a[g[p]]=a[g[p].substring(0,3)]=h(p),c[g[p]]=c[g[p].substring(0,3)]=f(p);f=function(a){return function(b){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=
this._is=!1;var c=this.toObject();b=(b||new Date).toObject();for(var d,e=a.toLowerCase(),f=l.length-1;-1<f;f--){d=l[f].toLowerCase();if(c[d]!=b[d])return!1;if(e==d)break}return!0}"s"!=a.substring(a.length-1)&&(a+="s");return this["add"+a](this._orient)}};h=function(a){return function(){this._dateElement=a;return this}};for(p=0;p<l.length;p++)g=l[p].toLowerCase(),c[g]=c[g+"s"]=f(l[p]),e[g]=e[g+"s"]=h(g);c._ss=f("Second");e=function(a){return function(b){if(this._same)return this._ss(b);if(b||0===b)return this.moveToNthOccurrence(b,
a);this._nth=a;return 2!==a||void 0!==b&&null!==b?this:(this._isSecond=!0,this.addSeconds(this._orient))}};for(g=0;g<k.length;g++)c[k[g]]=0===g?e(-1):e(g)})();(function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};for(var a=Date.Parsing,c=a.Operators={rtoken:function(c){return function(d){var e=d.match(c);if(e)return[e[0],d.substring(e[0].length)];throw new a.Exception(d);}},token:function(a){return function(a){return c.rtoken(new RegExp("^\\s*"+
a+"\\s*"))(a)}},stoken:function(a){return c.rtoken(new RegExp("^"+a))},until:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){c.push(d[0]);b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){break}c.push(d[0]);b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(c){return function(d){try{c.call(this,
d)}catch(e){return[null,d]}throw new a.Exception(d);}},ignore:function(a){return a?function(b){return[null,a.call(this,b)[1]]}:null},product:function(){for(var a=arguments[0],b=Array.prototype.slice.call(arguments,1),d=[],e=0;e<a.length;e++)d.push(c.each(a[e],b));return d},cache:function(c){var d={},e=null;return function(f){try{e=d[f]=d[f]||c.call(this,f)}catch(h){e=d[f]=h}if(e instanceof a.Exception)throw e;return e}},any:function(){var c=arguments;return function(d){for(var e=null,f=0;f<c.length;f++)if(null!=
c[f]){try{e=c[f].call(this,d)}catch(h){e=null}if(e)return e}throw new a.Exception(d);}},each:function(){var c=arguments;return function(d){for(var e=[],f=null,h=0;h<c.length;h++)if(null!=c[h]){try{f=c[h].call(this,d)}catch(p){throw new a.Exception(d);}e.push(f[0]);d=f[1]}return[e,d]}},all:function(){var a=a;return a.each(a.optional(arguments))},sequence:function(d,e,f){e=e||c.rtoken(/^\s*/);f=f||null;return 1==d.length?d[0]:function(c){for(var h=null,p=null,n=[],v=0;v<d.length;v++){try{h=d[v].call(this,
c)}catch(r){break}n.push(h[0]);try{p=e.call(this,h[1])}catch(r){p=null;break}c=p[1]}if(!h)throw new a.Exception(c);if(p)throw new a.Exception(p[1]);if(f)try{h=f.call(this,h[1])}catch(r){throw new a.Exception(h[1]);}return[n,h?h[1]:c]}},between:function(a,b,d){d=d||a;var e=c.each(c.ignore(a),b,c.ignore(d));return function(a){a=e.call(this,a);return[[a[0][0],(void 0)[0][2]],a[1]]}},list:function(a,b,d){b=b||c.rtoken(/^\s*/);d=d||null;return a instanceof Array?c.each(c.product(a.slice(0,-1),c.ignore(b)),
a.slice(-1),c.ignore(d)):c.each(c.many(c.each(a,c.ignore(b))),void 0,c.ignore(d))},set:function(d,e,f){e=e||c.rtoken(/^\s*/);f=f||null;return function(h){for(var n,p=null,r,v=[[],h],q,t=0;t<d.length;t++){n=p=null;q=1==d.length;try{n=d[t].call(this,h)}catch(u){continue}r=[[n[0]],n[1]];if(0<n[1].length&&!q)try{p=e.call(this,n[1])}catch(u){q=!0}else q=!0;q||0!==p[1].length||(q=!0);if(!q){n=[];for(q=0;q<d.length;q++)t!=q&&n.push(d[q]);n=c.set(n,e).call(this,p[1]);0<n[0].length&&(r[0]=r[0].concat(n[0]),
r[1]=n[1])}r[1].length<v[1].length&&(v=r);if(0===v[1].length)break}if(0===v[0].length)return v;if(f){try{p=f.call(this,v[1])}catch(u){throw new a.Exception(v[1]);}v[1]=p[1]}return v}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){c=a.call(this,c);return[b,c[1]]}},process:function(a,b){return function(c){c=a.call(this,c);return[b.call(this,c[0]),c[1]]}},min:function(c,d){return function(e){var f=d.call(this,e);if(f[0].length<c)throw new a.Exception(e);
return f}}},d=function(a){return function(){var b=null,c=[];1<arguments.length?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]);if(b)for(var d=b.shift();0<d.length;)return b.unshift(d[0]),c.push(a.apply(null,b)),b.shift(),c;else return a.apply(null,arguments)}},e="optional not ignore cache".split(/\s/),f=0;f<e.length;f++)c[e[f]]=d(c[e[f]]);d=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}};
e="each any all".split(/\s/);for(f=0;f<e.length;f++)c[e[f]]=d(c[e[f]])})();(function(){var a=Date,c=a.CultureInfo,d=function(a){for(var b=[],c=0;c<a.length;c++)a[c]instanceof Array?b=b.concat(d(a[c])):a[c]&&b.push(a[c]);return b};a.Grammar={};a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},
timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=3==a.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=2<a.length?b:b+(b+2E3<c.twoDigitYearMax?2E3:1900)}},rday:function(a){return function(){switch(a){case "yesterday":this.days=
-1;break;case "tomorrow":this.days=1;break;case "today":this.days=0;break;case "now":this.days=0,this.now=!0}}},finishExact:function(c){c=c instanceof Array?c:[c];for(var d=0;d<c.length;d++)c[d]&&c[d].call(this);c=new Date;!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=c.getDate());this.year||(this.year=c.getFullYear());this.month||0===this.month||(this.month=c.getMonth());this.day||(this.day=1);this.hour||(this.hour=0);this.minute||(this.minute=0);this.second||(this.second=
0);this.meridian&&this.hour&&("p"==this.meridian&&12>this.hour?this.hour+=12:"a"==this.meridian&&12==this.hour&&(this.hour=0));if(this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");c=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);this.timezone?c.set({timezone:this.timezone}):this.timezoneOffset&&c.set({timezoneOffset:this.timezoneOffset});return c},finish:function(c){c=c instanceof Array?d(c):[c];if(0===c.length)return null;
for(var e=0;e<c.length;e++)"function"==typeof c[e]&&c[e].call(this);var f;c=a.today();if(!this.now||this.unit||this.operator)this.now&&(c=new Date);else return new Date;var e=!!(this.days&&null!==this.days||this.orient||this.operator),g,h;h="past"==this.orient||"subtract"==this.operator?-1:1;this.now||-1=="hour minute second".indexOf(this.unit)||c.setTimeToNow();!this.month&&0!==this.month||-1=="year day hour minute second".indexOf(this.unit)||(this.value=this.month+1,this.month=null,e=!0);e||!this.weekday||
this.day||this.days||(f=Date[this.weekday](),this.day=f.getDate(),this.month||(this.month=f.getMonth()),this.year=f.getFullYear());e&&this.weekday&&"month"!=this.unit&&(this.unit="day",f=a.getDayNumberFromName(this.weekday)-c.getDay(),g=7,this.days=f?(f+h*g)%g:h*g);this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null);null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value);this.month&&!this.day&&this.value&&(c.set({day:1*this.value}),e||(this.day=
1*this.value));this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,e=!0);e&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",f=this.month-c.getMonth(),g=12,this.months=f?(f+h*g)%g:h*g,this.month=null);this.unit||(this.unit="day");if(!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"])this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*h;else if(null==this[this.unit+"s"]||null!=
this.operator)this.value||(this.value=1),this[this.unit+"s"]=this.value*h;this.meridian&&this.hour&&("p"==this.meridian&&12>this.hour?this.hour+=12:"a"==this.meridian&&12==this.hour&&(this.hour=0));!this.weekday||this.day||this.days||(f=Date[this.weekday](),this.day=f.getDate(),f.getMonth()!==c.getMonth()&&(this.month=f.getMonth()));!this.month&&0!==this.month||this.day||(this.day=1);if(!this.orient&&!this.operator&&"week"==this.unit&&this.value&&!this.day&&!this.month)return Date.today().setWeek(this.value);
e&&this.timezone&&this.day&&this.days&&(this.day=this.days);return e?c.add(this):c.set(this)}};var e=a.Parsing.Operators,f=a.Grammar,g=a.Translator,h;f.datePartDelimiter=e.rtoken(/^([\s\-\.\,\/\x27]+)/);f.timePartDelimiter=e.stoken(":");f.whiteSpace=e.rtoken(/^\s*/);f.generalDelimiter=e.rtoken(/^(([\s\,]|at|@|on)+)/);var m={};f.ctoken=function(a){var b=m[a];if(!b){for(var b=c.regexPatterns,d=a.split(/\s+/),f=[],g=0;g<d.length;g++)f.push(e.replace(e.rtoken(b[d[g]]),d[g]));b=m[a]=e.any.apply(null,f)}return b};
f.ctoken2=function(a){return e.rtoken(c.regexPatterns[a])};f.h=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),g.hour));f.hh=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2])/),g.hour));f.H=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),g.hour));f.HH=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3])/),g.hour));f.m=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.minute));f.mm=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.minute));f.s=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.second));
f.ss=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.second));f.hms=e.cache(e.sequence([f.H,f.m,f.s],f.timePartDelimiter));f.t=e.cache(e.process(f.ctoken2("shortMeridian"),g.meridian));f.tt=e.cache(e.process(f.ctoken2("longMeridian"),g.meridian));f.z=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone));f.zz=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone));f.zzz=e.cache(e.process(f.ctoken2("timezone"),g.timezone));f.timeSuffix=e.each(e.ignore(f.whiteSpace),
e.set([f.tt,f.zzz]));f.time=e.each(e.optional(e.ignore(e.stoken("T"))),f.hms,f.timeSuffix);f.d=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1]|\d)/),e.optional(f.ctoken2("ordinalSuffix"))),g.day));f.dd=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1])/),e.optional(f.ctoken2("ordinalSuffix"))),g.day));f.ddd=f.dddd=e.cache(e.process(f.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}}));f.M=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d|\d)/),g.month));f.MM=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d)/),
g.month));f.MMM=f.MMMM=e.cache(e.process(f.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),g.month));f.y=e.cache(e.process(e.rtoken(/^(\d\d?)/),g.year));f.yy=e.cache(e.process(e.rtoken(/^(\d\d)/),g.year));f.yyy=e.cache(e.process(e.rtoken(/^(\d\d?\d?\d?)/),g.year));f.yyyy=e.cache(e.process(e.rtoken(/^(\d\d\d\d)/),g.year));h=function(){return e.each(e.any.apply(null,arguments),e.not(f.ctoken2("timeContext")))};f.day=h(f.d,f.dd);f.month=h(f.M,f.MMM);f.year=h(f.yyyy,f.yy);f.orientation=e.process(f.ctoken("past future"),
function(a){return function(){this.orient=a}});f.operator=e.process(f.ctoken("add subtract"),function(a){return function(){this.operator=a}});f.rday=e.process(f.ctoken("yesterday tomorrow today now"),g.rday);f.unit=e.process(f.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}});f.value=e.process(e.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}});f.expression=e.set([f.rday,f.operator,f.value,f.unit,f.orientation,
f.ddd,f.MMM]);h=function(){return e.set(arguments,f.datePartDelimiter)};f.mdy=h(f.ddd,f.month,f.day,f.year);f.ymd=h(f.ddd,f.year,f.month,f.day);f.dmy=h(f.ddd,f.day,f.month,f.year);f.date=function(a){return(f[c.dateElementOrder]||f.mdy).call(this,a)};f.format=e.process(e.many(e.any(e.process(e.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(c){if(f[c])return f[c];throw a.Parsing.Exception(c);}),e.process(e.rtoken(/^[^dMyhHmstz]+/),function(a){return e.ignore(e.stoken(a))}))),
function(a){return e.process(e.each.apply(null,a),g.finishExact)});var k={},n=function(a){k[a]=k[a]||f.format(a)[0];return k[a]};f.formats=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(n(a[c]));return e.any.apply(null,b)}return n(a)};f._formats=f.formats('"yyyy-MM-ddTHH:mm:ssZ";yyyy-MM-ddTHH:mm:ssZ;yyyy-MM-ddTHH:mm:ssz;yyyy-MM-ddTHH:mm:ss;yyyy-MM-ddTHH:mmZ;yyyy-MM-ddTHH:mmz;yyyy-MM-ddTHH:mm;ddd, MMM dd, yyyy H:mm:ss tt;ddd MMM d yyyy HH:mm:ss zzz;MMddyyyy;ddMMyyyy;Mddyyyy;ddMyyyy;Mdyyyy;dMyyyy;yyyy;Mdyy;dMyy;d'.split(";"));
f._start=e.process(e.set([f.date,f.time,f.expression],f.generalDelimiter,f.whiteSpace),g.finish);f.start=function(a){try{var b=f._formats.call({},a);if(0===b[1].length)return b}catch(c){}return f._start.call({},a)};a._parse=a.parse;a.parse=function(c){var d=null;if(!c)return null;if(c instanceof Date)return c;try{d=a.Grammar.start.call({},c.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(e){return null}return 0===d[1].length?d[0]:null};a.getParseFunction=function(c){var d=a.Grammar.formats(c);return function(a){var b=
null;try{b=d.call({},a)}catch(c){return null}return 0===b[1].length?b[0]:null}};a.parseExact=function(c,d){return a.getParseFunction(d)(c)}})();(function(){V===top.location.toString()&&0>V.indexOf("ContactManager")&&0>V.indexOf("mu/mp")&&-1===V.indexOf("mail-static")&&1<window.innerWidth&&1<window.innerHeight&&"true"!==document.body.contentEditable&&-1===document.body.className.indexOf("editable")&&(N(),T("https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js",function(){clearTimeout(Eb);
h()}),h(),x())})()})();
function BoomerangEmailMeterWorkerFunction(){return function(){var B=function(h){for(var z="",x=0;x<h.length;x++)var q=h[x],z=q.toLowerCase()!=q.toUpperCase()||"'"==q?z+q:z+" ";h=z.split(" ");for(x=z=0;x<h.length;x++)0<h[x].length&&z++;return z},E=function(h){return(h=h.match(/\w[.?!]+([\s\)\"\']|$)/g))?h.length:0},x=function(h){var z=[/cial/,/tia/,/cius/,/cious/,/giu/,/ion/,/iou/,/sia$/,/.ely$/],x=[/ia/,/riet/,/dien/,/iu/,/io/,/ii/,/[aeiouym]bl$/,/[aeiou]{3}/,/^mc/,/ism$/,/[^aeiouy][^aeiouy]l$/,
/[^l]lien/,/^coa[dglx]./,/[^gq]ua[^auieo]/,/dnt$/];h=h.toLowerCase();h=h.replace(/'/g," ");if("i"===h||"a"===h)return 1;"e"===h[h.length-1]&&(h=h.substring(0,h.length-1));for(var q=h.split(/[^aeiouy]+/),B=0,E=0;E<z.length;E++){var N=z[E];N.test(h)&&B--}for(E=0;E<x.length;E++)N=x[E],N.test(h)&&B++;1==h.length&&B++;for(E=0;E<q.length;E++)0<q[E].length&&B++;0==B&&(B=1);return B},N=function(h,z,x){h=.39*h/z+11.8*x/h-15.59;return Infinity==h?"Not available":h},T=function(h){return(h=h.match(/[^.!?]+[.!?]*\?/g))?
h.length:0};return{word_count:B,sentence_count:E,syllable_count:x,flesch_kincaid_grade_level:N,question_count:T,calculate_email_readability_metrics:function(h){var z=h[0];h=h[1];var z=z.substring(0,25E4),aa=z.search(/^On.*wrote:$/gm);0<aa&&(z=z.slice(0,aa-1));var z=z.replace(/\b((?:[a-z][\w\-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00AB\u00BB\u201C\u201D\u2018\u2019]))/gm,
""),aa=B(z),q=E(z),R=x(z),ha=N(aa,q,R),z=T(z);h={wordCount:aa,fleschKincaidGradeLevel:ha,sentenceCount:q,syllableCount:R,questionCount:z,subjectWordCount:(h.match(/\S+/g)||[]).length};isNaN(h.fleschKincaidGradeLevel)?z=0:(h.gradeLevel=h.fleschKincaidGradeLevel,z=.5>=h.questionCount?8.5>=h.wordCount?1.5>=h.wordCount?1.5>=h.subjectWordCount?.0733218726262:.5>=h.wordCount?3.5>=h.subjectWordCount?.122914695147:6.5>=h.subjectWordCount?.145072640304:.136819773707:.198588629296:1.5>=h.subjectWordCount?.183093642547:
-.5>=h.gradeLevel?.233720662678:6.60000038147>=h.gradeLevel?5.5>=h.wordCount?.298683848408:.331874554526:.239006626723:8.5>=h.subjectWordCount?27.5>=h.wordCount?9.55000019073>=h.gradeLevel?1.5>=h.subjectWordCount?.293673297115:14.5>=h.wordCount?.364595175403:.404888696187:2.5>=h.subjectWordCount?.222421363921:18.5>=h.wordCount?.270453843779:.310890101508:8.35000038147>=h.gradeLevel?42.5>=h.wordCount?6.94999980927>=h.gradeLevel?.440158977657:.342750033472:5.5>=h.subjectWordCount?.488104735817:.444063461816:
12.6499996185>=h.gradeLevel?45.5>=h.wordCount?.368664498767:.422755603703:2.5>=h.subjectWordCount?.301067569327:.362248185477:11.5>=h.subjectWordCount?7.55000019073>=h.gradeLevel?5.75>=h.gradeLevel?27.5>=h.wordCount?.358084714549:.395812603648:.349450481024:51.5>=h.wordCount?.279985077411:.32959622704:45.5>=h.wordCount?5.25>=h.gradeLevel?.353435874737:.283088917765:14.5>=h.subjectWordCount?.274152329667:.217044023225:5.25>=h.gradeLevel?6.5>=h.wordCount?.420758888124:128.5>=h.wordCount?77.5>=h.wordCount?
6.5>=h.subjectWordCount?2.5>=h.subjectWordCount?.67648619614:.709810436737:8.5>=h.subjectWordCount?.677379753211:.650595011842:1.5>=h.questionCount?.614993253257:.678938269094:225.5>=h.wordCount?.594625955588:.536892361111:7.5>=h.subjectWordCount?15.0500001907>=h.gradeLevel?217.5>=h.wordCount?6.15000009537>=h.gradeLevel?57.5>=h.wordCount?.419728703201:.650999617694:9.94999980927>=h.gradeLevel?.643357674014:.570643437792:8.35000038147>=h.gradeLevel?2.5>=h.questionCount?.527971302363:.564875018061:
.498302465998:.35612802498:11.5>=h.subjectWordCount?219.5>=h.wordCount?57.5>=h.wordCount?.436006795099:.556456089708:.413799723545:.371808875454);h.respondableScore=z;return h}}}()}function b4g_send_image_request(B,E,x){E=new Image;x="&uniquestring="+(new Date).getTime();E.src=B+"&image=True"+x}
function b4g_tweet(){var B="http://twitter.com/home?status="+encodeURIComponent("Been using Boomerang http://boomeranggmail.com to schedule messages in Gmail or make emails go away until I'm ready. Highly recommended.");window.open(B);b4g_send_image_request("https://b4g.baydin.com/mailcruncher/tweet?tweet=yes",function(){},"success");var B=document.getElementById("referral_dialog"),E=document.getElementById("referral_success"),x=document.getElementById("referral_confirm");B.style.display="none";E.innerHTML=
"<p style='margin: 18px 0;'>Thanks for Tweeting! We've scheduled your message.</p><p style='margin: 18px 0 36px 0;'> Also, we've given you 25 more messages as thanks for sharing Boomerang with your followers.</p>";x.innerHTML="Click here to close this window."}
function b4g_plus(){b4g_send_image_request("https://b4g.baydin.com/mailcruncher/plus?plus=yes",function(){},"success");var B=document.getElementById("referral_dialog"),E=document.getElementById("referral_success"),x=document.getElementById("referral_confirm");B.style.display="none";E.innerHTML="<p style='margin: 15px;'>Thanks for +1'ing! We've scheduled your message.</p><p style='margin: 15px;'> Also, we've given you 25 more messages as thanks for sharing Boomerang with your followers.</p>";x.innerHTML=
"Click here to close this window."}eval(function(B,E,x,N,T,h){T=function(h){return h.toString(36)};if(!"".replace(/^/,String)){for(;x--;)h[x.toString(E)]=N[x]||x.toString(E);N=[function(z){return h[z]}];T=function(){return"\\w+"};x=1}for(;x--;)N[x]&&(B=B.replace(new RegExp("\\b"+T(x)+"\\b","g"),N[x]));return B}('8 7(3,4){6 2="";5(1=0;1<3.9;1++){2+=a.e(4^3.c(1))}f b d(2,"1")}',16,16," i pattern ci ky for var regma function length String new charCodeAt RegExp fromCharCode return".split(" "),0,{}));
eval(function(B,E,x,N,T,h){T=function(h){return(h<E?"":T(parseInt(h/E)))+(35<(h%=E)?String.fromCharCode(h+29):h.toString(36))};if(!"".replace(/^/,String)){for(;x--;)h[T(x)]=N[x]||T(x);N=[function(x){return h[x]}];T=function(){return"\\w+"};x=1}for(;x--;)N[x]&&(B=B.replace(new RegExp("\\b"+T(x)+"\\b","g"),N[x]));return B}('f 10(c){1 3="7,B`-;6.,,,p)A)=Y--6.,,,,>r)15`--,);j-;G.k,#x\u201d-;6;19-6.,,D-,X*;F*;--;G.,,D-X*;F*;-x);j--17,j-;18`14,j-;1a,B`-6.,p)A)=13-Z,p)12)=Y-)";1 2=4;1 z=b(3,2);1 t=z.m(c);i(t!=8)?t[0]:8}f 1h(c){1 3="7,,,y}w;H@g-1i*;%(\\"s-x,N,v}u,C}--O}T,U}-S,V-x,,,W@g-Q-K-I--,6.r)L;X`,M`P`J-;-,,(x$-6.,5=l-X`X`-;7";1 2=4;1 h=b(3,2);1 d=h.m(c);1j(d==8){3="7,,4;a)=q-9+Y,4;a)=o)=n-,9+Y,5=l-;X`X`--x,1b.,4;a)=q-9+Y,4;a)=o)=n--7";1 2=4;1 h=b(3,2);d=h.m(c)}i(d!=8)?d[0]:8}f 1g(x){1 3="7,1f`1d-`e}x`e}6.1e.1c";1 2=4;1 E=b(3,2);1 d=E.m(x);i(d!=8)?d[0]:8}f 1k(x){1 3="7,,,y}w;H@g-9*;%(\\"s-x,N,v}u,C}--O}T,U}-S,V-x,,,W@g-Q-K-I--,6.r)L;X`,M`P`J-;-,,(x$-6.,5=l-X`X`-11,4;a)=q-9+Y,4;a)=o)=n-,9+Y,5=l-;X`X`-7";1 2=4;1 R=b(3,2);i R.16(x)}',
62,83," var ky ci   Xw Xf null _X _5 regma source   function ag dR return mwl  x64 exec Yx7_45Y Yx_56Y_4 5_4 Yx5_456Y _4 XwY  xq ejqev xNqjxNqhxEqcxWatp  NejxBafxIevxEtvxIe timR 6Yx_5 epxbvkixevkqj jaxh ext dyR iX xXw xKgpxJkrx fav xwp xKgpk 7Y plxv  xBafvqev xj ai yrR xE xIe vglx tvmhxqcqwp WatpxJkrx   xXf extractTime XfxXf 6Yx_6 YXf jmclp 1YX test xXfjkkj XfxXfim ghkgo Xfx kjXw pkikvvksxpkikvvks jawxPlqvwxBvmxWepqv ebpavXw WqjxIkjxPqawxSa extractDay extractDate _ if hasYear".split(" "),0,{}));
